(function(){"use strict";var e={1333:function(e,t,a){var s=a(5130),r=a(6768),i=a(4232);const o={class:"notification-portal"},n={key:0,class:"modal"},l={class:"modal-content"},c={class:"main-content"};function d(e,t,a,s,d,u){const p=(0,r.g2)("NotificationComponent"),m=(0,r.g2)("MainHeader"),h=(0,r.g2)("router-view"),g=(0,r.g2)("MainFooter");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",o,[(0,r.bF)(p)]),t[3]||(t[3]=(0,r.Lk)("div",{class:"marquee"},[(0,r.Lk)("span",null,"2024.09.01ï¼Œæ³¨æ„ï¼æœ¬å…¬å¸ä¸æœƒä¸»å‹•é€šçŸ¥å¸³å‹™å•é¡Œï¼Œè‹¥æœ‰ç›¸é—œç–‘å•è«‹æ´½å®¢æœï¼å°å¿ƒè©é¨™ï¼")],-1)),(0,r.bF)(m),(0,r.Lk)("div",{class:"floating-button",onClick:t[0]||(t[0]=(...e)=>s.toggleModal&&s.toggleModal(...e))},(0,i.v_)(s.modalVisible?"é—œé–‰ä»‹ç´¹":"ç¶²ç«™ä»‹ç´¹"),1),s.modalVisible?((0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("div",l,[(0,r.Lk)("span",{class:"close",onClick:t[1]||(t[1]=(...e)=>s.toggleModal&&s.toggleModal(...e))},"Ã—"),t[2]||(t[2]=(0,r.Fv)('<div class="notification-box" data-v-040f0953><h2 data-v-040f0953>ç¶²ç«™ä»‹ç´¹</h2><p data-v-040f0953> æœ¬ç¶²ç«™å‰ç«¯ä½¿ç”¨ <strong data-v-040f0953>Vue.js</strong> æ­é… <strong data-v-040f0953>Bootstrap 5</strong>ï¼Œå¯¦ç¾éŸ¿æ‡‰å¼è¨­è¨ˆ (RWD)ï¼Œ<br data-v-040f0953> å¾Œç«¯æ¡ç”¨ <strong data-v-040f0953>Node.js</strong> æ­é… <strong data-v-040f0953>Express</strong>ï¼Œè³‡æ–™åº«ä½¿ç”¨ <strong data-v-040f0953>MySQL</strong>ï¼Œéƒ¨ç½²æ–¼ <strong data-v-040f0953>Google Cloud Platform (GCP)</strong>ã€‚ </p><p data-v-040f0953> å…¨ç«™æ¡ç”¨ <strong data-v-040f0953>RESTful API</strong> è¨­è¨ˆï¼Œå‰å¾Œç«¯å®Œå…¨åˆ†é›¢ï¼Œç¢ºä¿è³‡æ–™äº¤äº’çš„é«˜æ•ˆèˆ‡ç©©å®šï¼Œ<br data-v-040f0953> æå‡ç³»çµ±çš„æ“´å±•æ€§èˆ‡ç¶­è­·æ€§ã€‚ </p><hr data-v-040f0953><h3 data-v-040f0953>ä¸»è¦åŠŸèƒ½ä»‹ç´¹</h3><ul data-v-040f0953><li data-v-040f0953><strong data-v-040f0953>æœƒå“¡ç³»çµ±ï¼š</strong>è¨»å†Š / ç™»å…¥ / ç™»å‡º / å¿˜è¨˜å¯†ç¢¼ / ä¿®æ”¹å¯†ç¢¼ / ç·¨è¼¯å€‹äººè³‡æ–™</li><li data-v-040f0953><strong data-v-040f0953>è³¼ç‰©è»Šç³»çµ±ï¼š</strong>å•†å“åŠ å…¥è³¼ç‰©è»Š / ä¿®æ”¹æ•¸é‡ / ç§»é™¤ / æ¸…ç©ºè³¼ç‰©è»Š</li><li data-v-040f0953><strong data-v-040f0953>è¨‚å–®ç³»çµ±ï¼š</strong>æŸ¥è©¢ / ä¿®æ”¹ / å–æ¶ˆè¨‚å–®</li><li data-v-040f0953><strong data-v-040f0953>å•†å“ç®¡ç†ç³»çµ±ï¼š</strong>æŸ¥çœ‹ / ä¿®æ”¹ / åˆªé™¤å•†å“</li><li data-v-040f0953><strong data-v-040f0953>å¾Œå°ç®¡ç†ä¸­å¿ƒï¼š</strong>æœƒå“¡ / å•†å“ / è¨‚å–®å…¨é¢æ§ç®¡ / éŠ·å”®æ›²ç·šåœ–æŸ¥çœ‹éŠ·å”®é¡åº¦</li><li data-v-040f0953><strong data-v-040f0953>é¦–é åŠŸèƒ½ï¼š</strong>éŠ·å”®æ’è¡Œé¡¯ç¤º / ç‰¹åƒ¹å•†å“æ§ç®¡</li></ul></div>',1))])])):(0,r.Q3)("",!0),(0,r.Lk)("div",c,[(0,r.bF)(h)]),(0,r.bF)(g)],64)}var u=a(144),p=a(782);const m={class:"header-container"},h={class:"headerbar d-flex align-items-center"},g={key:0,class:"nav-toggle-wrapper d-flex align-items-center ms-2"},k=["src"],f={class:"nav-content d-flex w-100 align-items-center justify-content-between"},b=["to"],v={class:"search-container d-flex mx-lg-3"},L={class:"search-input-wrapper"},y={class:"cartmember d-flex"},w=["src"],C={key:0,class:"member-item"},I={class:"cart-text"},A=["src"];function P(e,t,a,o,n,l){const c=(0,r.g2)("BNavbarToggle"),d=(0,r.g2)("router-link"),u=(0,r.g2)("BNavbarNav"),p=(0,r.g2)("BFormInput"),P=(0,r.g2)("BButton"),_=(0,r.g2)("BCollapse"),E=(0,r.g2)("BContainer"),F=(0,r.g2)("BNavbar");return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.bF)(F,{toggleable:"lg",type:"light",variant:"light",class:"navbar-overlay px-0"},{default:(0,r.k6)((()=>[(0,r.bF)(E,{fluid:""},{default:(0,r.k6)((()=>[(0,r.Lk)("div",h,[(0,r.bF)(c,{onClick:l.toggleNav},null,8,["onClick"]),n.isNavOpen?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("img",{src:e.$getImageUrl("arrowleft.png","icon"),alt:"å°èˆªæç¤º",class:"nav-toggle-image",onClick:t[0]||(t[0]=(...e)=>l.toggleNav&&l.toggleNav(...e))},null,8,k),t[4]||(t[4]=(0,r.Lk)("span",{class:"nav-toggle-text ms-1"},"è«‹é»é¸æ­¤è™•é–‹å•Ÿå°èˆªæ¬„",-1))]))]),(0,r.bF)(_,{id:"nav-collapse",modelValue:n.isNavOpen,"onUpdate:modelValue":t[3]||(t[3]=e=>n.isNavOpen=e),"is-nav":""},{default:(0,r.k6)((()=>[(0,r.Lk)("div",f,[(0,r.bF)(u,{class:"nav-links me-lg-3"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.navItems,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.path,to:e.path,class:"nav-item-container"},[(0,r.bF)(d,{to:e.path,class:"nav-link-text",onClick:l.closeNav},{default:(0,r.k6)((()=>[(0,r.eW)((0,i.v_)(e.text),1)])),_:2},1032,["to","onClick"])],8,b)))),128))])),_:1}),(0,r.Lk)("div",v,[(0,r.Lk)("div",L,[(0,r.bF)(p,{type:"text",modelValue:n.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchQuery=e),class:"search-box",placeholder:"è«‹è¼¸å…¥æƒ³æ‰¾çš„å•†å“æœå°‹",onKeyup:(0,s.jR)(l.handleSearch,["enter"])},null,8,["modelValue","onKeyup"]),(0,r.bF)(P,{class:"search-button btn btn-primary ms-2",onClick:l.handleSearch},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("æœå°‹")]))),_:1},8,["onClick"])])]),(0,r.Lk)("div",y,[(0,r.bF)(d,{class:"cart-item me-3",to:"/ShopCart",onClick:l.closeNav},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:e.$getImageUrl("shopping_cart.png","icon"),alt:"",class:"icon-img"},null,8,w),t[6]||(t[6]=(0,r.Lk)("span",{class:"cart-text"},"è³¼ç‰©è»Š",-1))])),_:1},8,["onClick"]),l.isLoggedIn?((0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("span",I,"æ­¡è¿ "+(0,i.v_)(l.userName),1),(0,r.Lk)("button",{class:"btn btn-link cart-text",onClick:t[2]||(t[2]=(...e)=>l.logout&&l.logout(...e))},"æœƒå“¡ç™»å‡º")])):((0,r.uX)(),(0,r.Wv)(d,{key:1,class:"member-item",to:"/UserLogin",onClick:l.closeNav},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:e.$getImageUrl("member_login.png","icon"),alt:"",class:"icon-img"},null,8,A),t[7]||(t[7]=(0,r.Lk)("span",{class:"cart-text"},"æœƒå“¡ç™»å…¥",-1))])),_:1},8,["onClick"]))])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])}a(4114);var _={name:"MainHeader",data(){return{searchQuery:"",isNavOpen:window.innerWidth<992,navItems:[{path:"/",text:"é¦–é "},{path:"/MembersPage",text:"æœƒå“¡ä¸­å¿ƒ"},{path:"/ProductsList",text:"ç”¢å“åˆ—è¡¨"},{path:"/AboutUsPage",text:"é—œæ–¼æˆ‘å€‘"},{path:"/ContactUs",text:"è¯çµ¡æˆ‘å€‘"},{path:"/admin",text:"å¾Œå°"}]}},computed:{isLoggedIn(){return this.$store.state.auth.isLoggedIn},userName(){return this.$store.state.auth.user?this.$store.state.auth.user.name:""}},methods:{handleSearch(){""!==this.searchQuery.trim()&&(this.$router.push({path:"/ProductsList",query:{search:this.searchQuery.trim()}}),this.closeNav())},toggleNav(){this.isNavOpen=!this.isNavOpen},closeNav(){window.innerWidth<992&&(this.isNavOpen=!1)},checkScreenSize(){window.innerWidth>=992?this.isNavOpen=!0:this.isNavOpen=!1},handleResize(){this.checkScreenSize()},logout(){this.$store.dispatch("auth/logout"),this.$router.push({path:"/"})}},mounted(){this.checkScreenSize(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},watch:{$route(){this.closeNav()}}},E=a(1241);const F=(0,E.A)(_,[["render",P],["__scopeId","data-v-5725d5aa"]]);var x=F;const S={class:"footer d-flex flex-column"};function O(e,t,a,s,i,o){return(0,r.uX)(),(0,r.CE)("div",S,t[0]||(t[0]=[(0,r.Lk)("div",{class:"flex-grow-1"},[(0,r.Lk)("p",null,[(0,r.eW)("å°ç£ECshop.comæœ‰é™å…¬å¸"),(0,r.Lk)("br"),(0,r.eW)(" çµ±ç·¨ 99999999"),(0,r.Lk)("br"),(0,r.eW)(" Copyright 2024, ECSHOP Group.")])],-1)]))}var U={name:"MainFooter"};const R=(0,E.A)(U,[["render",O],["__scopeId","data-v-7588858f"]]);var T=R;const D={class:"notifications-container"},M=["onClick"],$={class:"message"},N=["onClick"];function X(e,t,a,o,n,l){return(0,r.uX)(),(0,r.CE)("div",D,[(0,r.bF)(s.F,{name:"notification"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.notifications,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,i.C4)(["notification",`notification-${e.type}`]),onClick:t=>o.closeNotification(e.id)},[(0,r.Lk)("span",$,(0,i.v_)(e.message),1),(0,r.Lk)("button",{class:"close-btn",onClick:(0,s.D$)((t=>o.closeNotification(e.id)),["stop"])},"Ã—",8,N)],10,M)))),128))])),_:1})])}var q={name:"NotificationComponent",setup(){const e=(0,p.Pj)(),t=(0,r.EW)((()=>e.state.notifications.notifications));(0,r.sV)((()=>{e.dispatch("notifications/showNotification",{type:"warning",message:"æ­¡è¿ä¾†åˆ°å°é«˜çš„ç¶²ç«™ï¼ğŸ‘‹\n                æ„Ÿè¬æ‚¨çš„è’è‡¨èˆ‡æ”¯æŒ ğŸ™Œ\n\n                æé†’æ‚¨ï¼šç”±æ–¼æœ¬ç¶²ç«™æ¡ç”¨å…è²»ç‰ˆçš„é›²ç«¯æ¶æ§‹ï¼Œéƒ¨åˆ†åœ–ç‰‡å¯èƒ½éœ€è¦ç¨å¾®å¤šä¸€é»æ™‚é–“åŠ è¼‰ \n                (é–’ç½®ä¸€æ®µæ™‚é–“å¾Œå¯èƒ½æœƒéœ€è¦å…ˆ[å–šé†’]ä¸€ä¸‹)â³\n                æˆ‘å€‘æ­£åœ¨åŠªåŠ›å„ªåŒ–é«”é©—ï¼Œæ„Ÿè¬æ‚¨çš„è€å¿ƒç­‰å€™èˆ‡ç†è§£ï¼ğŸ™\n                å¸Œæœ›æ‚¨åœ¨é€™è£¡åº¦éæ„‰å¿«çš„æ™‚å…‰ï¼Œç¥æ‚¨ç€è¦½æ„‰å¿«ï¼ğŸ˜Š",timeout:0})}));const a=t=>{e.dispatch("notifications/removeNotification",t)};return{notifications:t,closeNotification:a}}};const V=(0,E.A)(q,[["render",X],["__scopeId","data-v-3c79d31b"]]);var W=V,B={name:"App",components:{MainHeader:x,MainFooter:T,NotificationComponent:W},setup(){const e=(0,p.Pj)(),t=(0,r.EW)((()=>e.getters["auth/isLoggedIn"])),a=(0,u.KR)(!1),s=()=>{a.value=!a.value};return{isLoggedIn:t,modalVisible:a,toggleModal:s}}};const K=(0,E.A)(B,[["render",d],["__scopeId","data-v-040f0953"]]);var J=K,Q=a(4233),j=(a(4188),a(323),a(3664)),z=a(8047),H=a(7592),G=a(8029),Z=a(5720),Y=(a(4300),a(5019));const ee=(0,s.Ef)(J);ee.config.globalProperties.$axios=Z.A,ee.config.globalProperties.$getImageUrl=Y.V,ee.use(H.A),ee.use(G.A),ee.use(Q.A),ee.use(z.Ay),ee.directive("tooltip",{mounted(e){new j.m_(e)},unmounted(e){const t=j.m_.getInstance(e);t&&t.dispose()}}),G.A.dispatch("auth/checkAuthStatus").then((()=>{ee.mount("#app")})).catch((e=>{ee.mount("#app")}))},7592:function(e,t,a){a.d(t,{A:function(){return pc}});var s=a(8029),r=a(1387),i=(a(9108),a(6768));function o(e,t,a,s,r,o){return t[0]||(t[0]=(0,i.Fv)('<h1 style="color:coral;" data-v-b5050256>é—œæ–¼æˆ‘å€‘</h1><br data-v-b5050256><br data-v-b5050256><div data-v-b5050256><div class="title" data-v-b5050256>å…¬å¸é¡˜æ™¯</div><div class="content" data-v-b5050256> ECSHOP é›»å•†å¹³å°è‡´åŠ›æ–¼æ‰“é€ ä¸€å€‹ä»¥æ¶ˆè²»è€…éœ€æ±‚ç‚ºæ ¸å¿ƒçš„å…¨çƒè³¼ç‰©å¹³å°ï¼Œé€šéå…ˆé€²çš„æŠ€è¡“ã€å„ªè³ªçš„ç”¢å“åŠå“è¶Šçš„æœå‹™ï¼Œæä¾›æ¯ä¸€ä½é¡§å®¢æœ€ä¾¿æ·ã€æ„‰å¿«çš„è³¼ç‰©é«”é©—ã€‚ æˆ‘å€‘ç›¸ä¿¡ï¼Œé€éå‰µæ–°å’Œç²¾ç¢ºçš„å¸‚å ´æ´å¯Ÿï¼Œèƒ½ç‚ºæ¶ˆè²»è€…å’Œåˆä½œå¤¥ä¼´å‰µé€ æ›´å¤šçš„åƒ¹å€¼ï¼Œä¸¦æ¨å‹•é›»å•†ç”¢æ¥­çš„é€²æ­¥ã€‚ æˆ‘å€‘çš„é¡˜æ™¯æ˜¯æˆç‚ºå…¨çƒæ¶ˆè²»è€…å¿ƒç›®ä¸­çš„é¦–é¸è³¼ç‰©å¹³å°ï¼Œç„¡è«–æ˜¯æ—¥å¸¸æ‰€éœ€é‚„æ˜¯é«˜ç«¯å•†å“ï¼ŒECSHOP éƒ½èƒ½å¤ æ»¿è¶³ä¸åŒå®¢æˆ¶çš„éœ€æ±‚ï¼Œä¸¦ä¸”å¯¦ç¾è·¨å¢ƒç„¡ç¸«éŠ·å”®çš„å…¨çƒé›»å•†é«”é©—ã€‚ </div><div class="title" data-v-b5050256>æœªä¾†å±•æœ›</div><div class="content" data-v-b5050256> ECSHOP å°‡æŒçºŒä¸æ–·åœ°å‰µé€ å„ªè³ªçš„ç”¢å“å’Œå„ªç§€çš„æœå‹™ï¼Œä¸¦æŒçºŒæ¨å‹•æ¶ˆè²»è€…éœ€æ±‚çš„è§£æ±ºæ–¹æ¡ˆï¼Œè®“æ¶ˆè²»è€…èƒ½æ›´è¼•é¬†åœ°åœ¨å…¨çƒè³¼ç‰©ã€‚ æˆ‘å€‘ä¹Ÿå°‡ä¸æ–·åœ°å­¸ç¿’å’Œé€²æ­¥ï¼Œä»¥æä¾›çµ¦æ¶ˆ&quot;&gt;æœªä¾†ï¼ŒECSHOP å°‡æŒçºŒæ‹“å±•ç”¢å“å“é¡ï¼Œä¸¦åŠ å¼·èˆ‡ä¸–ç•Œå„åœ°çš„å“ç‰Œå•†åŠä¾›æ‡‰å•†çš„åˆä½œï¼Œç‚ºæ¶ˆè²»è€…æä¾›æ›´è±å¯Œçš„é¸æ“‡ã€‚åŒæ™‚ï¼Œæˆ‘å€‘å°‡è‡´åŠ›æ–¼æ™ºèƒ½åŒ–æŠ€è¡“çš„æ‡‰ç”¨ï¼Œåˆ©ç”¨å¤§æ•¸æ“šåˆ†æã€äººå·¥æ™ºæ…§å’Œç‰©è¯ç¶²ç­‰å‰æ²¿æŠ€è¡“ï¼Œæå‡ç”¨æˆ¶é«”é©—ï¼Œå„ªåŒ–ç‰©æµé…é€æ•ˆç‡ï¼Œä¸¦å¯¦ç¾å€‹æ€§åŒ–æ¨è–¦å’Œç²¾æº–è¡ŒéŠ·ã€‚ æˆ‘å€‘ä¹Ÿå°‡ç©æ¥µæ¨å‹•ç’°ä¿å’Œå¯æŒçºŒç™¼å±•ï¼Œé€šéç¶ è‰²ç‰©æµã€æ¸›å°‘åŒ…è£æµªè²»ç­‰æªæ–½ï¼Œæ‰¿æ“”ä¼æ¥­ç¤¾æœƒè²¬ä»»ï¼Œç‚ºåœ°çƒçš„æœªä¾†åšå‡ºè²¢ç»ã€‚ å±•æœ›æœªä¾†ï¼ŒECSHOP å°‡ä¸æ–·å‰µæ–°ï¼Œæ¨å‹•æ•´å€‹è¡Œæ¥­çš„æ•¸ä½åŒ–è½‰å‹ï¼Œä¸¦ä¸”åŠªåŠ›å¯¦ç¾ã€Œæ¶ˆè²»è€…ã€åˆä½œå¤¥ä¼´èˆ‡ä¼æ¥­å…±è´ã€çš„ç›®æ¨™ã€‚æˆ‘å€‘æœŸå¾…èˆ‡æ‚¨æ”œæ‰‹ï¼Œå…±å‰µé›»å•†æ–°æ™‚ä»£çš„è¼ç…Œï¼</div></div>',4))}var n={name:"AboutUsPage"},l=a(1241);const c=(0,l.A)(n,[["render",o],["__scopeId","data-v-b5050256"]]);var d=c,u=a(4232),p=a(5130);const m={class:"cart-container container mt-5"},h={key:0,class:"text-center"},g={class:"table table-hover"},k=["src"],f=["onUpdate:modelValue","onInput"],b=["onClick"],v={class:"d-flex justify-content-between align-items-center mt-4"},L=["disabled"];function y(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",m,[t[5]||(t[5]=(0,i.Lk)("h2",{class:"text-center mb-4"},"æˆ‘çš„è³¼ç‰©è»Š",-1)),0===s.cartItems.length?((0,i.uX)(),(0,i.CE)("div",h,[t[3]||(t[3]=(0,i.Lk)("p",null,"è³¼ç‰©è»Šæ˜¯ç©ºçš„ã€‚",-1)),(0,i.bF)(n,{to:"/",class:"btn btn-primary"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("å»è³¼ç‰©")]))),_:1})])):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("table",g,[t[4]||(t[4]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{scope:"col"},"å•†å“åœ–ç‰‡"),(0,i.Lk)("th",{scope:"col"},"å•†å“åç¨±"),(0,i.Lk)("th",{scope:"col"},"å–®åƒ¹"),(0,i.Lk)("th",{scope:"col"},"æ•¸é‡"),(0,i.Lk)("th",{scope:"col"},"å°è¨ˆ"),(0,i.Lk)("th",{scope:"col"},"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.cartItems,((e,a)=>((0,i.uX)(),(0,i.CE)("tr",{key:`${e.id}-${a}`},[(0,i.Lk)("td",null,[(0,i.Lk)("img",{src:e.image,alt:"item.name",class:"product-image",onError:t[0]||(t[0]=(...e)=>s.imageError&&s.imageError(...e))},null,40,k)]),(0,i.Lk)("td",null,(0,u.v_)(e.name),1),(0,i.Lk)("td",null,(0,u.v_)(e.price)+"å…ƒ",1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{type:"number",class:"form-control quantity-input","onUpdate:modelValue":t=>e.quantity=t,onInput:t=>s.updateQuantity(a,e.quantity),min:"1"},null,40,f),[[p.Jo,e.quantity,void 0,{number:!0}]])]),(0,i.Lk)("td",null,(0,u.v_)(e.quantity*e.price)+"å…ƒ",1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn btn-danger",onClick:e=>s.removeItem(a)},"åˆªé™¤",8,b)])])))),128))])]),(0,i.Lk)("div",v,[(0,i.Lk)("h4",null,"ç¸½è¨ˆï¼š"+(0,u.v_)(s.cartTotal)+"å…ƒ",1),(0,i.Lk)("button",{class:"btn btn-success",disabled:0===s.cartItems.length,onClick:t[1]||(t[1]=(...e)=>s.checkout&&s.checkout(...e))},"çµå¸³",8,L)])],64))])}a(4114),a(1454);var w=a(782),C=a(4300),I={name:"ShopCart",setup(){const e=(0,w.Pj)(),t=(0,r.rd)(),a=(0,i.EW)((()=>e.state.cart.items)),s=(0,i.EW)((()=>e.getters["cart/cartTotal"])),o=(0,i.EW)((()=>e.state.auth&&e.state.auth.isLoggedIn)),n=(t,a)=>{(!Number.isInteger(a)||a<1)&&(a=1),e.dispatch("cart/updateItemQuantity",{index:t,quantity:a})},l=e=>{e.target.src="/img/wrong.png"},c=t=>{e.dispatch("cart/removeItemFromCart",t)},d=async()=>{if(!o.value)return e.dispatch("notifications/showNotification",{type:"warning",message:"è«‹å…ˆç™»å…¥ï¼",timeout:2e3}),void t.push({name:"UserLogin",query:{redirect:"/cart"}});const r=localStorage.getItem("authToken");if(!r)return e.dispatch("notifications/showNotification",{type:"error",message:"ç™»å…¥ç‹€æ…‹å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥ï¼",timeout:2e3}),void t.push({name:"UserLogin",query:{redirect:"/cart"}});if(0===a.value.length)return void e.dispatch("notifications/showNotification",{type:"warning",message:"è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œç„¡æ³•çµå¸³ï¼",timeout:2e3});const i={user_id:e.state.auth.user.id,items:a.value.map((e=>({product_id:e.id,quantity:e.quantity,price:e.price}))),total:s.value};try{const a=await C.A.orderAPI.createOrder(i);if(a.orderId){if(e.dispatch("cart/clearShoppingCart"),e.dispatch("notifications/showNotification",{type:"success",message:"orderå·²æˆåŠŸæäº¤ï¼",timeout:2e3}),window.WebSocket&&window.dashboardSocket)try{window.dashboardSocket.send(JSON.stringify({type:"newOrder",orderId:a.orderId,total:s.value,created_at:(new Date).toISOString()}))}catch(n){}t.push({name:"OrderConfirmation",params:{orderId:a.orderId}})}}catch(n){n.response&&403===n.response.status?(e.dispatch("notifications/showNotification",{type:"error",message:"æ¬Šé™ä¸è¶³æˆ–ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥ï¼",timeout:2e3}),t.push({name:"UserLogin",query:{redirect:"/cart"}})):e.dispatch("notifications/showNotification",{type:"error",message:"æäº¤è¨‚å–®å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ï¼",timeout:2e3})}};return{cartItems:a,cartTotal:s,updateQuantity:n,removeItem:c,checkout:d,imageError:l}}};const A=(0,l.A)(I,[["render",y],["__scopeId","data-v-6737bb0a"]]);var P=A;const _={class:"container"},E={class:"mainArea text-center"},F={class:"filter-container"},x={class:"col-lg-10 mx-auto"},S={class:"tag-container"},O=["onClick"],U={class:"search-bar mb-4"},R={class:"filter-section mb-4"},T={class:"price-filter"},D=["max"],M={class:"price-value"},$={key:0,class:"no-products"},N={class:"product-container mt-4"},X={class:"product-grid"};function q(e,t,a,s,r,o){const n=(0,i.g2)("ProductCard");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",_,[(0,i.Lk)("div",E,[t[4]||(t[4]=(0,i.Lk)("h2",{class:"mb-4 section-title"},"å•†å“åˆ—è¡¨",-1)),t[5]||(t[5]=(0,i.Lk)("h4",{class:"filter-title"},"ç¯©é¸æ¢ä»¶",-1)),(0,i.Lk)("div",F,[(0,i.Lk)("div",x,[t[2]||(t[2]=(0,i.Lk)("h4",{class:"filter-title"},"é¸æ“‡æ¨™ç±¤",-1)),(0,i.Lk)("div",S,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.availableTags,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>s.toggleTag(e),class:(0,u.C4)([{btn:!0,"btn-primary":s.selectedTags.includes(e),"btn-outline-primary":!s.selectedTags.includes(e)},"tag-btn"])},(0,u.v_)(e),11,O)))),128))])]),(0,i.Lk)("div",U,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.searchQuery=e),class:"form-control",placeholder:"è«‹è¼¸å…¥ä½ æƒ³æœå°‹çš„é—œéµå­—"},null,512),[[p.Jo,s.searchQuery]])]),(0,i.Lk)("div",R,[(0,i.Lk)("div",T,[t[3]||(t[3]=(0,i.Lk)("label",{class:"price-label"},"åƒ¹æ ¼å€é–“",-1)),(0,i.bo)((0,i.Lk)("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=e=>s.priceRange=e),min:"0",max:s.maxPrice,step:"500",class:"price-slider form-range"},null,8,D),[[p.Jo,s.priceRange]]),(0,i.Lk)("p",M,"ç¾åœ¨æœ€é«˜åƒ¹æ ¼ï¼š"+(0,u.v_)(s.priceRange)+"å…ƒ",1)])])])])]),0===s.filteredProducts.length?((0,i.uX)(),(0,i.CE)("div",$,t[6]||(t[6]=[(0,i.Lk)("p",{style:{"text-align":"center","font-size":"2rem",color:"red"}},"æš«ç„¡ç¬¦åˆæ¢ä»¶çš„å•†å“ï¼Œè«‹ä¿®æ”¹æŸ¥è©¢æ¢ä»¶ï¼",-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",N,[(0,i.Lk)("div",X,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filteredProducts,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"product-card-wrapper",key:e.id},[(0,i.bF)(n,{product:e,onAddToCart:s.addToCart},null,8,["product","onAddToCart"])])))),128))])])],64)}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(8992),a(4520),a(3949),a(7550);var V=a(144);const W={class:"product-card"},B=["src"],K=["title"],J={class:"card-text"},Q=["disabled"];function j(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",W,[(0,i.bF)(n,{to:{name:"ProductDetail",params:{id:s.productId}}},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:s.productImageUrl,class:"product-image",alt:"Product Image",onError:t[0]||(t[0]=(...e)=>s.imageError&&s.imageError(...e))},null,40,B),(0,i.Lk)("h3",{class:"product-name",title:a.product.name},(0,u.v_)(a.product.name),9,K),(0,i.Lk)("p",J,(0,u.v_)(s.formattedPrice)+" å…ƒ",1)])),_:1},8,["to"]),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>s.handleAddToCart&&s.handleAddToCart(...e)),disabled:s.isAdding},(0,u.v_)(s.isAdding?"æ·»åŠ ä¸­...":"åŠ å…¥è³¼ç‰©è»Š"),9,Q)])}var z=a(5019),H={name:"ProductCard",props:{product:{type:Object,required:!0,validator:function(e){const t=["id","name","price","image"],a=t.every((t=>t in e));return!!a&&("string"===typeof e.id||"number"===typeof e.id&&"string"===typeof e.name&&""!==e.name.trim()&&"number"===typeof e.price&&e.price>=0&&"string"===typeof e.image&&""!==e.image.trim())}}},setup(e,{emit:t}){const a=(0,V.KR)(!1),s=(0,V.KR)(!1),r=(0,i.EW)((()=>String(e.product.id).trim())),o=(0,i.EW)((()=>(0,z.V)(e.product.image,"product"))),n=(0,i.EW)((()=>{const t=parseFloat(e.product.price);return isNaN(t)?"0 å…ƒ":new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)})),l=()=>{a.value||(a.value=!0,t("add-to-cart",e.product),setTimeout((()=>{a.value=!1}),1e3))},c=e=>{s.value||(s.value=!0,e.target.src=(0,z.V)("","icon"))};return{isAdding:a,productId:r,productImageUrl:o,formattedPrice:n,handleAddToCart:l,imageError:c}}};const G=(0,l.A)(H,[["render",j],["__scopeId","data-v-7d48f48e"]]);var Z=G,Y={name:"ProductsList",components:{ProductCard:Z},setup(){const e=(0,V.KR)([]),t=(0,V.KR)(!1),a=(0,V.KR)(null),s=(0,i.EW)((()=>{if(!Array.isArray(e.value))return 1e6;const t=e.value.map((e=>Number(e.price)));return t.length?Math.max(...t):1e6})),o=(0,V.KR)(s.value),n=(0,V.KR)([]),l=(0,V.KR)([]),c=(0,w.Pj)(),d=(0,r.rd)(),u=(0,r.lq)(),p=(0,i.EW)((()=>c.state.auth.isLoggedIn)),m=(0,V.KR)(""),h=(0,i.EW)((()=>Array.isArray(e.value)?e.value.filter((e=>{const t=Number(e.price),a=e.name.toLowerCase().includes(m.value.toLowerCase()),s=t<=o.value,r=e.tags||[],i=0===l.value.length||l.value.some((e=>r.includes(e)));return a&&s&&i})):[])),g=async()=>{t.value=!0,a.value=null;try{const t=await C.A.productAPI.getAllProducts();Array.isArray(t)?e.value=t.map((e=>({...e,id:String(e.id).trim(),price:Number(e.price),tags:Array.isArray(e.tags)?e.tags:[],image:(0,z.V)(e.image,"product")}))):e.value=[],o.value=s.value;const a=new Set;e.value.forEach((e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach((e=>a.add(e)))})),n.value=Array.from(a)}catch(r){a.value="åŠ è¼‰ç”¢å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼"}finally{t.value=!1}},k=e=>{l.value.includes(e)?l.value=l.value.filter((t=>t!==e)):l.value.push(e)},f=e=>{if(p.value)c.dispatch("cart/addProductToCart",e),c.dispatch("notifications/showNotification",{type:"success",message:`å·²å°‡ ${e.name} åŠ å…¥è³¼ç‰©è»Š`,timeout:2e3});else{c.dispatch("notifications/showNotification",{type:"warning",message:"è«‹å…ˆç™»å…¥æœƒå“¡å†åŠ å…¥è³¼ç‰©è»Šï¼",timeout:2e3});const e=u.fullPath;d.push({name:"UserLogin",query:{redirect:e}})}};return(0,i.sV)((()=>{m.value=u.query.search||"",g().then((()=>{}))})),(0,i.wB)((()=>u.query.search),(e=>{m.value=e||""})),{products:e,maxPrice:s,priceRange:o,loading:t,error:a,isLoggedIn:p,filteredProducts:h,availableTags:n,selectedTags:l,searchQuery:m,toggleTag:k,addToCart:f,priceRange:o}}};const ee=(0,l.A)(Y,[["render",q],["__scopeId","data-v-a9845284"]]);var te=ee;const ae={class:"product-detail-page"},se={class:"container py-5"},re={"aria-label":"breadcrumb",class:"mb-4"},ie={class:"breadcrumb"},oe={class:"breadcrumb-item active","aria-current":"page"},ne={key:0,class:"product-detail"},le={class:"row g-4"},ce={class:"col-lg-6"},de={class:"sticky-top",style:{top:"2rem"}},ue={class:"image-container"},pe=["src","alt"],me={class:"thumbnail-container mt-3 d-flex gap-2"},he=["src","alt"],ge={class:"col-lg-6"},ke={class:"product-info-container"},fe={class:"product-header mb-4"},be={class:"product-name text-break mb-3"},ve={class:"product-meta d-flex align-items-center gap-3 mb-3"},Le={class:"product-sku text-muted"},ye={class:"product-price mb-0"},we={class:"product-description-section mb-4"},Ce={class:"product-description text-break"},Ie={class:"purchase-section"},Ae={class:"quantity-selector mb-4"},Pe={class:"input-group",style:{width:"150px"}},_e={class:"action-buttons d-grid gap-3"},Ee={class:"d-flex gap-2"},Fe={key:1,class:"loading"};function xe(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Lk)("div",se,[(0,i.Lk)("nav",re,[(0,i.Lk)("ol",ie,[t[7]||(t[7]=(0,i.Lk)("li",{class:"breadcrumb-item"},[(0,i.Lk)("a",{href:"/",class:"text-decoration-none"},"é¦–é ")],-1)),t[8]||(t[8]=(0,i.Lk)("li",{class:"breadcrumb-item"},[(0,i.Lk)("a",{href:"/products",class:"text-decoration-none"},"å•†å“åˆ—è¡¨")],-1)),(0,i.Lk)("li",oe,(0,u.v_)(s.product?.name||"å•†å“è©³æƒ…"),1)])]),s.product&&s.product.id?((0,i.uX)(),(0,i.CE)("div",ne,[(0,i.Lk)("div",le,[(0,i.Lk)("div",ce,[(0,i.Lk)("div",de,[(0,i.Lk)("div",ue,[(0,i.Lk)("img",{src:e.$getImageUrl(s.product.image,"product"),alt:s.product.name,class:"product-image",onError:t[0]||(t[0]=(...e)=>s.handleImageError&&s.handleImageError(...e))},null,40,pe)]),(0,i.Lk)("div",me,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,(a=>(0,i.Lk)("div",{key:a,class:"thumbnail-item"},[(0,i.Lk)("img",{src:e.$getImageUrl(s.product.image,"product"),alt:`${s.product.name} - é è¦½åœ– ${a}`,class:"thumbnail",onError:t[1]||(t[1]=(...e)=>s.handleImageError&&s.handleImageError(...e))},null,40,he)]))),64))])])]),(0,i.Lk)("div",ge,[(0,i.Lk)("div",ke,[(0,i.Lk)("div",fe,[(0,i.Lk)("h2",be,(0,u.v_)(s.product.name),1),(0,i.Lk)("div",ve,[(0,i.Lk)("span",Le,"å•†å“ç·¨è™Ÿ: #"+(0,u.v_)(s.product.id),1),t[9]||(t[9]=(0,i.Lk)("span",{class:"product-category text-muted"},"åˆ†é¡: ä¸€èˆ¬å•†å“",-1))]),(0,i.Lk)("h3",ye,"NT$ "+(0,u.v_)(s.product.price),1)]),(0,i.Lk)("div",we,[t[10]||(t[10]=(0,i.Lk)("h4",{class:"section-title mb-3"},"å•†å“æè¿°",-1)),(0,i.Lk)("p",Ce,(0,u.v_)(s.product.description),1)]),(0,i.Lk)("div",Ie,[(0,i.Lk)("div",Ae,[t[11]||(t[11]=(0,i.Lk)("label",{class:"form-label"},"æ•¸é‡",-1)),(0,i.Lk)("div",Pe,[(0,i.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=(...e)=>s.decreaseQuantity&&s.decreaseQuantity(...e))},"-"),(0,i.bo)((0,i.Lk)("input",{type:"number",class:"form-control text-center","onUpdate:modelValue":t[3]||(t[3]=e=>s.quantity=e),min:"1"},null,512),[[p.Jo,s.quantity]]),(0,i.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[4]||(t[4]=(...e)=>s.increaseQuantity&&s.increaseQuantity(...e))},"+")])]),(0,i.Lk)("div",_e,[(0,i.Lk)("button",{class:"btn btn-primary btn-lg",onClick:t[5]||(t[5]=(...e)=>s.addToCart&&s.addToCart(...e))},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-shopping-cart me-2"},null,-1),(0,i.eW)("åŠ å…¥è³¼ç‰©è»Š ")])),(0,i.Lk)("div",Ee,[(0,i.Lk)("button",{class:"btn btn-outline-secondary btn-lg flex-grow-1",onClick:t[6]||(t[6]=(...e)=>s.goBack&&s.goBack(...e))},t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,i.eW)("è¿”å›å•†å“åˆ—è¡¨ ")]))])])])])])])])):((0,i.uX)(),(0,i.CE)("div",Fe,t[14]||(t[14]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"æ­£åœ¨åŠ è¼‰...")],-1),(0,i.Lk)("p",null,"æ­£åœ¨åŠ è¼‰å•†å“ä¸­...",-1)])))])])}var Se={name:"ProductDetail",setup(){const e=(0,w.Pj)(),t=(0,r.lq)(),a=(0,r.rd)(),s=(0,V.KR)(!1),o=(0,V.KR)(null),n=(0,i.EW)((()=>t.params.id)),l=(0,i.EW)((()=>o.value&&o.value.image?o.value.image:"/img/wrong.png")),c=(0,i.EW)((()=>e.state.auth.isLoggedIn)),d=async()=>{if(!m(n.value))return notificationTypes("error","å•†å“æ ¼å¼ä¸æ­£ç¢ºï¼Œç„¡æ³•åŠ è¼‰å•†å“è©³æƒ…"),void a.go(-1);try{const e=await C.A.productAPI.getProductById(n.value);o.value={...e,image:(0,z.V)(e.image,"product")}}catch(e){notifiy("error","åŠ è¼‰å•†å“è©³æƒ…å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},u=e=>{s.value||(s.value=!0,e.target.src=(0,z.V)("","icon"))},p=()=>{c.value?(e.dispatch("cart/addProductToCart",o.value),h("success",`å·²å°‡${o.value.name}åŠ å…¥è³¼ç‰©è»Š`)):g()},m=e=>/^[1-9]\d*$/.test(e),h=(t,a)=>{e.dispatch("notifications/showNotification",{type:t,message:a})},g=()=>{a.push({name:"UserLogin",query:{redirect:t.fullPath}})},k=()=>a.go(-1),f=(0,V.KR)(1),b=()=>{f.value++},v=()=>{f.value>1&&f.value--};return(0,i.sV)(d),{addToCart:p,goBack:k,product:o,productId:n,productImageUrl:l,handleImageError:u,quantity:f,increaseQuantity:b,decreaseQuantity:v,getImageUrl:z.V}}};const Oe=(0,l.A)(Se,[["render",xe],["__scopeId","data-v-12b3aea6"]]);var Ue=Oe;const Re={class:"member-page"},Te={class:"container py-4"},De={class:"member-profile mb-4"},Me={class:"profile-header d-flex align-items-center"},$e={class:"avatar-circle me-3 position-relative"},Ne={class:"initials"},Xe={class:"profile-info"},qe={class:"member-data"},Ve={class:"button-group"},We={class:"content-tabs mb-4 main-content"},Be={class:"tab-content"},Ke={class:"tab-pane fade show active",id:"profile"},Je={class:"content-card"},Qe={class:"card-body"},je={class:"content-grid"},ze={class:"content-section"},He={class:"info-block"},Ge={class:"info-content"},Ze={class:"mb-0"},Ye={class:"info-block"},et={class:"info-content"},tt={class:"mb-0"},at={class:"content-section"},st={class:"info-block"},rt={class:"info-content"},it={class:"mb-0"},ot={class:"info-block"},nt={class:"info-content"},lt={class:"mb-0"},ct={class:"modal fade",ref:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},dt={class:"modal-dialog"},ut={class:"modal-content"},pt={class:"modal-body"},mt={class:"mb-3"},ht={class:"mb-3"},gt={class:"mb-3"},kt={class:"mb-3"},ft={class:"tab-pane fade",id:"addresses"},bt={class:"content-card"},vt={class:"card-body"},Lt={class:"d-flex justify-content-end mb-3"},yt={class:"address-list"},wt={class:"address-content"},Ct={class:"mb-2"},It={class:"mb-1"},At={class:"mb-0"},Pt={class:"address-actions"},_t=["onClick"],Et=["onClick"],Ft={class:"modal fade",ref:"recipientModal",tabindex:"-1"},xt={class:"modal-dialog"},St={class:"modal-content"},Ot={class:"modal-header"},Ut={class:"modal-title"},Rt={class:"modal-body"},Tt={class:"mb-3"},Dt={class:"mb-3"},Mt={class:"mb-3"},$t={type:"submit",class:"btn btn-primary"},Nt={class:"tab-pane fade",id:"orders"},Xt={class:"content-card"},qt={class:"card-body"},Vt={class:"order-list"},Wt=["onClick"],Bt={class:"order-id"},Kt={class:"order-date"},Jt={class:"order-amount"},Qt={key:0,class:"order-details"},jt=["src","alt"],zt={class:"product-info"},Ht={class:"mb-0"},Gt={class:"product-total"};function Zt(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",Re,[(0,i.Lk)("div",Te,[(0,i.Lk)("div",De,[(0,i.Lk)("div",Me,[(0,i.Lk)("div",$e,[(0,i.Lk)("span",Ne,(0,u.v_)(o.getUserInitials),1)]),(0,i.Lk)("div",Xe,[(0,i.Lk)("p",qe,"æœƒå“¡å¸³è™Ÿ ï¼š "+(0,u.v_)(r.userInfo.email),1),(0,i.Lk)("div",Ve,[(0,i.Lk)("button",{class:"btn btn-secondary me-2",onClick:t[0]||(t[0]=(...e)=>o.openEditModal&&o.openEditModal(...e))},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-edit me-2"},null,-1),(0,i.eW)(" ç·¨è¼¯å€‹äººè³‡æ–™ ")])),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-outline-danger",onClick:t[1]||(t[1]=(...e)=>o.handleLogout&&o.handleLogout(...e))},t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-sign-out-alt me-2"},null,-1),(0,i.eW)("ç™»å‡º ")]))])])])])]),(0,i.Lk)("div",We,[t[38]||(t[38]=(0,i.Lk)("ul",{class:"nav nav-pills mb-3",role:"tablist"},[(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link active","data-bs-toggle":"pill","data-bs-target":"#profile"},[(0,i.Lk)("i",{class:"fas fa-user me-2"}),(0,i.eW)("å€‹äººè³‡æ–™ ")])]),(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#addresses"},[(0,i.Lk)("i",{class:"fas fa-map-marker-alt me-2"}),(0,i.eW)("æ”¶ä»¶åœ°å€ ")])]),(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#orders"},[(0,i.Lk)("i",{class:"fas fa-shopping-bag me-2"}),(0,i.eW)("è¨‚å–®è¨˜éŒ„ ")])])],-1)),(0,i.Lk)("div",Be,[(0,i.Lk)("div",Ke,[(0,i.Lk)("div",Je,[(0,i.Lk)("div",Qe,[(0,i.Lk)("div",je,[(0,i.Lk)("div",ze,[(0,i.Lk)("div",He,[t[15]||(t[15]=(0,i.Lk)("div",{class:"info-icon bg-primary-soft"},[(0,i.Lk)("i",{class:"fas fa-user text-primary"})],-1)),(0,i.Lk)("div",Ge,[t[14]||(t[14]=(0,i.Lk)("label",null,"æœƒå“¡å§“å:",-1)),(0,i.Lk)("p",Ze,(0,u.v_)(r.userInfo.name),1)])]),(0,i.Lk)("div",Ye,[t[17]||(t[17]=(0,i.Lk)("div",{class:"info-icon bg-success-soft"},[(0,i.Lk)("i",{class:"fas fa-phone text-success"})],-1)),(0,i.Lk)("div",et,[t[16]||(t[16]=(0,i.Lk)("label",null,"è¯çµ¡é›»è©±:",-1)),(0,i.Lk)("p",tt,(0,u.v_)(r.userInfo.phone),1)])])]),t[22]||(t[22]=(0,i.Lk)("div",{class:"content-divider"},[(0,i.Lk)("div",{class:"vertical-divider"})],-1)),(0,i.Lk)("div",at,[(0,i.Lk)("div",st,[t[19]||(t[19]=(0,i.Lk)("div",{class:"info-icon bg-primary-soft"},[(0,i.Lk)("i",{class:"fas fa-envelope text-purple"})],-1)),(0,i.Lk)("div",rt,[t[18]||(t[18]=(0,i.Lk)("label",null,"é›»å­ä¿¡ç®±:",-1)),(0,i.Lk)("p",it,(0,u.v_)(r.userInfo.email),1)])]),(0,i.Lk)("div",ot,[t[21]||(t[21]=(0,i.Lk)("div",{class:"info-icon bg-warning-soft"},[(0,i.Lk)("i",{class:"fas fa-map-marker-alt text-warning"})],-1)),(0,i.Lk)("div",nt,[t[20]||(t[20]=(0,i.Lk)("label",null,"è¯çµ¡åœ°å€:",-1)),(0,i.Lk)("p",lt,(0,u.v_)(r.userInfo.address),1)])])])])])])]),(0,i.Lk)("div",ct,[(0,i.Lk)("div",dt,[(0,i.Lk)("div",ut,[t[28]||(t[28]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"ç·¨è¼¯æœƒå“¡è³‡æ–™"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",pt,[(0,i.Lk)("form",{onSubmit:t[6]||(t[6]=(0,p.D$)(((...e)=>o.saveUserInfo&&o.saveUserInfo(...e)),["prevent"]))},[(0,i.Lk)("div",mt,[t[23]||(t[23]=(0,i.Lk)("label",{for:"name"},"å§“å",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>r.editUserInfo.name=e)},null,512),[[p.Jo,r.editUserInfo.name]])]),(0,i.Lk)("div",ht,[t[24]||(t[24]=(0,i.Lk)("label",{for:"userEmail",class:"form-label"},"é›»å­éƒµä»¶",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",id:"userEmail","onUpdate:modelValue":t[3]||(t[3]=e=>r.editUserInfo.email=e),class:"form-control",required:""},null,512),[[p.Jo,r.editUserInfo.email]])]),(0,i.Lk)("div",gt,[t[25]||(t[25]=(0,i.Lk)("label",{for:"userPhone",class:"form-label"},"è¯çµ¡é›»è©±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"userPhone","onUpdate:modelValue":t[4]||(t[4]=e=>r.editUserInfo.phone=e),class:"form-control",required:""},null,512),[[p.Jo,r.editUserInfo.phone]])]),(0,i.Lk)("div",kt,[t[26]||(t[26]=(0,i.Lk)("label",{for:"userAddress",class:"form-label"},"è¯çµ¡åœ°å€",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"userAddress","onUpdate:modelValue":t[5]||(t[5]=e=>r.editUserInfo.address=e),class:"form-control",required:""},null,512),[[p.Jo,r.editUserInfo.address]])]),t[27]||(t[27]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},"ä¿å­˜è®Šæ›´",-1))],32)])])])],512),(0,i.Lk)("div",ft,[(0,i.Lk)("div",bt,[(0,i.Lk)("div",vt,[(0,i.Lk)("div",Lt,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>o.addRecipient&&o.addRecipient(...e))},t[29]||(t[29]=[(0,i.Lk)("i",{class:"fas fa-plus me-2"},null,-1),(0,i.eW)("æ–°å¢åœ°å€ ")]))]),(0,i.Lk)("div",yt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.recipients,((e,a)=>((0,i.uX)(),(0,i.CE)("div",{key:e.id||a,class:"address-item mb-3 p-3 rounded"},[(0,i.Lk)("div",wt,[(0,i.Lk)("h6",Ct,"æ”¶ä»¶äººå§“å ï¼š "+(0,u.v_)(e.name),1),(0,i.Lk)("p",It,[t[30]||(t[30]=(0,i.Lk)("i",{class:"fas fa-phone me-2 text-muted"},null,-1)),(0,i.eW)(" è¯çµ¡é›»è©± ï¼š "+(0,u.v_)(e.phone),1)]),(0,i.Lk)("p",At,[t[31]||(t[31]=(0,i.Lk)("i",{class:"fas fa-map-marker-alt me-2 text-muted"},null,-1)),(0,i.eW)(" æ”¶ä»¶åœ°å€ ï¼š "+(0,u.v_)(e.address),1)])]),(0,i.Lk)("div",Pt,[(0,i.Lk)("button",{class:"btn btn-link",onClick:e=>o.editRecipientInfo(a)},t[32]||(t[32]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,_t),(0,i.Lk)("button",{class:"btn btn-link text-danger",onClick:e=>o.deleteRecipient(a)},t[33]||(t[33]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Et)])])))),128))])])])]),(0,i.Lk)("div",Ft,[(0,i.Lk)("div",xt,[(0,i.Lk)("div",St,[(0,i.Lk)("div",Ot,[(0,i.Lk)("h5",Ut,(0,u.v_)(r.isEditing?"ç·¨è¼¯æ”¶ä»¶åœ°å€":"æ–°å¢æ”¶ä»¶åœ°å€"),1),t[34]||(t[34]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),(0,i.Lk)("div",Rt,[(0,i.Lk)("form",{onSubmit:t[11]||(t[11]=(0,p.D$)(((...e)=>o.saveRecipient&&o.saveRecipient(...e)),["prevent"]))},[(0,i.Lk)("div",Tt,[t[35]||(t[35]=(0,i.Lk)("label",{class:"form-label"},"æ”¶ä»¶äººå§“å",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>r.editRecipient.name=e),required:""},null,512),[[p.Jo,r.editRecipient.name]])]),(0,i.Lk)("div",Dt,[t[36]||(t[36]=(0,i.Lk)("label",{class:"form-label"},"è¯çµ¡é›»è©±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>r.editRecipient.phone=e),required:""},null,512),[[p.Jo,r.editRecipient.phone]])]),(0,i.Lk)("div",Mt,[t[37]||(t[37]=(0,i.Lk)("label",{class:"form-label"},"æ”¶ä»¶åœ°å€",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>r.editRecipient.address=e),required:""},null,512),[[p.Jo,r.editRecipient.address]])]),(0,i.Lk)("button",$t,(0,u.v_)(r.isEditing?"æ›´æ–°åœ°å€":"æ–°å¢åœ°å€"),1)],32)])])])],512),(0,i.Lk)("div",Nt,[(0,i.Lk)("div",Xt,[(0,i.Lk)("div",qt,[(0,i.Lk)("div",Vt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.orders,((t,a)=>((0,i.uX)(),(0,i.CE)("div",{key:t.id,class:"order-item"},[(0,i.Lk)("div",{class:"order-header",onClick:e=>o.toggleOrderDetails(a)},[(0,i.Lk)("div",null,[(0,i.Lk)("span",Bt,"#"+(0,u.v_)(t.id),1),(0,i.Lk)("span",Kt,(0,u.v_)(e.formateOrderDate(t.created_at)),1)]),(0,i.Lk)("div",null,[(0,i.Lk)("span",Jt,"NT$ "+(0,u.v_)(Math.round(t.total).toLocaleString()),1),(0,i.Lk)("i",{class:(0,u.C4)(["fas",r.expandedOrder===a?"fa-chevron-up":"fa-chevron-down","ms-2"])},null,2)])],8,Wt),r.expandedOrder===a?((0,i.uX)(),(0,i.CE)("div",Qt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.items,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"order-product"},[(0,i.Lk)("img",{src:e.product_image?`/img/products/${e.product_image}`:"/img/welcome.jpg",alt:e.name,class:"product-img"},null,8,jt),(0,i.Lk)("div",zt,[(0,i.Lk)("h6",null,(0,u.v_)(e.name),1),(0,i.Lk)("p",Ht," æ•¸é‡ï¼š"+(0,u.v_)(e.quantity)+" Ã— NT$ "+(0,u.v_)(e.price),1)]),(0,i.Lk)("div",Gt," NT$ "+(0,u.v_)((e.quantity*e.price).toLocaleString()),1)])))),128))])):(0,i.Q3)("",!0)])))),128))])])])])])])])])}a(3215);var Yt=a(3664);function ea(e,t="æ“ä½œå¤±æ•—",a={}){const{showDetailedError:s=!1,customHandler:r=null}=a;if(e.response){const{status:a,data:s}=e.response,i=s?.message||e.message||t;if("function"===typeof r)return r(e);switch(a){case 401:alert("æœªæˆæ¬Šï¼šè«‹é‡æ–°ç™»å…¥");break;case 404:alert("è³‡æºæœªæ‰¾åˆ°ï¼š"+i);break;case 500:alert("ä¼ºæœå™¨éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦");break;default:alert(i)}}else e.request?alert("ç„¡æ³•é€£æ¥åˆ°ä¼ºæœå™¨ï¼Œè«‹æª¢æŸ¥ç¶²çµ¡"):alert(t)}const{userAPI:ta,recipientAPI:aa}=C.A;var sa={name:"MemberPage",data(){return{showRecipient:!1,expandedOrder:null,isEditing:!1,isLoadingRecipients:!1,recipients:[],editRecipient:{name:" ",phone:" ",address:" "},editingIndex:-1,userInfo:{id:null,name:" ",email:" ",phone:"",address:""},editUserInfo:{name:"",email:"",phone:"",address:""},orders:[]}},computed:{...(0,w.aH)("auth",{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user||{}}),filteredOrders(){return this.orders.map((e=>({...e,formattedDate:this.formatOrderDate(e.created_at)})))},getUserInitials(){return this.userInfo.name?this.userInfo.name.substring(0,2).toUpperCase():"??"}},async mounted(){try{if(!this.isLoggedIn)return alert("è«‹å…ˆç™»å…¥æœƒå“¡ï¼"),void this.$router.push("/UserLogin");const e=this.user.id;e?(this.loadUserInfo(e),this.loadOrders(),this.loadRecipients(e)):(alert("è«‹å…ˆç™»å…¥æœƒå“¡ï¼"),this.$router.push("/UserLogin"))}catch(e){ea(e,"åŠ è¼‰ç”¨æˆ¶ä¿¡æ¯å¤±æ•—ï¼Œè«‹é‡è©¦ã€‚")}},methods:{async loadUserInfo(e){try{const t=await C.A.userAPI.getUserInfo(e);t.success&&(this.userInfo=t.data)}catch(t){ea(t,"åŠ è¼‰ç”¨æˆ¶ä¿¡æ¯å¤±æ•—ï¼Œè«‹é‡è©¦ã€‚")}},async loadOrders(){try{const e=await C.A.orderAPI.getOrders();e.success&&(this.orders=e)}catch(e){}},async loadRecipients(e){if(e)try{this.isLoadingRecipients=!0;const t=await C.A.recipientAPI.getRecipients(e);this.recipients=Array.isArray(t.data)?t.data:[]}catch(t){ea(t,"è¼‰å…¥æ”¶ä»¶äººè³‡æ–™å¤±æ•—"),this.recipients=[]}finally{this.isLoadingRecipients=!1}},isRecipientValid(e){const t=/^[0-9]{10}$/;return e.name.trim()&&t.test(e.phone)&&e.address.trim()},async saveRecipient(){if(this.isRecipientValid(this.editRecipient))try{let e;this.isEditing?(e=await C.A.recipientAPI.updateRecipient(this.editRecipient.id,this.editRecipient),e.success&&(this.recipients[this.editingIndex]=e.data)):(e=await C.A.recipientAPI.addRecipient({...this.editRecipient,user_id:this.user.id}),e.success&&this.recipients.push(e.data)),this.hideModal(),alert(this.isEditing?"æ”¶ä»¶äººè³‡æ–™å·²æ›´æ–°":"æ–°å¢æ”¶ä»¶äººæˆåŠŸ"),await this.loadRecipients(this.user.id)}catch(e){ea(e,this.isEditing?"æ›´æ–°æ”¶ä»¶äººå¤±æ•—":"æ–°å¢æ”¶ä»¶äººå¤±æ•—")}else alert("è«‹æª¢æŸ¥æ”¶ä»¶äººè³‡æ–™æ˜¯å¦å®Œæ•´ä¸”æ ¼å¼æ­£ç¢ºï¼")},async deleteRecipient(e){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤æ”¶ä»¶äººè³‡æ–™ï¼Ÿ"))try{const t=this.recipients[e].id,a=await C.A.recipientAPI.deleteRecipient(t);a.success&&(this.recipients.splice(e,1),alert("æ”¶ä»¶äººè³‡æ–™å·²åˆªé™¤"))}catch(t){ea(t,"åˆªé™¤æ”¶ä»¶äººæ•—")}},toggleRecipient(){this.showRecipient=!this.showRecipient},addRecipient(){this.isEditing=!1,this.editRecipient={name:"",phone:"",address:""},this.showModal()},editRecipientInfo(e){this.isEditing=!0,this.editingIndex=e,this.editRecipient={...this.recipients[e]},this.showModal()},toggleOrderDetails(e){const t=this.orders[e];if(!t.items||!t.items.length)return void alert("è©²è¨‚å–®ç„¡æ³•é¡¯ç¤ºç´°ç¯€ï¼");const a=e=>e.product_name&&e.quantity>0&&e.price>=0;t.items.every(a)?this.expandedOrder=this.expandedOrder===e?null:e:alert("è©²è¨‚å–®æ•¸æ“šä¸å®Œæ•´ï¼Œç„¡æ³•å±•é–‹ï¼")},showModal(){if(this.$refs.recipientModal){const e=new Yt.aF(this.$refs.recipientModal);e.show()}},hideModal(){const e=Yt.aF.getInstance(this.$refs.recipientModal);e&&e.hide()},...(0,w.i0)("auth",["logout"]),async handleLogout(){await this.logout(),alert("å·²æˆåŠŸç™»å‡º!"),this.$router.push("/UserLogin")},formatOrderDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},getOrderStatusClass(e){const t={pending:"badge bg-warning text-dark",processing:"badge bg-info text-white",shipped:"badge bg-primary text-white",completed:"badge bg-success text-white",cancelled:"badge bg-danger text-white"};return t[e]||"badge bg-secondary"},getOrderStatusText(e){const t={pending:"è™•ç†ä¸­",processing:"è™•ç†ä¸­",shipped:"å·²å‡ºè²¨",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"};return t[e]||"æœªçŸ¥ç‹€æ…‹"},openEditModal(){this.editUserInfo={...this.userInfo};const e=new Yt.aF(this.$refs.editModal);this.$refs.editModal.removeAttribute("aria-hidden"),e.show()},async saveUserInfo(){try{const e=this.user.id,t=await C.A.userAPI.updateUser(e,this.editUserInfo);t.success&&(this.userInfo=t.data,this.hideEditModal(),alert("å€‹äººè³‡æ–™å·²æ›´æ–°"))}catch(e){ea(e,"æ›´æ–°å€‹äººè³‡æ–™å¤±æ•—"),alert("æ›´æ–°æœƒå“¡è³‡æ–™å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")}},hideEditModal(){const e=Yt.aF.getInstance(this.$refs.editModal);e&&e.hide()}}};const ra=(0,l.A)(sa,[["render",Zt],["__scopeId","data-v-7b915641"]]);var ia=ra;const oa={class:"contact-container contact"},na={class:"contact-form"},la={class:"mb-3"},ca={class:"mb-3"},da={class:"mb-3"},ua={class:"mb-3"};function pa(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[11]||(t[11]=(0,i.Fv)('<div class="faq-search" data-v-876a9734><input type="text" class="form-control" id="faqSearch" placeholder="æœå°‹å•é¡Œ..." data-v-876a9734></div><div class="accordion" id="faqAccordion" data-v-876a9734><div class="accordion-item faq-item" data-v-876a9734><h2 class="accordion-header" id="headingOne" data-v-876a9734><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" data-v-876a9734> å•é¡Œä¸€ï¼šå¦‚ä½•è¨»å†Šï¼Ÿ </button></h2><div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion" data-v-876a9734><div class="accordion-body" data-v-876a9734> æ‚¨å¯ä»¥é»æ“Šå³ä¸Šè§’çš„ã€Œè¨»å†Šã€æŒ‰éˆ•ï¼Œä¸¦æŒ‰ç…§æç¤ºå¡«å¯«ç›¸é—œè³‡è¨Šä¾†å®Œæˆè¨»å†Šã€‚ </div></div></div><div class="accordion-item faq-item" data-v-876a9734><h2 class="accordion-header" id="headingTwo" data-v-876a9734><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" data-v-876a9734> å•é¡ŒäºŒï¼šå¿˜è¨˜å¯†ç¢¼æ€éº¼è¾¦ï¼Ÿ </button></h2><div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion" data-v-876a9734><div class="accordion-body" data-v-876a9734> æ‚¨å¯ä»¥é»æ“Šã€Œå¿˜è¨˜å¯†ç¢¼ã€é€£çµï¼Œè¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶ï¼Œç³»çµ±å°‡ç™¼é€å¯†ç¢¼é‡ç½®çš„æŒ‡å¼•çµ¦æ‚¨ã€‚ </div></div></div></div>',2)),(0,i.Lk)("div",oa,[t[10]||(t[10]=(0,i.Lk)("div",{class:"contact-info"},[(0,i.Lk)("h4",null,"æˆ–è€…é€éä»¥ä¸‹è¡¨æ ¼è¯çµ¡")],-1)),(0,i.Lk)("div",na,[(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,p.D$)(((...e)=>o.submitMessage&&o.submitMessage(...e)),["prevent"]))},[(0,i.Lk)("div",la,[t[5]||(t[5]=(0,i.Lk)("label",{for:"name",class:"form-label"},"å§“å",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.formData.name=e),class:"form-control",id:"name",placeholder:"è«‹è¼¸å…¥æ‚¨çš„å§“å"},null,512),[[p.Jo,r.formData.name]])]),(0,i.Lk)("div",ca,[t[6]||(t[6]=(0,i.Lk)("label",{for:"phone",class:"form-label"},"è¯çµ¡é›»è©±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"phone","onUpdate:modelValue":t[1]||(t[1]=e=>r.formData.phone=e),class:"form-control",id:"phone",placeholder:"è«‹è¼¸å…¥æ‚¨çš„è¯çµ¡é›»è©±"},null,512),[[p.Jo,r.formData.phone]])]),(0,i.Lk)("div",da,[t[7]||(t[7]=(0,i.Lk)("label",{for:"email",class:"form-label"},"é›»å­éƒµä»¶",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.email=e),class:"form-control",id:"email",placeholder:"è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶"},null,512),[[p.Jo,r.formData.email]])]),(0,i.Lk)("div",ua,[t[8]||(t[8]=(0,i.Lk)("label",{for:"message",class:"form-label"},"ç•™è¨€",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.formData.message=e),class:"form-control",id:"message",rows:"4",placeholder:"è«‹è¼¸å…¥æ‚¨çš„è¨Šæ¯"},null,512),[[p.Jo,r.formData.message]])]),t[9]||(t[9]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},"é€å‡ºç•™è¨€",-1))],32)])])],64)}var ma={name:"ContactUs",data(){return{formData:{name:"",phone:"",email:"",message:""}}},mounted(){const e=document.getElementById("faqSearch");e&&e.addEventListener("input",(function(){const t=e.value.toLowerCase();document.querySelectorAll(".faq-item").forEach((function(e){const a=e.querySelector("according-button").innerText.toLowerCase(),s=e.querySelector(".according-body").innerText.toLowerCase();a.includes(t)||s.includes(t)?e.style.display="block":e.style.display="none"}))}))},methods:{async submitMessage(){try{await C.A.messageAPI.createMessage(this.formData),this.$notify.success("è¨Šæ¯å·²æˆåŠŸé€å‡ºï¼Œæˆ‘å€‘æœƒç›¡å¿«å›è¦†æ‚¨"),setTimeout((()=>{this.$router.push("/")}),2e3)}catch(e){this.$notify.error("è¨Šæ¯é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}}}};const ha=(0,l.A)(ma,[["render",pa],["__scopeId","data-v-876a9734"]]);var ga=ha;function ka(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",null,[t[0]||(t[0]=(0,i.Lk)("h1",null,"æœå°‹çµæœ",-1)),(0,i.Lk)("p",null,"æœå°‹é—œéµå­—ï¼š"+(0,u.v_)(o.searchQuery),1)])}var fa={name:"SearchResults",computed:{searchQuery(){return this.$route.query.q||"æœªæŒ‡å®š"}}};const ba=(0,l.A)(fa,[["render",ka]]);var va=ba;const La={class:"register-page"},ya={class:"register-container container"},wa={class:"auth-card"},Ca={class:"row g-3"},Ia={class:"col-12"},Aa={class:"form-floating"},Pa={class:"col-12"},_a={class:"form-floating"},Ea={class:"col-12"},Fa={class:"form-floating"},xa={class:"col-12"},Sa={class:"form-floating"},Oa={class:"col-12"},Ua={class:"form-floating password-wrapper"},Ra=["type"],Ta={class:"col-12"},Da={class:"form-floating"},Ma={key:0,class:"alert alert-danger mt-3"},$a={class:"mb-0"},Na={class:"text-center mt-3"},Xa={class:"mb-0"};function qa(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",La,[(0,i.Lk)("div",ya,[(0,i.Lk)("div",wa,[t[17]||(t[17]=(0,i.Lk)("div",{class:"auth-header text-center mb-4"},[(0,i.Lk)("h2",{class:"fw-bold text-primary"},"æœƒå“¡è¨»å†Š"),(0,i.Lk)("p",{class:"text-muted"},"å‰µå»ºæ‚¨çš„å¸³è™Ÿï¼Œé–‹å§‹è³¼ç‰©ä¹‹æ—…")],-1)),(0,i.Lk)("form",{onSubmit:t[7]||(t[7]=(0,p.D$)(((...e)=>o.handleRegister&&o.handleRegister(...e)),["prevent"])),class:"auth-form"},[(0,i.Lk)("div",Ca,[(0,i.Lk)("div",Ia,[(0,i.Lk)("div",Aa,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),placeholder:"è«‹è¼¸å…¥å§“å",required:""},null,512),[[p.Jo,r.username]]),t[8]||(t[8]=(0,i.Lk)("label",{for:"username"},"æœƒå“¡å§“å",-1))])]),(0,i.Lk)("div",Pa,[(0,i.Lk)("div",_a,[(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>r.email=e),placeholder:"è«‹è¼¸å…¥é›»å­ä¿¡ç®±",required:""},null,512),[[p.Jo,r.email]]),t[9]||(t[9]=(0,i.Lk)("label",{for:"email"},"é›»å­éƒµä»¶",-1))])]),(0,i.Lk)("div",Ea,[(0,i.Lk)("div",Fa,[(0,i.bo)((0,i.Lk)("input",{type:"tel",class:"form-control",id:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>r.phone=e),placeholder:"è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼",required:""},null,512),[[p.Jo,r.phone]]),t[10]||(t[10]=(0,i.Lk)("label",{for:"phone"},"æ‰‹æ©Ÿè™Ÿç¢¼",-1))])]),(0,i.Lk)("div",xa,[(0,i.Lk)("div",Sa,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[3]||(t[3]=e=>r.address=e),placeholder:"è«‹è¼¸å…¥æ”¶ä»¶åœ°å€",required:""},null,512),[[p.Jo,r.address]]),t[11]||(t[11]=(0,i.Lk)("label",{for:"address"},"æ”¶ä»¶åœ°å€",-1))])]),(0,i.Lk)("div",Oa,[(0,i.Lk)("div",Ua,[(0,i.bo)((0,i.Lk)("input",{type:r.showPassword?"text":"password",class:"form-control",id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>r.password=e),placeholder:"è«‹è¨­å®šå¯†ç¢¼",required:""},null,8,Ra),[[p.hp,r.password]]),t[12]||(t[12]=(0,i.Lk)("label",{for:"password"},"å¯†ç¢¼",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-link password-toggle",onClick:t[5]||(t[5]=e=>r.showPassword=!r.showPassword)},[(0,i.Lk)("i",{class:(0,u.C4)(r.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),(0,i.Lk)("div",Ta,[(0,i.Lk)("div",Da,[(0,i.bo)((0,i.Lk)("input",{type:"password",class:"form-control",id:"confirmpassword","onUpdate:modelValue":t[6]||(t[6]=e=>r.confirmpassword=e),placeholder:"è«‹å†æ¬¡è¼¸å…¥å¯†ç¢¼",required:""},null,512),[[p.Jo,r.confirmpassword]]),t[13]||(t[13]=(0,i.Lk)("label",{for:"confirmpassword"},"ç¢ºèªå¯†ç¢¼",-1))])])]),r.formErrors.length?((0,i.uX)(),(0,i.CE)("div",Ma,[(0,i.Lk)("ul",$a,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.formErrors,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e},(0,u.v_)(e),1)))),128))])])):(0,i.Q3)("",!0),t[16]||(t[16]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary w-100 mt-4"},[(0,i.Lk)("i",{class:"fas fa-user-plus me-2"}),(0,i.eW)("è¨»å†Š ")],-1)),(0,i.Lk)("div",Na,[(0,i.Lk)("p",Xa,[t[15]||(t[15]=(0,i.eW)("å·²ç¶“æœ‰å¸³è™Ÿï¼Ÿ ")),(0,i.bF)(n,{to:"/UserLogin",class:"text-primary text-decoration-none"},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)(" ç«‹å³ç™»å…¥ ")]))),_:1})])])],32)])])])}var Va={name:"UserRegister",data(){return{username:"",phone:"",address:"",email:"",password:"",confirmpassword:"",formErrors:[],showPassword:!1}},methods:{async handleRegister(){try{this.formErrors=[];const e=this.validateForm();if(e.length>0)return void(this.formErrors=e);const t=await C.A.userAPI.register({name:this.sanitizeInput(this.username),phone:this.sanitizeInput(this.phone),address:this.sanitizeInput(this.address),email:this.sanitizeInput(this.email.trim().toLowerCase()),password:this.sanitizeInput(this.password),role:"user"});t.success&&(alert("è¨»å†ŠæˆåŠŸ"),this.$router.push("/UserLogin"))}catch(e){ea(e,"è¨»å†Šå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}},validateForm(){const e=[];return this.username.trim()?this.username.length<2&&e.push("æœƒå“¡å§“åè‡³å°‘éœ€è¦2å€‹å­—å…ƒ"):e.push("è«‹è¼¸å…¥æœƒå“¡å§“å"),this.validatePhoneNumber(this.phone)||e.push("è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼æ ¼å¼ï¼ˆ10ä½æ•¸å­—ï¼‰"),this.address.trim()?this.address.length<8&&e.push("åœ°å€éœ€è¦æ›´è©³ç´°"):e.push("è«‹è¼¸å…¥åœ°å€"),this.validateEmail(this.email)||e.push("è«‹è¼¸å…¥æ­£ç¢ºçš„é›»å­éƒµä»¶æ ¼å¼"),this.password?this.password.length<6?e.push("å¯†ç¢¼é•·ï¿½ï¿½éœ€è‡³å°‘ç‚º6å€‹å­—å…ƒ"):/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/.test(this.password)||e.push("å¯†ç¢¼éœ€åŒ…å«è‡³å°‘ä¸€å€‹å­—æ¯å’Œä¸€å€‹æ•¸å­—"):e.push("è«‹è¨­å®šå¯†ç¢¼"),this.password!==this.confirmpassword&&e.push("å…©æ¬¡å¯†ç¢¼ä¸ç›¸ç¬¦"),e},validatePhoneNumber(e){const t=/^09\d{8}$/;return t.test(e)},validateEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},sanitizeInput(e){return"string"!==typeof e?"":e.trim().replace(/<[^>]*>/g,"").replace(/[<>]/g,"")}}};const Wa=(0,l.A)(Va,[["render",qa],["__scopeId","data-v-6cb7400b"]]);var Ba=Wa;const Ka={class:"login-page"},Ja={class:"login-container container"},Qa={class:"auth-card"},ja={class:"form-floating mb-3"},za={class:"form-floating mb-3"},Ha=["type"],Ga={class:"d-flex justify-content-between align-items-center mb-4"},Za={class:"text-center"},Ya={class:"mb-0"};function es(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Ka,[(0,i.Lk)("div",Ja,[(0,i.Lk)("div",Qa,[t[11]||(t[11]=(0,i.Lk)("div",{class:"auth-header text-center mb-4"},[(0,i.Lk)("h2",{class:"fw-bold text-primary"},"æœƒå“¡ç™»å…¥"),(0,i.Lk)("p",{class:"text-muted"},"æ­¡è¿å›ä¾†ï¼Œè«‹ç™»å…¥æ‚¨çš„å¸³è™Ÿ")],-1)),(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,p.D$)(((...e)=>o.handleLogin&&o.handleLogin(...e)),["prevent"])),class:"auth-form"},[(0,i.Lk)("div",ja,[(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),class:"form-control",placeholder:"è«‹è¼¸å…¥é›»å­éƒµä»¶",required:""},null,512),[[p.Jo,r.email]]),t[4]||(t[4]=(0,i.Lk)("label",{for:"email"},"é›»å­éƒµä»¶",-1))]),(0,i.Lk)("div",za,[(0,i.bo)((0,i.Lk)("input",{type:r.showPassword?"text":"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),class:"form-control",placeholder:"è«‹è¼¸å…¥å¯†ç¢¼",required:""},null,8,Ha),[[p.hp,r.password]]),t[5]||(t[5]=(0,i.Lk)("label",{for:"password"},"å¯†ç¢¼",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-link password-toggle",onClick:t[2]||(t[2]=e=>r.showPassword=!r.showPassword)},[(0,i.Lk)("i",{class:(0,u.C4)(r.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),(0,i.Lk)("div",Ga,[t[7]||(t[7]=(0,i.Lk)("div",{class:"form-check"},[(0,i.Lk)("input",{type:"checkbox",class:"form-check-input",id:"remember"}),(0,i.Lk)("label",{class:"form-check-label",for:"remember"},"è¨˜ä½æˆ‘")],-1)),(0,i.bF)(n,{to:"/ForgotPwd",class:"text-primary text-decoration-none"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.eW)(" å¿˜è¨˜å¯†ç¢¼ï¼Ÿ ")]))),_:1})]),t[10]||(t[10]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary w-100 mb-3"},[(0,i.Lk)("i",{class:"fas fa-sign-in-alt me-2"}),(0,i.eW)("ç™»å…¥ ")],-1)),(0,i.Lk)("div",Za,[(0,i.Lk)("p",Ya,[t[9]||(t[9]=(0,i.eW)("é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ ")),(0,i.bF)(n,{to:"/UserRegister",class:"text-primary text-decoration-none"},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.eW)(" ç«‹å³è¨»å†Š ")]))),_:1})])])],32)])])])}var ts={name:"UserLogin",data(){return{email:"",password:"",showPassword:!1}},methods:{...(0,w.i0)("auth",["login"]),async handleLogin(){try{const e=await this.login({email:this.email.trim().toLowerCase(),password:this.password});if(!e||!e.data)throw new Error("ç„¡æ³•å–å¾—ç”¨æˆ¶è³‡æ–™æˆ– token");const t=e.data;if(!t)throw new Error("ç„¡æ³•å–å¾—ç”¨æˆ¶è³‡æ–™");alert("ç™»å…¥æˆåŠŸ!æ­¡è¿"+t.name);const a=this.$route.query.redirect||"";"admin"===t.role.toLowerCase()?this.$router.push("string"===typeof a&&a.startsWith("/admin")?a:"/admin"):this.$router.push("string"!==typeof a||a.startsWith("/admin")?"/MembersPage":a)}catch(e){ea(e,"ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦")}}}};const as=(0,l.A)(ts,[["render",es],["__scopeId","data-v-55e4e2b8"]]);var ss=as;const rs={class:"container"},is={class:"mb-3"};function os(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",rs,[t[4]||(t[4]=(0,i.Lk)("h5",null,"å¿˜è¨˜å¯†ç¢¼",-1)),(0,i.Lk)("form",{onSubmit:t[1]||(t[1]=(0,p.D$)(((...e)=>o.handleForgotPassword&&o.handleForgotPassword(...e)),["prevent"]))},[(0,i.Lk)("div",is,[t[2]||(t[2]=(0,i.Lk)("label",{for:"email",class:"form-label"},"é›»å­éƒµä»¶",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),class:"form-control",id:"email",required:""},null,512),[[p.Jo,r.email]])]),t[3]||(t[3]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},"ç™¼é€é‡è¨­å¯†ç¢¼é€£çµä¿¡",-1))],32)])}var ns=a(4373),ls={name:"ForgotPwd",data(){return{email:"",newPassword:""}},methods:{async handleForgotPassword(){try{const e=this.$route.params.token;await ns.A.post(`/api/reset-password/${e}`,{newPassword:this.newPassword}),alert("å¯†ç¢¼å·²æˆåŠŸé‡æ–°è¨­ç½®ï¼"),this.$router.push("/login")}catch(e){alert("é‡è¨­å¯†ç¢¼å¤±æ•—")}}}};const cs=(0,l.A)(ls,[["render",os]]);var ds=cs;const us={class:"order-confirmation container mt-5"},ps={key:0,class:"text-center"},ms={key:1,class:"text-center"},hs={key:2};function gs(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",us,[t[3]||(t[3]=(0,i.Lk)("h2",{class:"text-center mb-4"},"è¨‚å–®ç¢ºèª",-1)),s.isLoading?((0,i.uX)(),(0,i.CE)("div",ps,t[0]||(t[0]=[(0,i.Lk)("p",null,"æ­£åœ¨åŠ è¼‰è¨‚å–®è©³æƒ…...",-1)]))):s.orderDetails?((0,i.uX)(),(0,i.CE)("div",hs,[(0,i.Lk)("p",null,"æ„Ÿè¬æ‚¨çš„è³¼è²·ï¼Œæ‚¨çš„è¨‚å–®ç·¨è™Ÿæ˜¯ï¼š"+(0,u.v_)(s.orderId),1),(0,i.bF)(n,{to:"/",class:"btn btn-primary mt-3"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("ç¹¼çºŒè³¼ç‰©ï¼")]))),_:1})])):((0,i.uX)(),(0,i.CE)("div",ms,t[1]||(t[1]=[(0,i.Lk)("p",null,"ç„¡æ³•åŠ è¼‰è¨‚å–®è©³æƒ…ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚",-1)])))])}var ks={name:"OrderConfirmation",setup(){const e=(0,r.lq)(),t=(0,w.Pj)(),a=(0,r.rd)(),s=e.params.orderId,o=(0,V.KR)(null),n=(0,V.KR)(!0),l=async()=>{n.value=!0;const e=/^[1-9]\d*$/.test(s);if(!e)return t.dispatch("notifications/showNotification",{type:"error",message:"è¨‚å–®ç·¨è™Ÿæ ¼å¼ä¸æ­£ç¢ºï¼Œç„¡æ³•åŠ è¼‰è¨‚å–®è©³æƒ…ã€‚"}),a.push("/").catch((e=>{e.name})),void(n.value=!1);try{const e=await C.A.orderAPI.getOrderById(s);if(!e||!e.id)return t.dispatch("notifications/showNotification",{type:"error",message:"è¨‚å–®è³‡æ–™ä¸å®Œæ•´ï¼Œè«‹è¯ç¹«å®¢æœã€‚"}),void(n.value=!1);o.value=e}catch(r){r.response&&404===r.response.status?t.dispatch("notifications/showNotification",{type:"error",message:"è¨‚å–®ä¸å­˜åœ¨ï¼Œè«‹ç¢ºèªæ‚¨çš„è¨‚å–®ç·¨è™Ÿã€‚"}):t.dispatch("notifications/showNotification",{type:"error",message:"åŠ è¼‰è¨‚å–®è©³æƒ…æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼"}),o.value=null}finally{n.value=!1}};return(0,i.sV)((()=>{s?l():a.push("/").catch((e=>{e.name}))})),{orderId:s,orderDetails:o,isLoading:n}}};const fs=(0,l.A)(ks,[["render",gs],["__scopeId","data-v-03bd47ad"]]);var bs=fs;const vs={class:"admin-dashboard container py-4"},Ls={class:"quick-actions mb-4"},ys={class:"row g-3"},ws={class:"col-md-3 col-sm-6"},Cs={class:"col-md-3 col-sm-6"},Is={class:"col-md-3 col-sm-6"},As={class:"col-md-3 col-sm-6"},Ps={class:"stats-overview mb-4"},_s={class:"row g-3"},Es={class:"col-md-3 col-sm-6"},Fs={class:"stat-card"},xs={class:"stat-info"},Ss={class:"col-md-3 col-sm-6"},Os={class:"stat-card"},Us={class:"stat-info"},Rs={class:"col-md-3 col-sm-6"},Ts={class:"stat-card"},Ds={class:"stat-info"},Ms={class:"col-md-3 col-sm-6"},$s={class:"stat-card"},Ns={class:"stat-info"},Xs={class:"card shadow-sm mb-4"},qs={class:"card-body"},Vs={class:"chart-container"},Ws={ref:"salesChart"},Bs={class:"row g-4 mb-4"},Ks={class:"col-md-6"},Js={class:"card shadow-sm h-100"},Qs={class:"card-body"},js={class:"comparison-item"},zs={class:"d-flex justify-content-between mb-2"},Hs={class:"fw-bold"},Gs={class:"d-flex justify-content-between mb-2"},Zs={class:"fw-bold"},Ys={class:"d-flex justify-content-between"},er={class:"fw-bold"},tr={class:"col-md-6"},ar={class:"card shadow-sm h-100"},sr={class:"card-body"},rr={class:"comparison-item"},ir={class:"d-flex justify-content-between mb-2"},or={class:"fw-bold"},nr={class:"d-flex justify-content-between"},lr={class:"fw-bold"};function cr(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",vs,[t[20]||(t[20]=(0,i.Lk)("div",{class:"dashboard-header mb-4"},[(0,i.Lk)("h2",{class:"fw-bold text-primary"},"ç®¡ç†å¾Œå°å„€è¡¨æ¿"),(0,i.Lk)("p",{class:"text-muted"},"æŸ¥çœ‹ç¶²ç«™ç‡Ÿé‹æ¦‚æ³èˆ‡é‡è¦æ•¸æ“š")],-1)),(0,i.Lk)("div",Ls,[(0,i.Lk)("div",ys,[(0,i.Lk)("div",ws,[(0,i.bF)(n,{to:"/admin/CarouselImages",class:"quick-action-card"},{default:(0,i.k6)((()=>t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-images"},null,-1),(0,i.Lk)("span",null,"è¼ªæ’­åœ–ç‰‡ç®¡ç†",-1)]))),_:1})]),(0,i.Lk)("div",Cs,[(0,i.bF)(n,{to:"/admin/products",class:"quick-action-card"},{default:(0,i.k6)((()=>t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-box"},null,-1),(0,i.Lk)("span",null,"å•†å“ç®¡ç†",-1)]))),_:1})]),(0,i.Lk)("div",Is,[(0,i.bF)(n,{to:"/admin/orders",class:"quick-action-card"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-shopping-cart"},null,-1),(0,i.Lk)("span",null,"è¨‚å–®ç®¡ç†",-1)]))),_:1})]),(0,i.Lk)("div",As,[(0,i.bF)(n,{to:"/admin/users",class:"quick-action-card"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-users"},null,-1),(0,i.Lk)("span",null,"ä½¿ç”¨è€…ç®¡ç†",-1)]))),_:1})])])]),(0,i.Lk)("div",Ps,[(0,i.Lk)("div",_s,[(0,i.Lk)("div",Es,[(0,i.Lk)("div",Fs,[t[5]||(t[5]=(0,i.Lk)("div",{class:"stat-icon bg-primary"},[(0,i.Lk)("i",{class:"fas fa-shopping-bag"})],-1)),(0,i.Lk)("div",xs,[(0,i.Lk)("h3",null,(0,u.v_)(r.todayOrders),1),t[4]||(t[4]=(0,i.Lk)("p",null,"ä»Šæ—¥è¨‚å–®æ•¸",-1))])])]),(0,i.Lk)("div",Ss,[(0,i.Lk)("div",Os,[t[7]||(t[7]=(0,i.Lk)("div",{class:"stat-icon bg-success"},[(0,i.Lk)("i",{class:"fas fa-dollar-sign"})],-1)),(0,i.Lk)("div",Us,[(0,i.Lk)("h3",null,(0,u.v_)(o.formatNumber(r.todaySales)),1),t[6]||(t[6]=(0,i.Lk)("p",null,"ä»Šæ—¥éŠ·å”®é¡",-1))])])]),(0,i.Lk)("div",Rs,[(0,i.Lk)("div",Ts,[t[9]||(t[9]=(0,i.Lk)("div",{class:"stat-icon bg-info"},[(0,i.Lk)("i",{class:"fas fa-user-plus"})],-1)),(0,i.Lk)("div",Ds,[(0,i.Lk)("h3",null,(0,u.v_)(r.todayNewMembers),1),t[8]||(t[8]=(0,i.Lk)("p",null,"ä»Šæ—¥æ–°æœƒå“¡",-1))])])]),(0,i.Lk)("div",Ms,[(0,i.Lk)("div",$s,[t[11]||(t[11]=(0,i.Lk)("div",{class:"stat-icon bg-warning"},[(0,i.Lk)("i",{class:"fas fa-users"})],-1)),(0,i.Lk)("div",Ns,[(0,i.Lk)("h3",null,(0,u.v_)(r.totalMembers),1),t[10]||(t[10]=(0,i.Lk)("p",null,"ç¸½æœƒå“¡æ•¸",-1))])])])])]),(0,i.Lk)("div",Xs,[(0,i.Lk)("div",qs,[t[12]||(t[12]=(0,i.Lk)("h5",{class:"card-title mb-4"},[(0,i.Lk)("i",{class:"fas fa-chart-line me-2"}),(0,i.eW)("éŠ·å”®è¶¨å‹¢ ")],-1)),(0,i.Lk)("div",Vs,[(0,i.Lk)("canvas",Ws,null,512)])])]),(0,i.Lk)("div",Bs,[(0,i.Lk)("div",Ks,[(0,i.Lk)("div",Js,[(0,i.Lk)("div",Qs,[t[16]||(t[16]=(0,i.Lk)("h5",{class:"card-title mb-3"},[(0,i.Lk)("i",{class:"fas fa-calendar-day me-2"}),(0,i.eW)("éŠ·å”®æ¯”è¼ƒ ")],-1)),(0,i.Lk)("div",js,[(0,i.Lk)("div",zs,[t[13]||(t[13]=(0,i.Lk)("span",null,"ä»Šæ—¥éŠ·å”®é¡",-1)),(0,i.Lk)("span",Hs,(0,u.v_)(o.formatNumber(r.todaySales)),1)]),(0,i.Lk)("div",Gs,[t[14]||(t[14]=(0,i.Lk)("span",null,"æ˜¨æ—¥éŠ·å”®é¡",-1)),(0,i.Lk)("span",Zs,(0,u.v_)(o.formatNumber(r.yesterdaySales)),1)]),(0,i.Lk)("div",Ys,[t[15]||(t[15]=(0,i.Lk)("span",null,"è¿‘7æ—¥éŠ·å”®é¡",-1)),(0,i.Lk)("span",er,(0,u.v_)(o.formatNumber(r.last7DaySales)),1)])])])])]),(0,i.Lk)("div",tr,[(0,i.Lk)("div",ar,[(0,i.Lk)("div",sr,[t[19]||(t[19]=(0,i.Lk)("h5",{class:"card-title mb-3"},[(0,i.Lk)("i",{class:"fas fa-user-friends me-2"}),(0,i.eW)("æœƒå“¡çµ±è¨ˆ ")],-1)),(0,i.Lk)("div",rr,[(0,i.Lk)("div",ir,[t[17]||(t[17]=(0,i.Lk)("span",null,"ä»Šæ—¥æ–°å¢æœƒå“¡",-1)),(0,i.Lk)("span",or,(0,u.v_)(r.todayNewMembers),1)]),(0,i.Lk)("div",nr,[t[18]||(t[18]=(0,i.Lk)("span",null,"ç´¯è¨ˆæœƒå“¡ç¸½æ•¸",-1)),(0,i.Lk)("span",lr,(0,u.v_)(r.totalMembers),1)])])])])])])])}a(8872);var dr=a(3456),ur={name:"AdminDashboard",data(){return{todayOrders:0,todaySales:0,yesterdaySales:0,last7DaySales:0,salesData:[],lowStockProducts:[],todayNewMembers:0,totalMembers:0,carouselImages:[],products:[],sevenDaySalesRanking:[],monthSalesRanking:[],socket:null}},async mounted(){try{await this.loadDashboardData(),this.$nextTick((()=>{this.renderSalesChart()}))}catch(e){}},methods:{getLocalDateStr(e){const t=e?new Date(e):new Date;return t.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-")},async loadDashboardData(){try{const[e,t,a]=await Promise.all([C.A.orderAPI.getOrders(),C.A.userAPI.getAllUsers(),C.A.productAPI.getAllProducts()]),s=e.data,r=t.data,i=a.data;this.products=i;const o=this.getLocalDateStr();this.todayOrders=s.filter((e=>{const t=this.getLocalDateStr(e.order_date);return t===o})).length;const n=new Date;n.setDate(n.getDate()-1);const l=this.getLocalDateStr(n),c=new Date;c.setDate(c.getDate()-7);const d=this.getLocalDateStr(c);this.todaySales=s.filter((e=>e.order_date.split("T")[0]===o)).reduce(((e,t)=>e+Number(t.total)),0),this.yesterdaySales=s.filter((e=>e.order_date.split("T")[0]===l)).reduce(((e,t)=>e+Number(t.total)),0),this.last7DaySales=s.filter((e=>e.order_date.split("T")[0]>=d&&e.order_date.split("T")[0]<=o)).reduce(((e,t)=>e+Number(t.total)),0);const u={};s.forEach((e=>{const t=e.order_date.split("T")[0],a=Number(e.total);u[t]?u[t]+=a:u[t]=a})),this.salesData=Object.keys(u).map((e=>({date:e,amount:u[e]}))).sort(((e,t)=>new Date(e.date)-new Date(t.date))),this.todayNewMembers=r.filter((e=>{if(e.created_at){const t=this.getLocalDateStr(e.created_at);return t===o}return!1})).length,this.totalMembers=r.length}catch(e){alert("åŠ è¼‰å„€è¡¨æ¿æ•¸æ“šæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},renderSalesChart(){const e=this.$refs.salesChart;if(e){const t=e.getContext("2d");this.chart=new dr.Ay(t,{type:"line",data:{labels:this.salesData.map((e=>e.date)),datasets:[{label:"éŠ·å”®é‡‘é¡",data:this.salesData.map((e=>e.amount)),borderColor:"rgba(75,192,192,1)",backgroundColor:"rgba(75,192,192,0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed.y&&(t+=new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(e.parsed.y)),t}}}}}})}},formatNumber(e){return Number(e).toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).replace(/^NT\$\s?/,"")},initWebSocket(){this.socket=new WebSocket("ws://localhost:5002/ws/admin"),this.socket.onmessage=e=>{const t=JSON.parse(e.data);"newOrder"===t.type&&this.updateDashboardData()}},updateDashboardData(e){const t=this.getLocalDateStr();e.order_date.split("T")[0]===t&&(this.todayOrders++,this.todaySales+=Number(e.total))},showEmptyChartMessage(){const e=document.getElementById("salesChart").getContext("2d");this.chart&&this.chart.destroy(),e.clearRect(0,0,e.width,e.height),e.font="14px Arial",e.fillStyle="#666",e.textAlign="center",e.fillText("è³‡æ–™å°šæœªåŠ è¼‰",e.width/2,e.height/2)},toggleRecipients(e){if(!this.users[e])return;this.users.forEach(((t,a)=>{a!==e&&t.showRecipients&&this.$set(t,"showRecipients",!1)}));const t=this.users[e];t.recipients&&t.recipients.length?this.$set(t,"showRecipients",!t.showRecipients):this.$store.dispatch("notifications/showNotification",{type:"warning",message:"è©²ç”¨æˆ¶æ²’æœ‰æ”¶ä»¶åœ°å€"})}}};const pr=(0,l.A)(ur,[["render",cr],["__scopeId","data-v-5873ebce"]]);var mr=pr;const hr={class:"admin-dashboard container mt-5"},gr={class:"d-flex justify-content-between align-items-center mb-4"},kr={class:"btn-group shadow-sm"},fr={key:0,class:"accordion",id:"productAccordion"},br={class:"accordion-item"},vr={class:"accordion-header",id:"headingProducts"},Lr={class:"accordion-body"},yr={class:"card-header bg-white d-flex justify-content-between align-items-center mb-3"},wr={class:"d-flex align-items-center"},Cr=["value"],Ir={class:"card-footer bg-white d-flex justify-content-between align-items-center"},Ar=["disabled"],Pr=["disabled"],_r={class:"table"},Er={class:"product-info-cell"},Fr=["title"],xr=["onClick"],Sr={class:"text-nowrap text-center"},Or={class:"product-description-container"},Ur=["onClick"],Rr={class:"text-center align-middle"},Tr={class:"d-flex justify-content-center"},Dr=["onClick"],Mr={class:"row mt-5"},$r={class:"col-md-6"},Nr={class:"accordion",id:"tagAccordion"},Xr={class:"accordion-item"},qr={class:"accordion-header",id:"headingTags"},Vr={class:"accordion-body"},Wr={class:"d-flex justify-content-end mb-3"},Br={class:"table"},Kr=["onClick"],Jr=["onClick"],Qr={class:"col-md-6"},jr={class:"accordion",id:"brandAccordion"},zr={class:"accordion-item"},Hr={class:"accordion-header",id:"headingBrands"},Gr={class:"accordion-body"},Zr={class:"d-flex justify-content-end mb-3"},Yr={class:"table"},ei=["onClick"],ti=["onClick"],ai={class:"modal fade",tabindex:"-1",ref:"tagModal"},si={class:"modal-dialog"},ri={class:"modal-content"},ii={class:"modal-header"},oi={class:"modal-body"},ni={class:"modal-footer"},li={class:"modal fade",tabindex:"-1",ref:"brandModal"},ci={class:"modal-dialog"},di={class:"modal-content"},ui={class:"modal-header"},pi={class:"modal-body"},mi={class:"modal-footer"},hi={class:"modal fade",ref:"productDetailModal",tabindex:"-1"},gi={class:"modal-dialog modal-lg"},ki={class:"modal-content"},fi={class:"modal-header"},bi={key:0,class:"modal-body"},vi={class:"row"},Li={class:"col-md-6"},yi=["src","alt"],wi={class:"col-md-6"};function Ci(e,t,a,s,r,o){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",hr,[t[26]||(t[26]=(0,i.Lk)("h2",{class:"text-center"},"å•†å“ç®¡ç†",-1)),(0,i.Lk)("div",gr,[(0,i.Lk)("div",kr,[(0,i.bF)(n,{to:"/admin/CreateProduct",class:"btn btn-success d-flex align-items-center"},{default:(0,i.k6)((()=>t[18]||(t[18]=[(0,i.Lk)("i",{class:"bi bi-plus-circle me-2"},null,-1),(0,i.eW)("æ–°å¢å•†å“ ")]))),_:1}),(0,i.bF)(n,{to:"/admin/SpecialOffers",class:"btn btn-primary d-flex align-items-center"},{default:(0,i.k6)((()=>t[19]||(t[19]=[(0,i.Lk)("i",{class:"bi bi-tag me-2"},null,-1),(0,i.eW)("ç‰¹åƒ¹å•†å“ ")]))),_:1})])]),r.isSectionOpen.products?((0,i.uX)(),(0,i.CE)("div",fr,[(0,i.Lk)("div",br,[(0,i.Lk)("h2",vr,[(0,i.Lk)("button",{class:"accordion-button",type:"button",onClick:t[0]||(t[0]=e=>o.toggleSection("products"))}," å•†å“ç®¡ç† ")]),(0,i.Lk)("div",{class:(0,u.C4)(["accordion-collapse collapse show",{show:r.isSectionOpen.products}]),"aria-labelledby":"headingProducts","data-bs-parent":"#productAccordion"},[(0,i.Lk)("div",Lr,[(0,i.Lk)("div",yr,[t[21]||(t[21]=(0,i.Lk)("h5",{class:"mb-0"},"å•†å“æ¸…å–®",-1)),(0,i.Lk)("div",wr,[t[20]||(t[20]=(0,i.Lk)("label",{class:"me-2"},"æ¯é é¡¯ç¤ºï¼š",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.itemsPerPage=e),class:"form-select form-select-sm w-auto"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.itemsPerPageOptions,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,u.v_)(e),9,Cr)))),128))],512),[[p.u1,r.itemsPerPage,void 0,{number:!0}]])]),(0,i.Lk)("div",Ir,[(0,i.Lk)("div",null,"ç¬¬ "+(0,u.v_)(r.currentPage)+" é ï¼Œå…± "+(0,u.v_)(o.totalPages)+" é ",1),(0,i.Lk)("button",{class:"btn btn-outline-secondary",disabled:1===r.currentPage,onClick:t[2]||(t[2]=e=>r.currentPage--)}," ä¸Šä¸€é  ",8,Ar),(0,i.Lk)("button",{class:"btn btn-outline-secondary",disabled:r.currentPage===o.totalPages,onClick:t[3]||(t[3]=e=>r.currentPage++)}," ä¸‹ä¸€é  ",8,Pr)])]),(0,i.Lk)("table",_r,[t[23]||(t[23]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",{class:"text-nowrap text-center"},[(0,i.Lk)("th",null,"å•†å“åç¨±"),(0,i.Lk)("th",null,"åƒ¹æ ¼"),(0,i.Lk)("th",null,"åº«å­˜"),(0,i.Lk)("th",null,"æè¿°"),(0,i.Lk)("th",null,"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.paginatedProducts,((e,a)=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",Er,[(0,i.Lk)("span",{class:"product-name",title:e.name},(0,u.v_)(e.name),9,Fr),(0,i.Lk)("button",{class:"btn btn-link btn-sm",onClick:t=>o.showProductDetail(e)}," æŸ¥çœ‹è©³æƒ… ",8,xr)]),(0,i.Lk)("td",null,"NT$"+(0,u.v_)(Math.round(e.price)),1),(0,i.Lk)("td",Sr,[(0,i.Lk)("span",{class:(0,u.C4)(e.stock<=10?"text-danger":"text-success")},(0,u.v_)(e.stock),3)]),(0,i.Lk)("td",null,[(0,i.Lk)("div",Or,[(0,i.Lk)("p",{class:(0,u.C4)(["product-description mb-1",{expanded:e.isDescriptionExpanded}]),style:{"max-width":"200px",overflow:"hidden","text-overflow":"ellipsis"}},(0,u.v_)(e.isDescriptionExpanded?e.description:e.description.slice(0,50)+"..."),3),e.description.length>50?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-link btn-sm p-0",onClick:t=>o.toggleDescription(e)},(0,u.v_)(e.isDescriptionExpanded?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š"),9,Ur)):(0,i.Q3)("",!0)])]),(0,i.Lk)("td",Rr,[(0,i.Lk)("div",Tr,[(0,i.bF)(n,{to:{name:"EditProduct",params:{id:e.id}},class:"btn btn-warning btn-sm me-2"},{default:(0,i.k6)((()=>t[22]||(t[22]=[(0,i.eW)(" ç·¨è¼¯ ")]))),_:2},1032,["to"]),(0,i.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t=>o.deleteProduct(e.id,a)}," åˆªé™¤ ",8,Dr)])])])))),128))])])])],2)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Mr,[(0,i.Lk)("div",$r,[(0,i.Lk)("div",Nr,[(0,i.Lk)("div",Xr,[(0,i.Lk)("h2",qr,[(0,i.Lk)("button",{class:"accordion-button",type:"button",onClick:t[4]||(t[4]=e=>o.toggleSection("tags"))}," æ¨™ç±¤ç®¡ç† ")]),(0,i.Lk)("div",{class:(0,u.C4)(["accordion-collapse collapse",{show:r.isSectionOpen.tags}]),"aria-labelledby":"headingTags","data-bs-parent":"#tagAccordion"},[(0,i.Lk)("div",Vr,[(0,i.Lk)("div",Wr,[(0,i.Lk)("button",{class:"btn btn-success",onClick:t[5]||(t[5]=(...e)=>o.openCreateTagModal&&o.openCreateTagModal(...e))},"æ–°å¢æ¨™ç±¤")]),(0,i.Lk)("table",Br,[t[24]||(t[24]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"æ¨™ç±¤åç¨±"),(0,i.Lk)("th",null,"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.tags,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,u.v_)(e.name),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn btn-warning btn-sm",onClick:e=>o.openEditTagModal(t)},"ç·¨è¼¯",8,Kr),(0,i.Lk)("button",{class:"btn btn-danger btn-sm ml-2",onClick:a=>o.deleteTag(e.id,t)},"åˆªé™¤",8,Jr)])])))),128))])])])],2)])])]),(0,i.Lk)("div",Qr,[(0,i.Lk)("div",jr,[(0,i.Lk)("div",zr,[(0,i.Lk)("h2",Hr,[(0,i.Lk)("button",{class:"accordion-button",type:"button",onClick:t[6]||(t[6]=e=>o.toggleSection("brands"))}," å» ç‰Œç®¡ç† ")]),(0,i.Lk)("div",{class:(0,u.C4)(["accordion-collapse collapse",{show:r.isSectionOpen.brands}]),"aria-labelledby":"headingBrands","data-bs-parent":"#brandAccordion"},[(0,i.Lk)("div",Gr,[(0,i.Lk)("div",Zr,[(0,i.Lk)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>o.openCreateBrandModal&&o.openCreateBrandModal(...e))}," æ–°å¢å» ç‰Œ ")]),(0,i.Lk)("table",Yr,[t[25]||(t[25]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"å» ç‰Œåç¨±"),(0,i.Lk)("th",null,"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.brands,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,u.v_)(e.name),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn btn-warning btn-sm",onClick:e=>o.openEditBrandModal(t)},"ç·¨è¼¯",8,ei),(0,i.Lk)("button",{class:"btn btn-danger btn-sm ml-2",onClick:a=>o.deleteBrand(e.id,t)},"åˆªé™¤",8,ti)])])))),128))])])])],2)])])])])]),(0,i.Lk)("div",ai,[(0,i.Lk)("div",si,[(0,i.Lk)("div",ri,[(0,i.Lk)("div",ii,[t[27]||(t[27]=(0,i.Lk)("h5",{class:"modal-title"},"ç·¨è¼¯æ¨™ç±¤",-1)),(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:t[8]||(t[8]=(...e)=>o.closeTagModal&&o.closeTagModal(...e))})]),(0,i.Lk)("div",oi,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>r.tagForm.name=e),class:"form-control",placeholder:"æ¨™ç±¤åç¨±"},null,512),[[p.Jo,r.tagForm.name]])]),(0,i.Lk)("div",ni,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[10]||(t[10]=(...e)=>o.closeTagModal&&o.closeTagModal(...e))},"å–æ¶ˆ"),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",onClick:t[11]||(t[11]=(...e)=>o.saveTag&&o.saveTag(...e))},(0,u.v_)(r.isEditingTag?"ä¿å­˜è®Šæ›´":"æ–°å¢æ¨™ç±¤"),1)])])])],512),(0,i.Lk)("div",li,[(0,i.Lk)("div",ci,[(0,i.Lk)("div",di,[(0,i.Lk)("div",ui,[t[28]||(t[28]=(0,i.Lk)("h5",{class:"modal-title"},"ç·¨è¼¯å» ç‰Œ",-1)),(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>o.closeBrandModal&&o.closeBrandModal(...e))})]),(0,i.Lk)("div",pi,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>r.brandForm.name=e),class:"form-control",placeholder:"å» ç‰Œåç¨±"},null,512),[[p.Jo,r.brandForm.name]])]),(0,i.Lk)("div",mi,[(0,i.Lk)("button",{class:"btn btn-secondary",onClick:t[14]||(t[14]=(...e)=>o.closeBrandModal&&o.closeBrandModal(...e))},"å–æ¶ˆ"),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[15]||(t[15]=(...e)=>o.saveBrand&&o.saveBrand(...e))},"ä¿å­˜")])])])],512),(0,i.Lk)("div",hi,[(0,i.Lk)("div",gi,[(0,i.Lk)("div",ki,[(0,i.Lk)("div",fi,[t[29]||(t[29]=(0,i.Lk)("h5",{class:"modal-title"},"å•†å“è©³ç´°è³‡è¨Š",-1)),(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:t[16]||(t[16]=(...e)=>o.closeProductDetailModal&&o.closeProductDetailModal(...e))})]),r.selectedProduct?((0,i.uX)(),(0,i.CE)("div",bi,[(0,i.Lk)("div",vi,[(0,i.Lk)("div",Li,[(0,i.Lk)("img",{src:r.selectedProduct.image||"/img/default-product.jpg",class:"img-fluid",onError:t[17]||(t[17]=e=>e.target.src="/img/default-product.jpg"),alt:r.selectedProduct.name},null,40,yi)]),(0,i.Lk)("div",wi,[(0,i.Lk)("h5",null,"å•†å“åç¨±: "+(0,u.v_)(r.selectedProduct.name),1),(0,i.Lk)("p",null,"å•†å“åƒ¹æ ¼: "+(0,u.v_)(r.selectedProduct.price),1),(0,i.Lk)("p",null,"å•†å“åº«å­˜: "+(0,u.v_)(r.selectedProduct.stock),1),(0,i.Lk)("p",null,"å•†å“æè¿°: "+(0,u.v_)(r.selectedProduct.description),1)])])])):(0,i.Q3)("",!0)])])],512)],64)}var Ii={name:"AdminProducts",data(){return{products:[],tags:[],selectedProduct:null,brands:[],productForm:{name:"",price:0,stock:0,description:"",brand_id:"",tag_ids:[]},tagForm:{name:""},brandForm:{name:""},isEditing:!1,currentIndex:null,isEditingTag:!1,isEditingBrand:!1,currentPage:1,itemsPerPage:10,itemsPerPageOptions:[10,20,50],isSectionOpen:{products:!0,tags:!1,brands:!1}}},mounted(){this.loadProducts(),this.loadTags(),this.loadBrands()},computed:{paginatedProducts(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.products.slice(e,t)},totalPages(){return Math.ceil(this.products.length/this.itemsPerPage)}},methods:{toggleSection(e){this.isSectionOpen[e]=!this.isSectionOpen[e]},async loadProducts(){try{const e=await C.A.productAPI.getAllProducts();this.products=e.map((e=>({...e,isDescriptionExanded:!1}))),this.currentPage>this.totalPages&&(this.currentPage=this.totalPages||1)}catch(e){ea(e,"åŠ è¼‰ç”¢å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},showProductDetail(e){this.selectedProduct={...e};const t=new Yt.aF(this.$refs.productDetailModal);t.show()},closeProductDetailModal(){const e=Yt.aF.getInstance(this.$refs.productDetailModal);e&&(e.hide(),this.selectedProduct=null)},async loadTags(){try{const e=await C.A.tagAPI.getAllTags();this.tags=Array.isArray(e)?e:[]}catch(e){ea(e,"åŠ è¼‰æ¨™ç±¤æ™‚éŒ¯èª¤ï¼Œè«‹ç¨å€™å†è©¦ï¼"),this.tags=[]}},async loadBrands(){try{const e=await C.A.brandAPI.getAllBrands();this.brands=e}catch(e){ea(e,"åŠ è¼‰å» ç‰Œæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å€™å†è©¦ï¼")}},async saveTag(){try{if(this.isEditingTag)await C.A.tagAPI.updateTag(this.tagForm.id,this.tagForm),this.tags[this.currentIndex]={...this.tagForm};else{const e=await C.A.tagAPI.createTag(this.tagForm);this.tags.push(e.data)}}catch(e){ea(e,"ä¿å­˜æ¨™ç±¤æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å€™å†è©¦ï¼")}this.closeTagModal()},async saveBrand(){try{if(this.isEditingBrand)await C.A.brandAPI.updateBrand(this.brandForm.id,this.brandForm),this.brands[this.currentIndex]={...this.brandForm};else{const e=await C.A.brandAPI.createBrand(this.brandForm);this.brands.push(e.data)}}catch(e){ea(e,"ä¿å­˜å» ç‰Œæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å€™å†è©¦ï¼")}this.closeBrandModal()},async deleteProduct(e,t){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤å•†å“ï¼Ÿ"))try{await C.A.productAPI.deleteProduct(e),this.products.splice(t,1)}catch(a){ea(a,"åˆªé™¤ç”¢å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},async deleteTag(e,t){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤æ¨™ç±¤ï¼Ÿ"))try{await C.A.tagAPI.deleteTag(e),this.tags.splice(t,1)}catch(a){ea(a,"åˆªé™¤æ¨™ç±¤æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},async deleteBrand(e,t){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤å» ç‰Œï¼Ÿ"))try{await C.A.brandAPI.deleteBrand(e),this.brands.splice(t,1)}catch(a){ea(a,"åˆªé™¤å» ç‰Œæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},openCreateTagModal(){this.isEditingTag=!1,this.tagForm={name:""},this.$nextTick((()=>{const e=new Yt.aF(this.$refs.tagModal);e.show()}))},openCreateBrandModal(){this.isEditingBrand=!1,this.brandForm={name:""},this.$nextTick((()=>{const e=new Yt.aF(this.$refs.brandModal);e.show()}))},openEditTagModal(e){this.isEditingTag=!0,this.currentIndex=e,this.tagForm={...this.tags[e]};const t=new Yt.aF(this.$refs.tagModal);t.show()},openEditBrandModal(e){this.isEditingBrand=!0,this.currentIndex=e,this.brandForm={...this.brands[e]};const t=new Yt.aF(this.$refs.brandModal);t.show()},closeTagModal(){const e=Yt.aF.getInstance(this.$refs.tagModal);e&&e.hide()},closeBrandModal(){const e=Yt.aF.getInstance(this.$refs.brandModal);e&&e.hide()},toggleDescription(e){e.isDescriptionExpanded=!e.isDescriptionExpanded},toggleName(e){e.isNameExpanded=!e.isNameExpanded}},watch:{itemsPerPage(){this.currentPage=1}}};const Ai=(0,l.A)(Ii,[["render",Ci],["__scopeId","data-v-b06169da"]]);var Pi=Ai;const _i={class:"admin-dashboard container py-4"},Ei={class:"page-header mb-4"},Fi={class:"d-flex justify-content-between align-items-center"},xi={class:"card shadow-sm"},Si={class:"table-responsive"},Oi={class:"table table-hover align-middle mb-0"},Ui={class:"d-flex align-items-center"},Ri={class:"user-avatar me-3"},Ti={class:"mb-0"},Di={class:"text-muted"},Mi={class:"address-section"},$i={class:"d-flex align-items-center"},Ni=["onClick"],Xi={class:"me-2"},qi={key:1,class:"text-muted"},Vi={class:"text-end"},Wi={class:"btn-group"},Bi=["onClick"],Ki=["onClick"],Ji=["onClick"],Qi={key:0},ji={colspan:"6"},zi={class:"recipient-list p-3"},Hi={class:"d-flex justify-content-between align-items-start"},Gi={class:"fw-bold"},Zi={class:"text-muted small"},Yi={class:"text-muted small"},eo={class:"recipient-actions"},to=["onClick"],ao=["onClick"],so={class:"modal fade",tabindex:"-1",ref:"userModal"},ro={class:"modal-dialog"},io={class:"modal-content"},oo={class:"modal-header border-0"},no={class:"modal-title"},lo={class:"modal-body"},co={class:"mb-3"},uo={class:"mb-3"},po={class:"mb-3"},mo={class:"input-group"},ho=["type","required"],go={class:"mb-3"},ko=["required"],fo={class:"mb-3"},bo={key:0},vo={class:"mb-3"},Lo={class:"mb-3"},yo={class:"modal-footer border-0"},wo={class:"modal fade",tabindex:"-1",ref:"recipientModal"},Co={class:"modal-dialog"},Io={class:"modal-content"},Ao={class:"modal-header border-0"},Po={class:"modal-title"},_o={class:"modal-body"},Eo={class:"mb-3"},Fo={class:"mb-3"},xo={class:"mb-3"},So={class:"modal-footer border-0"};function Oo(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",_i,[(0,i.Lk)("div",Ei,[(0,i.Lk)("div",Fi,[t[21]||(t[21]=(0,i.Lk)("div",null,[(0,i.Lk)("h2",{class:"fw-bold text-primary mb-1"},"ç”¨æˆ¶ç®¡ç†"),(0,i.Lk)("p",{class:"text-muted mb-0"},"ç®¡ç†ç³»çµ±ç”¨æˆ¶å’Œæ¬Šé™")],-1)),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>o.openCreateUserModal&&o.openCreateUserModal(...e))},t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-user-plus me-2"},null,-1),(0,i.eW)("æ–°å¢ç”¨æˆ¶ ")]))])]),(0,i.Lk)("div",xi,[(0,i.Lk)("div",Si,[(0,i.Lk)("table",Oi,[t[29]||(t[29]=(0,i.Lk)("thead",{class:"bg-light"},[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{class:"py-3"},"ç”¨æˆ¶è³‡è¨Š"),(0,i.Lk)("th",{class:"py-3"},"æ¬Šé™"),(0,i.Lk)("th",{class:"py-3"},"æ”¶ä»¶åœ°å€"),(0,i.Lk)("th",{class:"py-3 text-end"},"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.users,((e,a)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:a},[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,[(0,i.Lk)("div",Ui,[(0,i.Lk)("div",Ri,(0,u.v_)(o.getUserInitials(e.name)),1),(0,i.Lk)("div",null,[(0,i.Lk)("h6",Ti,(0,u.v_)(e.name),1),(0,i.Lk)("small",Di,(0,u.v_)(e.email),1)])])]),(0,i.Lk)("td",null,[(0,i.Lk)("span",{class:(0,u.C4)(o.getRoleBadgeClass(e.role))},(0,u.v_)(o.getRoleDisplayName(e.role)),3)]),(0,i.Lk)("td",Mi,[(0,i.Lk)("div",$i,[e.recipients?.length?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-link btn-sm text-decoration-none d-flex align-items-center",onClick:(0,p.D$)((e=>o.toggleRecipients(a)),["stop"])},[(0,i.Lk)("span",Xi,(0,u.v_)(e.recipients?e.recipients.length:0)+" å€‹åœ°å€",1),(0,i.Lk)("i",{class:(0,u.C4)(["fas",e.showRecipients?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,Ni)):((0,i.uX)(),(0,i.CE)("span",qi,"ç„¡æ”¶ä»¶åœ°å€"))])]),(0,i.Lk)("td",Vi,[(0,i.Lk)("div",Wi,[(0,i.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:e=>o.openEditUserModal(a),title:"ç·¨è¼¯ç”¨æˆ¶"},t[22]||(t[22]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Bi),(0,i.Lk)("button",{class:"btn btn-outline-success btn-sm",onClick:e=>o.addRecipient(a),title:"æ–°å¢æ”¶ä»¶åœ°å€"},t[23]||(t[23]=[(0,i.Lk)("i",{class:"fas fa-map-marker-alt"},null,-1)]),8,Ki),(0,i.Lk)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>o.deleteUser(a),title:"åˆªé™¤ç”¨æˆ¶"},t[24]||(t[24]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Ji)])])]),e.showRecipients&&e.recipients&&e.recipients?.length?((0,i.uX)(),(0,i.CE)("tr",Qi,[(0,i.Lk)("td",ji,[(0,i.Lk)("div",zi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.recipients,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:e.id||s,class:"address-item"},[(0,i.Lk)("div",Hi,[(0,i.Lk)("div",null,[(0,i.Lk)("div",Gi,(0,u.v_)(e.name),1),(0,i.Lk)("div",Zi,[t[25]||(t[25]=(0,i.Lk)("i",{class:"fas fa-phone me-1"},null,-1)),(0,i.eW)((0,u.v_)(e.phone),1)]),(0,i.Lk)("div",Yi,[t[26]||(t[26]=(0,i.Lk)("i",{class:"fas fa-map-marker-alt me-1"},null,-1)),(0,i.eW)((0,u.v_)(e.address),1)])]),(0,i.Lk)("div",eo,[(0,i.Lk)("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:e=>r.editRecipient(a,s),title:"ç·¨è¼¯æ”¶ä»¶äºº"},t[27]||(t[27]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,to),(0,i.Lk)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>o.deleteRecipient(a,s),title:"åˆªé™¤æ”¶ä»¶äºº"},t[28]||(t[28]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,ao)])])])))),128))])])])):(0,i.Q3)("",!0)],64)))),128))])])])]),(0,i.Lk)("div",so,[(0,i.Lk)("div",ro,[(0,i.Lk)("div",io,[(0,i.Lk)("div",oo,[(0,i.Lk)("h5",no,(0,u.v_)(r.isEditing?"ç·¨è¼¯ç”¨æˆ¶":"æ–°å¢ç”¨æˆ¶"),1),(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))})]),(0,i.Lk)("div",lo,[(0,i.Lk)("form",{onSubmit:t[10]||(t[10]=(0,p.D$)(((...e)=>o.saveUser&&o.saveUser(...e)),["prevent"])),class:"needs-validation"},[(0,i.Lk)("div",co,[t[30]||(t[30]=(0,i.Lk)("label",{class:"form-label"},"ç”¨æˆ¶åç¨±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>r.userForm.name=e),required:""},null,512),[[p.Jo,r.userForm.name]])]),(0,i.Lk)("div",uo,[t[31]||(t[31]=(0,i.Lk)("label",{class:"form-label"},"é›»å­éƒµä»¶",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>r.userForm.email=e),required:""},null,512),[[p.Jo,r.userForm.email]])]),(0,i.Lk)("div",po,[t[32]||(t[32]=(0,i.Lk)("label",{class:"form-label"},"å¯†ç¢¼",-1)),(0,i.Lk)("div",mo,[(0,i.bo)((0,i.Lk)("input",{type:r.showPassword?"text":"password",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>r.userForm.password=e),required:!r.isEditing},null,8,ho),[[p.hp,r.userForm.password]]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=e=>r.showPassword=!r.showPassword)},[(0,i.Lk)("i",{class:(0,u.C4)(["fas",r.showPassword?"fa-eye-slash":"fa-eye"])},null,2)])])]),(0,i.Lk)("div",go,[t[33]||(t[33]=(0,i.Lk)("label",{class:"form-label"},"ç¢ºèªå¯†ç¢¼",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>r.userForm.confirmPassword=e),required:!r.isEditing||r.userForm.password},null,8,ko),[[p.Jo,r.userForm.confirmPassword]])]),(0,i.Lk)("div",fo,[t[35]||(t[35]=(0,i.Lk)("label",{class:"form-label"},"ç”¨æˆ¶æ¬Šé™",-1)),(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":t[7]||(t[7]=e=>r.userForm.role=e)},t[34]||(t[34]=[(0,i.Lk)("option",{value:"user"},"ä¸€èˆ¬ç”¨æˆ¶",-1),(0,i.Lk)("option",{value:"admin"},"ç®¡ç†å“¡",-1)]),512),[[p.u1,r.userForm.role]])]),"user"===r.userForm.role?((0,i.uX)(),(0,i.CE)("div",bo,[(0,i.Lk)("div",vo,[t[36]||(t[36]=(0,i.Lk)("label",{class:"form-label"},"è¯çµ¡é›»è©±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>r.userForm.phone=e),required:""},null,512),[[p.Jo,r.userForm.phone]])]),(0,i.Lk)("div",Lo,[t[37]||(t[37]=(0,i.Lk)("label",{class:"form-label"},"è¯çµ¡åœ°å€",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>r.userForm.address=e),required:""},null,512),[[p.Jo,r.userForm.address]])])])):(0,i.Q3)("",!0)],32)]),(0,i.Lk)("div",yo,[(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[11]||(t[11]=(...e)=>o.closeModal&&o.closeModal(...e))},"å–æ¶ˆ"),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>o.saveUser&&o.saveUser(...e))},(0,u.v_)(r.isEditing?"ä¿å­˜è®Šæ›´":"æ–°å¢ç”¨æˆ¶"),1)])])])],512),(0,i.Lk)("div",wo,[(0,i.Lk)("div",Co,[(0,i.Lk)("div",Io,[(0,i.Lk)("div",Ao,[(0,i.Lk)("h5",Po,(0,u.v_)(r.isEditingRecipient?"ç·¨è¼¯æ”¶ä»¶åœ°å€":"æ–°å¢æ”¶ä»¶åœ°å€"),1),(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:t[13]||(t[13]=(...e)=>o.closeRecipientModal&&o.closeRecipientModal(...e))})]),(0,i.Lk)("div",_o,[(0,i.Lk)("form",{onSubmit:t[17]||(t[17]=(0,p.D$)(((...e)=>o.saveRecipient&&o.saveRecipient(...e)),["prevent"]))},[(0,i.Lk)("div",Eo,[t[38]||(t[38]=(0,i.Lk)("label",{class:"form-label"},"æ”¶ä»¶äººå§“å",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=e=>r.editRecipient.name=e),required:""},null,512),[[p.Jo,r.editRecipient.name]])]),(0,i.Lk)("div",Fo,[t[39]||(t[39]=(0,i.Lk)("label",{class:"form-label"},"è¯çµ¡é›»è©±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=e=>r.editRecipient.phone=e),required:""},null,512),[[p.Jo,r.editRecipient.phone]])]),(0,i.Lk)("div",xo,[t[40]||(t[40]=(0,i.Lk)("label",{class:"form-label"},"æ”¶ä»¶åœ°å€",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[16]||(t[16]=e=>r.editRecipient.address=e),required:""},null,512),[[p.Jo,r.editRecipient.address]])])],32)]),(0,i.Lk)("div",So,[(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[18]||(t[18]=(...e)=>o.closeRecipientModal&&o.closeRecipientModal(...e))},"å–æ¶ˆ"),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",onClick:t[19]||(t[19]=(...e)=>o.saveRecipient&&o.saveRecipient(...e))},(0,u.v_)(r.isEditingRecipient?"æ›´æ–°åœ°å€":"æ–°å¢åœ°å€"),1)])])])],512)])}var Uo={name:"AdminUsers",data(){return{users:[],userForm:{name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",address:""},isEditing:!1,currentIndex:null,showPassword:!1,editRecipient:{name:"",phone:"",address:"",user_id:null},isEditingRecipient:!1,editingRecipientIndex:-1}},mounted(){this.loadUsers(),document.addEventListener("click",this.handleClick)},beforeDestroy(){document.removeEventListener("click",this.handleClick)},handleClick(e){e.target.closest(".address-section")||this.users.forEach((e=>{e.showRecipients&&(e.showRecipients=!1)}))},methods:{async loadUsers(){try{const t=await C.A.userAPI.getAllUsers(),a=t.data;for(let s of a)try{const e=await C.A.recipientAPI.getRecipients(s.id);s.recipients=e.data||[],s.showRecipients=!1}catch(e){s.recipients=[]}this.users=a}catch(e){ea(e,"ç„¡æ³•åŠ è¼‰ç”¨æˆ¶è³‡æ–™")}},async deleteRecipient(e,t){try{const a=this.users[e],s=a.recipients[t];confirm("ç¢ºå®šè¦åˆªé™¤æ­¤æ”¶ä»¶äººè³‡æ–™ï¼Ÿ")&&(await C.A.recipientAPI.deleteRecipient(s.id),a.recipients.splice(t,1))}catch(a){ea(a,"åˆªé™¤æ”¶ä»¶äººå¤±æ•—")}},openCreateUserModal(){this.isEditing=!1,this.userForm={name:"",email:"",password:"",confirmPassword:"",role:"user",phone:"",address:""},this.$nextTick((()=>{const e=new Yt.aF(this.$refs.userModal);e.show()}))},openEditUserModal(e){this.isEditing=!0,this.currentIndex=e,this.userForm={...this.users[e]},this.userForm.password="",this.userForm.confirmPassword="";const t=new Yt.aF(this.$refs.userModal);t.show()},async saveUser(){try{if(this.userForm.password!==this.userForm.confirmPassword)return void alert("å¯†ç¢¼å’Œç¢ºèªå¯†ç¢¼ä¸ä¸€è‡´");if(this.isEditing){const e={name:this.userForm.name,email:this.userForm.email,role:this.userForm.role,phone:this.userForm.phone,address:this.userForm.address};this.userForm.password&&(e.password=this.userForm.password),await C.A.userAPI.updateUser(this.userForm.id,e),this.users[this.currentIndex]={...this.userForm}}else{const e={name:this.userForm.name,email:this.userForm.email,role:this.userForm.role,phone:this.userForm.phone,address:this.userForm.address,password:this.userForm.password},t=await C.A.userAPI.createUsers(e);this.users.push(t.data)}this.closeModal()}catch(e){alert("æ›´æ–°ç”¨æˆ¶è³‡æ–™å¤±æ•—ï¼")}},async deleteUser(e){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤ç”¨æˆ¶å—ï¼Ÿ"))try{await C.A.userAPI.deleteUsers(this.users[e].id),this.users.splice(e,1)}catch(t){alert("ç„¡æ³•åˆªé™¤ç”¨æˆ¶")}},closeModal(){this.$nextTick((()=>{const e=Yt.aF.getInstance(this.$refs.userModal);e&&e.hide()}))},getUserInitials(e){return e?e.substring(0,2).toUpperCase():"??"},getRoleBadgeClass(e){return"admin"===e?"badge bg-primary":"badge bg-success"},getRoleDisplayName(e){return"admin"===e?"ç®¡ç†å“¡":"ä¸€èˆ¬ç”¨æˆ¶"},toggleRecipients(e){if(!this.users[e])return;const t=this.users[e];t.recipients?.length?(this.users.forEach(((t,a)=>{a!==e&&(t.showRecipients=!1)})),t.showRecipients=!t.showRecipients):alert("æ­¤ç”¨æˆ¶æ²’æœ‰æ”¶ä»¶äººè³‡æ–™")},addRecipient(e){const t=this.users[e].id;this.isEditingRecipient=!1,this.editRecipient={name:"",phone:"",address:"",user_id:t},this.showRecipientModal()},editRecipientInfo(e,t){this.isEditingRecipient=!0,this.editingRecipientIndex=t;const a=this.users[e].recipients[t];this.editRecipient={...a},this.showRecipientModal()},async saveRecipient(){if(this.isRecipientValid(this.editRecipient))try{let e;e=this.isEditingRecipient?await C.A.recipientAPI.updateRecipient(this.editRecipient.id,this.editRecipient):await C.A.recipientAPI.addRecipient(this.editRecipient);const t=this.$refs.recipientModal,a=Yt.aF.getInstance(t);a.hide(),await this.loadUsers(),alert(this.isEditingRecipient?"æ”¶ä»¶äººè³‡æ–™å·²æ›´æ–°":"æ–°å¢æ”¶ä»¶äººæˆåŠŸ")}catch(e){ea(e,this.isEditingRecipient?"æ›´æ–°æ”¶ä»¶äººå¤±æ•—":"æ–°å¢æ”¶ä»¶äººå¤±æ•—")}else alert("è«‹æª¢æŸ¥æ”¶ä»¶äººè³‡æ–™æ˜¯å¦å®Œæ•´ä¸”æ ¼å¼æ­£ç¢ºï¼")},isRecipientValid(e){const t=/^[0-9]{10}$/;return e.name.trim()&&t.test(e.phone)&&e.address.trim()},showRecipientModal(){const e=new Yt.aF(this.$refs.recipientModal);e.show()},closeRecipientModal(){const e=Yt.aF.getInstance(this.$refs.recipientModal);e&&e.hide()}}};const Ro=(0,l.A)(Uo,[["render",Oo],["__scopeId","data-v-3fbfdfaa"]]);var To=Ro;const Do={class:"admin-dashboard container mt-5"},Mo={class:"filters-container p-3 bg-light rounded-3 mb-4"},$o={class:"row g-3"},No={class:"col-md-5"},Xo={class:"input-group"},qo={class:"col-md-4"},Vo={class:"col-md-3"},Wo={class:"table-responsive rounded-3 shadow-sm"},Bo={class:"table table-hover mb-0"},Ko={class:"align-middle"},Jo={class:"align-middle"},Qo={class:"d-flex align-items-center"},jo={class:"user-avatar"},zo={class:"ms-2"},Ho={class:"align-middle fw-bold"},Go={class:"align-middle"},Zo={class:"align-middle"},Yo={class:"align-middle"},en=["onClick"],tn=["onClick","disabled"],an={class:"pagination-container mt-4 d-flex justify-content-between align-items-center"},sn={class:"page-info text-muted"},rn={class:"pagination-controls"},on=["disabled"],nn=["disabled"];function ln(e,t,a,s,r,o){const n=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.CE)("div",Do,[t[13]||(t[13]=(0,i.Lk)("div",{class:"dashboard-header mb-4"},[(0,i.Lk)("h2",{class:"text-primary fw-bold"},"è¨‚å–®ç®¡ç†ç³»çµ±"),(0,i.Lk)("p",{class:"text-muted"},"ç®¡ç†æ‰€æœ‰è¨‚å–®ç‹€æ…‹èˆ‡è©³æƒ…")],-1)),(0,i.Lk)("div",Mo,[(0,i.Lk)("div",$o,[(0,i.Lk)("div",No,[(0,i.Lk)("div",Xo,[t[5]||(t[5]=(0,i.Lk)("span",{class:"input-group-text bg-white"},[(0,i.Lk)("i",{class:"fas fa-search text-muted"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control border-start-0",placeholder:"æœå°‹è¨‚å–®è™Ÿæˆ–ç”¨æˆ¶å","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e)},null,512),[[p.Jo,r.searchQuery]])])]),(0,i.Lk)("div",qo,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.selectedStatus=e),class:"form-select"},t[6]||(t[6]=[(0,i.Fv)('<option value="" data-v-50128844>æ‰€æœ‰è¨‚å–®ç‹€æ…‹</option><option value="pending" data-v-50128844>å¾…ç¢ºèª</option><option value="shipped" data-v-50128844>å·²ç™¼è²¨</option><option value="completed" data-v-50128844>å·²å®Œæˆ</option><option value="cancelled" data-v-50128844>å·²å–æ¶ˆ</option>',5)]),512),[[p.u1,r.selectedStatus]])]),(0,i.Lk)("div",Vo,[(0,i.Lk)("button",{class:"btn btn-primary w-100",onClick:t[2]||(t[2]=(...e)=>o.filterOrders&&o.filterOrders(...e))},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-filter me-2"},null,-1),(0,i.eW)("å¥—ç”¨ç¯©é¸ ")]))])])]),(0,i.Lk)("div",Wo,[(0,i.Lk)("table",Bo,[t[10]||(t[10]=(0,i.Lk)("thead",{class:"bg-light"},[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{class:"py-3"},"è¨‚å–®è™Ÿ"),(0,i.Lk)("th",{class:"py-3"},"ç”¨æˆ¶è³‡è¨Š"),(0,i.Lk)("th",{class:"py-3"},"ç¸½é‡‘é¡"),(0,i.Lk)("th",{class:"py-3"},"ç‹€æ…‹"),(0,i.Lk)("th",{class:"py-3"},"å»ºç«‹æ—¥æœŸ"),(0,i.Lk)("th",{class:"py-3"},"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.paginatedOrders,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",Ko,"#"+(0,u.v_)(e.id),1),(0,i.Lk)("td",Jo,[(0,i.Lk)("div",Qo,[(0,i.Lk)("span",jo,(0,u.v_)(o.getUserInitials(e.user_id)),1),(0,i.Lk)("span",zo,(0,u.v_)(o.getUserName(e.user_id)),1)])]),(0,i.Lk)("td",Ho,(0,u.v_)(o.formatCurrency(e.total)),1),(0,i.Lk)("td",Go,[(0,i.Lk)("span",{class:(0,u.C4)(o.getStatusBadgeClass(e.status))},(0,u.v_)(o.formatStatus(e.status)),3)]),(0,i.Lk)("td",Zo,(0,u.v_)(o.formatDate(e.order_date)),1),(0,i.Lk)("td",Yo,[(0,i.Lk)("button",{class:"btn btn-outline-info btn-sm me-2",onClick:t=>o.viewOrderDetails(e)},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-eye me-1"},null,-1),(0,i.eW)("æŸ¥çœ‹ ")]),8,en),(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>o.cancelOrder(e),disabled:"cancelled"===e.status||"completed"===e.status},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,i.eW)("å–æ¶ˆ ")]),8,tn)),[[n,"cancelled"===e.status||"completed"===e.status?"ç„¡æ³•å–æ¶ˆå·²å®Œæˆæˆ–å·²å–æ¶ˆçš„è¨‚å–®":"å–æ¶ˆæ­¤è¨‚å–®"]])])])))),128))])])]),(0,i.Lk)("div",an,[(0,i.Lk)("div",sn," é¡¯ç¤ºç¬¬ "+(0,u.v_)(o.paginationInfo.start)+" åˆ° "+(0,u.v_)(o.paginationInfo.end)+" ç­†ï¼Œå…± "+(0,u.v_)(o.filteredOrders.length)+" ç­† ",1),(0,i.Lk)("div",rn,[(0,i.Lk)("button",{class:"btn btn-outline-primary me-2",onClick:t[3]||(t[3]=(...e)=>o.prevPage&&o.prevPage(...e)),disabled:1===r.currentPage},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-chevron-left me-1"},null,-1),(0,i.eW)("ä¸Šä¸€é  ")]),8,on),(0,i.Lk)("button",{class:"btn btn-outline-primary",onClick:t[4]||(t[4]=(...e)=>o.nextPage&&o.nextPage(...e)),disabled:r.currentPage===o.totalPages},t[12]||(t[12]=[(0,i.eW)(" ä¸‹ä¸€é "),(0,i.Lk)("i",{class:"fas fa-chevron-right ms-1"},null,-1)]),8,nn)])])])}a(2577);var cn=a(2952),dn=a.n(cn),un={name:"AdminOrders",data(){return{orders:[],users:[],searchQuery:"",selectedStatus:"",currentPage:1,itemsPerPage:10,debouncedFilter:null,loading:!1,showToast:!1,toastMessage:"",toastType:"success"}},computed:{filteredOrders(){return this.orders.filter((e=>{const t=e.user_id&&e.user_id.toString().toLowerCase().includes(this.searchQuery.toLowerCase())||e.id&&e.id.toString().toLowerCase().includes(this.searchQuery.toLowerCase()),a=!this.selectedStatus||e.status===this.selectedStatus;return t&&a}))},totalPages(){return Math.ceil(this.filteredOrders.length/this.itemsPerPage)||1},paginatedOrders(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.filteredOrders.slice(e,t)},paginationInfo(){const e=(this.currentPage-1)*this.itemsPerPage+1,t=Math.min(this.currentPage*this.itemsPerPage,this.filteredOrders.length);return{start:e,end:t}}},methods:{async fetchOrders(){try{const e=await C.A.orderAPI.getOrders(),t=e.data;this.orders=t.map((e=>({...e,status:e.status||"pending"})))||[]}catch(e){e.response&&401===e.response.status?(alert("æ‚¨çš„ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥ã€‚"),this.$store.dispatch("auth/logout"),this.$router.push("/UserLogin")):e.response&&403===e.response.status?(alert("æ‚¨æ²’æœ‰æ¬Šé™è¨ªå•æ­¤é é¢"),this.$router.push("/")):alert("åŠ è¼‰è¨‚å–®æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦"),this.orders=[]}},async fetchUsers(){try{const e=await C.A.userAPI.getAllUsers();this.users=e.data||[]}catch(e){alert("åŠ è¼‰ç”¨æˆ¶æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å€™å†è©¦ï¼"),this.users=[]}},viewOrderDetails(e){this.$router.push({name:"OrderDetail",params:{id:e.id}})},async cancelOrder(e){if(confirm("ç¢ºå®šè¦å–æ¶ˆé€™å€‹è¨‚å–®ï¼Ÿ"))try{await C.A.orderAPI.updateOrder(e.id,{status:"cancelled"}),e.status="cancelled",alert("è¨‚å–®å·²æˆåŠŸå–æ¶ˆã€‚")}catch(t){alert("å–æ¶ˆè¨‚å–®æ™‚å‡ºéŒ¯")}},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},formatCurrency(e){return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},formatStatus(e){const t={pending:"å¾…ç¢ºèª",shipped:"å·²ç™¼è²¨",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"};return t[e]||"æœªçŸ¥ç‹€æ…‹"},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("zh-TW",t)},filterOrders(){this.currentPage=1},getUserName(e){const t=this.users.find((t=>t.id==e));return t?t.name:"æœªçŸ¥ç”¨æˆ¶"},getStatusBadgeClass(e){const t={pending:"badge bg-warning text-dark",shipped:"badge bg-info text-white",completed:"badge bg-success text-white",cancelled:"badge bg-danger text-white"};return t[e]||"badge bg-secondary"},getUserInitials(e){const t=this.users.find((t=>t.id===e));return t?t.name.substring(0,2).toUpperCase():"??"},showNotification(e,t="success"){this.toastMessage=e,this.toastType=t,this.showToast=!0,setTimeout((()=>{this.showToast=!1}),3e3)}},async mounted(){try{await this.fetchOrders(),await this.fetchUsers()}catch(e){alert("ç²å–è¨‚å–®æˆ–ç”¨æˆ¶æ•¸æ“šæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},watch:{searchQuery(){this.debouncedFilter()},selectedStatus(){this.debouncedFilter()}}};const pn=(0,l.A)(un,[["render",ln],["__scopeId","data-v-50128844"]]);var mn=pn;const hn={class:"container mt-5"},gn={class:"mb-3"},kn={class:"mb-3"},fn={class:"mb-3"},bn={class:"mb-3"},vn={class:"mb-3"},Ln={key:0,class:"text-danger"},yn={class:"mb-3"},wn={key:0,class:"text-danger"},Cn={class:"mb-3"},In={key:0},An=["src"];function Pn(e,t,a,s,r,o){const n=(0,i.g2)("Multiselect");return(0,i.uX)(),(0,i.CE)("div",hn,[t[17]||(t[17]=(0,i.Lk)("h2",{class:"text-center mb-4"},"æ–°å¢å•†å“",-1)),(0,i.Lk)("form",{onSubmit:t[7]||(t[7]=(0,p.D$)(((...e)=>s.createProduct&&s.createProduct(...e)),["prevent"]))},[(0,i.Lk)("div",gn,[t[8]||(t[8]=(0,i.Lk)("label",{for:"productName",class:"form-label"},"å•†å“åç¨±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.productForm.name=e),class:"form-control",required:""},null,512),[[p.Jo,s.productForm.name]])]),(0,i.Lk)("div",kn,[t[9]||(t[9]=(0,i.Lk)("label",{for:"description",class:"form-label"},"å•†å“æè¿°",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.productForm.description=e),class:"form-control",required:""},null,512),[[p.Jo,s.productForm.description]])]),(0,i.Lk)("div",fn,[t[10]||(t[10]=(0,i.Lk)("label",{for:"price",class:"form-label"},"åƒ¹æ ¼",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>s.productForm.price=e),class:"form-control",required:""},null,512),[[p.Jo,s.productForm.price]])]),(0,i.Lk)("div",bn,[t[11]||(t[11]=(0,i.Lk)("label",{for:"stock",class:"form-label"},"åº«å­˜",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>s.productForm.stock=e),class:"form-control",required:""},null,512),[[p.Jo,s.productForm.stock]])]),(0,i.Lk)("div",vn,[t[12]||(t[12]=(0,i.Lk)("label",{for:"brand_id",class:"form-label"},"é¸æ“‡å“ç‰Œ",-1)),(0,i.bF)(n,{modelValue:s.productForm.brand_id,"onUpdate:modelValue":t[4]||(t[4]=e=>s.productForm.brand_id=e),options:s.brands,searchable:!0,taggable:!0,label:"name",key:"id",valueProp:"id",placeholder:"æœå°‹æˆ–é¸æ“‡å“ç‰Œ",onSelect:s.handleBrandSelect,onTag:s.createNewBrand},null,8,["modelValue","options","onSelect","onTag"]),!s.productForm.brand_id&&s.formSubmitted?((0,i.uX)(),(0,i.CE)("span",Ln,"è«‹é¸æ“‡å“ç‰Œ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",yn,[t[13]||(t[13]=(0,i.Lk)("label",{for:"tag_ids",class:"form-label"},"é¸æ“‡æ¨™ç±¤",-1)),(0,i.bF)(n,{modelValue:s.productForm.tag_ids,"onUpdate:modelValue":t[5]||(t[5]=e=>s.productForm.tag_ids=e),options:s.tags,searchable:!0,taggable:!0,label:"name",multiple:!0,key:"id",valueProp:"id",placeholder:"æœå°‹æˆ–é¸æ“‡æ¨™ç±¤",onSelect:s.handleTagSelect,onTag:s.createNewTag},null,8,["modelValue","options","onSelect","onTag"]),!s.productForm.tag_ids?.length&&s.formSubmitted?((0,i.uX)(),(0,i.CE)("span",wn,"è«‹é¸æ“‡è‡³å°‘ä¸€å€‹æ¨™ç±¤")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Cn,[t[14]||(t[14]=(0,i.Lk)("label",{for:"productImage",class:"form-label"},"åœ–ç‰‡ä¸Šå‚³",-1)),(0,i.Lk)("input",{type:"file",class:"form-control",id:"productImage",onChange:t[6]||(t[6]=(...e)=>s.selectImage&&s.selectImage(...e)),accept:"image/*"},null,32)]),s.productForm.imagePreview?((0,i.uX)(),(0,i.CE)("div",In,[t[15]||(t[15]=(0,i.Lk)("h5",null,"åœ–ç‰‡é è¦½",-1)),(0,i.Lk)("img",{src:s.productForm.imagePreview,alt:"å•†å“åœ–ç‰‡",style:{"max-width":"200px"}},null,8,An)])):(0,i.Q3)("",!0),t[16]||(t[16]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},"æ–°å¢å•†å“",-1))],32)])}a(4603),a(7566),a(8721);var _n=a(8074),En={name:"CreateProduct",components:{Multiselect:_n.Ay},setup(){const e=(0,r.rd)(),t=(0,V.Kh)({name:"",description:"",price:0,stock:0,brand_id:null,tag_ids:[],created_at:(new Date).toISOString().split("T")[0],imageFile:null,imagePreview:""}),a=()=>t.name.trim()?t.description.trim()?t.price<=0?(alert("åƒ¹æ ¼å¿…å¡«ä¸”éœ€å¤§æ–¼ 0"),!1):t.stock<=0?(alert("åº«å­˜å¿…å¡«ä¸”éœ€å¤§æ–¼ 0"),!1):t.brand_id?!!t.tag_ids.length||(alert("è«‹é¸æ“‡è‡³å°‘ä¸€å€‹æ¨™ç±¤"),!1):(alert("è«‹é¸æ“‡å“ç‰Œ"),!1):(alert("å•†å“æè¿°å¿…å¡«"),!1):(alert("å•†å“åç¨±å¿…å¡«"),!1),s=(0,V.KR)([]),o=(0,V.KR)([]),n=(0,V.KR)(!1),l=async()=>{try{const e=await C.A.brandAPI.getAllBrands();s.value=Array.isArray(e)?e:[]}catch(e){ea(e,"è®€å–å“ç‰Œè³‡æ–™æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},c=async()=>{try{const e=await C.A.tagAPI.getAllTags();o.value=Array.isArray(e)?e:[]}catch(e){ea(e,"è®€å–æ¨™ç±¤è³‡æ–™æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},d=e=>{t.brand_id=e},u=e=>{Array.isArray(e)?t.tag_ids=e:t.tag_ids=[e].filter(Boolean)},p=async e=>{try{const a=await C.A.brandAPI.createBrand(e),r=a.data;s.value.push(r),t.brand_id=r.id,alert("æ–°å“ç‰Œå·²æ·»åŠ ")}catch(a){ea(a,"å‰µå»ºæ–°å“ç‰Œæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},m=async e=>{try{const a=await C.A.tagAPI.createTag(e),s=a.data;o.value.push(s),t.tag_ids.push(s.id),alert("æ–°æ¨™ç±¤å·²å¢åŠ ")}catch(a){ea(a,"å‰µå»ºæ–°æ¨™ç±¤æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}};(0,i.sV)((()=>{l(),c()}));const h=async()=>{if(n.value=!0,a())if(t.brand_id&&t.tag_ids&&0!==t.tag_ids.length)try{const a=new FormData;let s=[];Array.isArray(t.tag_ids)&&(s=t.tag_ids.map((e=>"object"===typeof e?e.id:e))),a.append("name",t.name),a.append("description",t.description),a.append("price",String(t.price)),a.append("stock",String(t.stock)),a.append("brand_id","object"===typeof t.brand_id?t.brand_id.id:t.brand_id),a.append("tag_ids",JSON.stringify(s)),a.append("created_at",t.created_at),t.imageFile&&a.append("image",t.imageFile);await C.A.productAPI.createProduct(a);alert("å•†å“æ–°å¢æˆåŠŸ"),e.push("/admin/products")}catch(s){ea(s,"æ–°å¢å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}finally{n.value=!1}else alert("è«‹é¸æ“‡å“ç‰Œå’Œè‡³å°‘ä¸€å€‹æ¨™ç±¤")},g=e=>{const a=e.target.files[0];if(a&&!a.type.startsWith("image/"))return alert("è«‹ä¸Šå‚³æ­£ç¢ºçš„åœ–ç‰‡æ ¼å¼"),void(e.target.value="");t.imageFile=a,t.imagePreview=URL.createObjectURL(a)};return{productForm:t,brands:s,tags:o,formSubmitted:n,createProduct:h,selectImage:g,handleBrandSelect:d,handleTagSelect:u,validateForm:a,createNewBrand:p,createNewTag:m}}};const Fn=(0,l.A)(En,[["render",Pn],["__scopeId","data-v-0117b6ca"]]);var xn=Fn;const Sn={class:"container mt-5"},On={key:0,class:"text-center my-5"},Un={key:0,class:"text-center mb-4"},Rn=["src"],Tn={class:"mb-3"},Dn={class:"mb-3"},Mn={class:"input-group"},$n=["readonly"],Nn={class:"mb-3"},Xn={class:"input-group"},qn=["readonly"],Vn={class:"mb-3"},Wn={class:"input-group"},Bn=["readonly"],Kn={class:"mb-3"},Jn={class:"input-group"},Qn=["readonly"],jn={class:"mb-3"},zn={class:"input-group"},Hn={class:"mb-3"},Gn={class:"input-group"},Zn={class:"custom-tag"},Yn=["onClick"];function el(e,t,a,s,r,o){const n=(0,i.g2)("Multiselect");return(0,i.uX)(),(0,i.CE)("div",Sn,[t[23]||(t[23]=(0,i.Lk)("h2",{class:"text-center"},"ç·¨è¼¯ç”¢å“è³‡è¨Š",-1)),s.isLoading?((0,i.uX)(),(0,i.CE)("div",On,t[14]||(t[14]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"è¼‰å…¥ä¸­...")],-1)]))):(0,i.Q3)("",!0),s.isLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[13]||(t[13]=(0,p.D$)(((...e)=>s.updateProduct&&s.updateProduct(...e)),["prevent"]))},[s.productForm.imagePreview?((0,i.uX)(),(0,i.CE)("div",Un,[(0,i.Lk)("img",{src:s.productForm.imagePreview,alt:"Product Image",class:"product-image"},null,8,Rn)])):(0,i.Q3)("",!0),(0,i.Lk)("div",Tn,[t[15]||(t[15]=(0,i.Lk)("label",{for:"productImage",class:"form-label"},"ç”¢å“åœ–ç‰‡",-1)),(0,i.Lk)("input",{type:"file",id:"productImage",class:"form-control",onChange:t[0]||(t[0]=(...e)=>s.selectImage&&s.selectImage(...e))},null,32)]),(0,i.Lk)("div",Dn,[t[16]||(t[16]=(0,i.Lk)("label",{for:"productName",class:"form-label"},"å•†å“åç¨±",-1)),(0,i.Lk)("div",Mn,[(0,i.bo)((0,i.Lk)("input",{type:"text",id:"productName",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.productForm.name=e),readonly:!s.editableFields.name,required:""},null,8,$n),[[p.Jo,s.productForm.name]]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=e=>s.toggleEdit("name"))},(0,u.v_)(s.editableFields.name?"å®Œæˆ":"ä¿®æ”¹"),1)])]),(0,i.Lk)("div",Nn,[t[17]||(t[17]=(0,i.Lk)("label",{for:"productPrice",class:"form-label"},"åƒ¹æ ¼",-1)),(0,i.Lk)("div",Xn,[(0,i.bo)((0,i.Lk)("input",{type:"number",id:"productPrice",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>s.productForm.price=e),readonly:!s.editableFields.price,required:""},null,8,qn),[[p.Jo,s.productForm.price]]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[4]||(t[4]=e=>s.toggleEdit("price"))},(0,u.v_)(s.editableFields.price?"å®Œæˆ":"ä¿®æ”¹"),1)])]),(0,i.Lk)("div",Vn,[t[18]||(t[18]=(0,i.Lk)("label",{for:"productStock",class:"form-label"},"åº«å­˜",-1)),(0,i.Lk)("div",Wn,[(0,i.bo)((0,i.Lk)("input",{type:"number",id:"productStock",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>s.productForm.stock=e),readonly:!s.editableFields.stock,required:""},null,8,Bn),[[p.Jo,s.productForm.stock]]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[6]||(t[6]=e=>s.toggleEdit("stock"))},(0,u.v_)(s.editableFields.stock?"å®Œæˆ":"ä¿®æ”¹"),1)])]),(0,i.Lk)("div",Kn,[t[19]||(t[19]=(0,i.Lk)("label",{for:"productDescription",class:"form-label"},"æè¿°",-1)),(0,i.Lk)("div",Jn,[(0,i.bo)((0,i.Lk)("textarea",{type:"number",id:"productDescription",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.productForm.description=e),readonly:!s.editableFields.description,required:""},null,8,Qn),[[p.Jo,s.productForm.description]]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[8]||(t[8]=e=>s.toggleEdit("description"))},(0,u.v_)(s.editableFields.description?"å®Œæˆ":"ä¿®æ”¹"),1)])]),(0,i.Lk)("div",jn,[t[20]||(t[20]=(0,i.Lk)("label",{for:"productBrand",class:"form-label"},"å» ç‰Œ",-1)),(0,i.Lk)("div",zn,[(0,i.bF)(n,{modelValue:s.productForm.brand_id,"onUpdate:modelValue":t[9]||(t[9]=e=>s.productForm.brand_id=e),options:s.brands,searchable:!0,label:"name","value-prop":"id",placeholder:"è«‹é¸æ“‡å» ç‰Œ",disabled:!s.editableFields.brand_id,required:""},null,8,["modelValue","options","disabled"]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[10]||(t[10]=e=>s.toggleEdit("brand_id"))},(0,u.v_)(s.editableFields.brand_id?"å®Œæˆ":"ä¿®æ”¹"),1)])]),(0,i.Lk)("div",Hn,[t[21]||(t[21]=(0,i.Lk)("label",{for:"productTags",class:"form-label"},"æ¨™ç±¤",-1)),(0,i.Lk)("div",Gn,[(0,i.bF)(n,{modelValue:s.productForm.tag_ids,"onUpdate:modelValue":t[11]||(t[11]=e=>s.productForm.tag_ids=e),options:s.tags,label:"name","value-prop":"id",placeholder:"è«‹é¸æ“‡æ¨™ç±¤",disabled:!s.editableFields.tag_ids,required:"",multiple:""},{tag:(0,i.k6)((({option:e,remove:t})=>[(0,i.Lk)("span",Zn,[(0,i.eW)((0,u.v_)(e.name)+" ",1),(0,i.Lk)("button",{type:"button",onClick:a=>t(e)}," X ",8,Yn)])])),_:1},8,["modelValue","options","disabled"]),(0,i.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[12]||(t[12]=e=>s.toggleEdit("tag_ids"))},(0,u.v_)(s.editableFields.tag_ids?"å®Œæˆ":"ä¿®æ”¹"),1)])]),t[22]||(t[22]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},"æ›´æ–°ç”¢å“",-1))],32))])}var tl=a(4014),al={name:"EditProduct",components:{Multiselect:tl.A},setup(){const e=(0,r.rd)(),t=(0,r.lq)(),a=t.params.id,s=(0,V.KR)(!0),o=(0,V.Kh)({name:!1,price:!1,stock:!1,description:!1,brand_id:!1,tag_ids:!1}),n=e=>{o[e]=!o[e]},l=(0,V.Kh)({name:"",description:"",price:0,stock:0,brand_id:null,tag_ids:[],imageFile:null,imagePreview:""}),c=(0,V.KR)([]),d=(0,V.KR)([]),u=async()=>{try{s.value=!0;const[e,t,r]=await Promise.all([axios.get(`/api/products/${a}`),axios.get("/api/brands"),axios.get("/api/tags")]);c.value=t.data,d.value=r.data;const i=e.data;l.name=i.name,l.description=i.description,l.price=i.price,l.stock=i.stock,l.imagePreview=i.image?`/${i.image}`:"",i.brand_id&&(l.brand_id=Number(i.brand_id)),i.tag_ids&&Array.isArray(i.tag_ids)&&(l.tag_ids=i.tag_ids.map((e=>Number(e))))}catch(e){alert("åŠ è¼‰å•†å“è¨Šæ¯æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}finally{s.value=!1}},p=async()=>{try{if(!l.name)return void alert("è«‹å¡«å¯«å•†å“åç¨±");if(!l.description)return void alert("è«‹å¡«å¯«å•†å“æè¿°");if(!l.price||isNaN(l.price))return void alert("è«‹å¡«å¯«æœ‰æ•ˆçš„å•†å“åƒ¹æ ¼");if(!l.stock||isNaN(l.stock))return void alert("è«‹å¡«å¯«æœ‰æ•ˆçš„å•†å“åº«å­˜");if(!l.brand_id||isNaN(l.brand_id))return void alert("è«‹é¸æ“‡ä¸€å€‹æœ‰æ•ˆçš„å» ç‰Œ");const t=new FormData;t.append("name",l.name),t.append("description",l.description),t.append("price",l.price),t.append("stock",l.stock),t.append("brand_id",l.brand_id),t.append("tag_ids",JSON.stringify(l.tag_ids)),l.imageFile&&t.append("image",l.imageFile),await ApiService.productAPI.updateProduct(a,t),alert("æ›´æ–°å•†å“æˆåŠŸï¼"),e.push({name:"AdminProducts"})}catch(t){alert("æ›´æ–°å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},m=e=>{const t=e.target.files[0];t&&(l.imageFile=t,l.imagePreview=URL.createObjectURL(t))};return(0,i.sV)((async()=>{await u()})),{productForm:l,brands:c,tags:d,isLoading:s,editableFields:o,toggleEdit:n,updateProduct:p,selectImage:m}}};const sl=(0,l.A)(al,[["render",el]]);var rl=sl;function il(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("h5",null,"AdminContact")}var ol={name:"AdminContact"};const nl=(0,l.A)(ol,[["render",il]]);var ll=nl;const cl={class:"order-detail container mt-5"},dl={key:0},ul={class:"order-info mb-4"},pl={class:"mb-3"},ml={class:"table table-bordered"},hl={key:1};function gl(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",cl,[t[13]||(t[13]=(0,i.Lk)("h2",{class:"text-center"},"è¨‚å–®è©³æƒ…",-1)),r.order?((0,i.uX)(),(0,i.CE)("div",dl,[(0,i.Lk)("div",ul,[(0,i.Lk)("p",null,[t[3]||(t[3]=(0,i.Lk)("strong",null,"è¨‚å–®è™Ÿï¼š",-1)),(0,i.eW)((0,u.v_)(r.order.id),1)]),(0,i.Lk)("p",null,[t[4]||(t[4]=(0,i.Lk)("strong",null,"æœƒå“¡ç·¨è™Ÿï¼š",-1)),(0,i.eW)((0,u.v_)(r.order.user_id),1)]),(0,i.Lk)("p",null,[t[5]||(t[5]=(0,i.Lk)("strong",null,"ç”¨æˆ¶åï¼š",-1)),(0,i.eW)((0,u.v_)(r.userName),1)]),(0,i.Lk)("p",null,[t[6]||(t[6]=(0,i.Lk)("strong",null,"å»ºç«‹æ—¥æœŸï¼š",-1)),(0,i.eW)((0,u.v_)(o.formatDate(r.order.created_at)),1)]),(0,i.Lk)("p",null,[t[7]||(t[7]=(0,i.Lk)("strong",null,"ç¸½é‡‘é¡ï¼š",-1)),(0,i.eW)((0,u.v_)(o.formatCurrency(r.order.total)),1)]),(0,i.Lk)("div",pl,[t[9]||(t[9]=(0,i.Lk)("label",{for:"orderStatus",class:"form-label"},[(0,i.Lk)("strong",null,"è¨‚å–®ç‹€æ…‹ï¼š")],-1)),(0,i.bo)((0,i.Lk)("select",{id:"orderStatus","onUpdate:modelValue":t[0]||(t[0]=e=>r.order.status=e),class:"form-select",onChange:t[1]||(t[1]=(...e)=>o.updateOrderStatus&&o.updateOrderStatus(...e))},t[8]||(t[8]=[(0,i.Lk)("option",{value:"pending"},"å¾…ç¢ºèª",-1),(0,i.Lk)("option",{value:"shipped"},"å·²ç™¼è²¨",-1),(0,i.Lk)("option",{value:"completed"},"å·²å®Œæˆ",-1),(0,i.Lk)("option",{value:"cancelled"},"å·²å–æ¶ˆ",-1)]),544),[[p.u1,r.order.status]])])]),t[11]||(t[11]=(0,i.Lk)("h4",null,"å•†å“åˆ—è¡¨",-1)),(0,i.Lk)("table",ml,[t[10]||(t[10]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"å•†å“åç¨±"),(0,i.Lk)("th",null,"æ•¸é‡"),(0,i.Lk)("th",null,"å–®åƒ¹"),(0,i.Lk)("th",null,"å°è¨ˆ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.order.items,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.productId},[(0,i.Lk)("td",null,(0,u.v_)(e.product_name),1),(0,i.Lk)("td",null,(0,u.v_)(e.quantity),1),(0,i.Lk)("td",null,(0,u.v_)(o.formatCurrency(e.price)),1),(0,i.Lk)("td",null,(0,u.v_)(o.formatCurrency(e.price*e.quantity)),1)])))),128))])]),(0,i.Lk)("button",{class:"btn btn-secondary mt-3",onClick:t[2]||(t[2]=(...e)=>o.goBack&&o.goBack(...e))},"è¿”å›")])):((0,i.uX)(),(0,i.CE)("div",hl,t[12]||(t[12]=[(0,i.Lk)("p",null,"æ­£åœ¨åŠ è¼‰è¨‚å–®è©³æƒ…...",-1)])))])}var kl={name:"OrderDetail",props:["id"],data(){return{order:null,userName:"",store:(0,w.Pj)()}},methods:{async fetchOrderDetails(e){try{const t=await C.A.orderAPI.getOrderById(e);this.order=t||t.data,await this.fetchUserName(this.order.user_id)}catch(t){this.store.dispatch("notification/showNotification",{type:"error",message:"åŠ è¼‰è¨‚å–®è©³æƒ…æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å€™å†è©¦ï¼",timeout:2e3})}},async fetchUserName(e){try{const t=await C.A.userAPI.getUserInfo(e),a=t.data||t;this.userName=a.name||"æœªçŸ¥ç”¨æˆ¶"}catch(t){this.userName="æœªçŸ¥ç”¨æˆ¶"}},formatCurrency(e){return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("zh-TW",t)},async updateOrderStatus(){if(this.order)try{const e=await C.A.orderAPI.updateOrder(this.order.id,{status:this.order.status});if(!e.success)throw new Error(e.message||"è¨‚å–®ç‹€æ…‹æ›´æ–°å¤±æ•—");this.order={...this.order,...e.data},this.store.dispatch("notifications/showNotification",{message:"è¨‚å–®ç‹€æ…‹å·²æ›´æ–°",type:"success",timeout:3e3})}catch(e){this.store.dispatch("notifications/showNotification",{type:"error",message:"æ›´æ–°è¨‚å–®ç‹€æ…‹æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼",timeout:2e3})}},goBack(){this.$router.go(-1)}},mounted(){const e=this.id||this.$route.params.id;this.fetchOrderDetails(e)}};const fl=(0,l.A)(kl,[["render",gl],["__scopeId","data-v-abc0d824"]]);var bl=fl;const vl={class:"carousel-management container mt-5"},Ll={class:"image-grid mb-4"},yl={class:"image-wrapper"},wl=["src","onLoad","onError"],Cl={class:"image-overlay"},Il={class:"action-buttons"},Al=["onClick"],Pl=["onClick"],_l={class:"image-status mt-2"},El={class:"upload-section p-4 bg-light rounded-3"},Fl={key:0,class:"preview-section mt-4"},xl={class:"preview-container"},Sl=["src"],Ol={class:"preview-actions mt-3"};function Ul(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",vl,[t[12]||(t[12]=(0,i.Lk)("div",{class:"dashboard-header mb-4"},[(0,i.Lk)("h2",{class:"text-primary fw-bold"},"è¼ªæ’­åœ–ç‰‡ç®¡ç†"),(0,i.Lk)("p",{class:"text-muted"},"ç®¡ç†ç¶²ç«™é¦–é è¼ªæ’­åœ–ç‰‡çš„é¡¯ç¤ºèˆ‡æ’åº")],-1)),(0,i.Lk)("div",Ll,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.carouselImages,((a,s)=>((0,i.uX)(),(0,i.CE)("div",{key:a.id,class:"image-card"},[(0,i.Lk)("div",yl,[(0,i.Lk)("img",{src:e.$getImageUrl(a.url,"carousel"),onLoad:e=>o.onImgLoad(e,s),onError:e=>o.onImgError(e,s),class:"carousel-image",alt:"è¼ªæ’­åœ–ç‰‡"},null,40,wl),(0,i.Lk)("div",Cl,[(0,i.Lk)("div",Il,[(0,i.Lk)("button",{class:(0,u.C4)(["btn btn-light btn-sm me-2",{active:a.visible}]),onClick:e=>o.toggleImageVisibility(a)},[(0,i.Lk)("i",{class:(0,u.C4)(a.visible?"fas fa-eye":"fas fa-eye-slash")},null,2),(0,i.eW)(" "+(0,u.v_)(a.visible?"éš±è—":"é¡¯ç¤º"),1)],10,Al),(0,i.Lk)("button",{class:"btn btn-danger btn-sm",onClick:e=>o.deleteCarouselImage(a.id)},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-trash-alt me-1"},null,-1),(0,i.eW)(" åˆªé™¤ ")]),8,Pl)])])]),(0,i.Lk)("div",_l,[(0,i.Lk)("span",{class:(0,u.C4)(["status-badge",a.visible?"status-active":"status-inactive"])},(0,u.v_)(a.visible?"é¡¯ç¤ºä¸­":"å·²éš±è—"),3)])])))),128))]),(0,i.Lk)("div",El,[t[11]||(t[11]=(0,i.Lk)("h4",{class:"mb-3"},[(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt me-2"}),(0,i.eW)(" ä¸Šå‚³æ–°åœ–ç‰‡ ")],-1)),(0,i.Lk)("div",{class:(0,u.C4)(["upload-area",{dragging:r.isDragging}]),onDragover:t[2]||(t[2]=(0,p.D$)((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=(0,p.D$)(((...e)=>o.handleFileDrop&&o.handleFileDrop(...e)),["prevent"]))},[(0,i.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>o.handleFileSelect&&o.handleFileSelect(...e)),accept:"image/*",ref:"fileInput",class:"d-none"},null,544),(0,i.Lk)("div",{class:"upload-placeholder",onClick:t[1]||(t[1]=t=>e.$refs.fileInput.click())},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-plus-circle fs-2 mb-2"},null,-1),(0,i.Lk)("p",{class:"mb-1"},"é»æ“Šæˆ–æ‹–æ›³åœ–ç‰‡è‡³æ­¤è™•ä¸Šå‚³",-1),(0,i.Lk)("small",{class:"text-muted"},"æ”¯æ´ JPGã€PNGã€GIF æ ¼å¼ï¼Œæª”æ¡ˆå¤§å°ä¸è¶…é 5MB",-1)]))],34),r.previewUrl?((0,i.uX)(),(0,i.CE)("div",Fl,[t[10]||(t[10]=(0,i.Lk)("h5",{class:"mb-3"},"é è¦½åœ–ç‰‡",-1)),(0,i.Lk)("div",xl,[(0,i.Lk)("img",{src:r.previewUrl,alt:"é è¦½åœ–ç‰‡",class:"preview-image"},null,8,Sl),(0,i.Lk)("div",Ol,[(0,i.Lk)("button",{class:"btn btn-primary me-2",onClick:t[4]||(t[4]=(...e)=>o.confirmUpload&&o.confirmUpload(...e))},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-check me-1"},null,-1),(0,i.eW)("ç¢ºèªä¸Šå‚³ ")])),(0,i.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=(...e)=>o.cancelUpload&&o.cancelUpload(...e))},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,i.eW)("å–æ¶ˆ ")]))])])])):(0,i.Q3)("",!0)]),r.showToast?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,u.C4)(["toast-notification",`toast-${r.toastType}`])},(0,u.v_)(r.toastMessage),3)):(0,i.Q3)("",!0)])}var Rl={name:"AdminCarouselImages",data(){return{carouselImages:[],selectedFile:null,previewUrl:"",isDragging:!1,showToast:!1,toastMessage:"",toastType:"success"}},async mounted(){await this.loadCarouselImages()},methods:{async loadCarouselImages(){try{const e=await C.A.carouselAPI.getCarouselImages();this.carouselImages=e,this.carouselImages.forEach(((e,t)=>{}))}catch(e){ea(e,"åŠ è¼‰è¼ªæ’­åœ–ç‰‡å¤±æ•—")}},handleFileSelect(e){const t=e.target.files[0];if(t){const e=["image/jpeg","image/png","image/gif"],a=5242880;if(!e.includes(t.type))return void alert("åƒ…æ”¯æ´JPEG, PNG, GIF æ ¼å¼çš„åœ–ç‰‡ï¼");if(t.size>a)return void alert("åœ–ç‰‡è¶…å‡º5MBçš„ä¸Šé™ï¼");this.selectedFile=t,this.previewUrl=URL.createObjectURL(t)}},async confirmUpload(){if(!this.selectedFile)return void alert("æ²’æœ‰é¸æ“‡ä»»ä½•æ–‡ä»¶ï¼");const e=new FormData;e.append("image",this.selectedFile);try{const t=await C.A.carouselAPI.uploadCarouselImages(e);this.carouselImages.push(t),alert("åœ–ç‰‡ä¸Šå‚³æˆåŠŸ"),this.resetUpload()}catch(t){ea(t,"åœ–ç‰‡ä¸Šå‚³å¤±æ•—")}},cancelUpload(){this.resetUpload()},resetUpload(){this.selectedFile=null,this.previewUrl="",this.$refs.fileInput.value=""},async deleteCarouselImage(e){if(confirm("ç¢ºå®šè¦åˆªé™¤é€™å¼µåœ–ç‰‡å—ï¼Ÿ"))try{await C.A.carouselAPI.deleteCarouselImage(e),this.carouselImages=this.carouselImages.filter((t=>t.id!==e)),alert("åœ–ç‰‡å·²åˆªé™¤ã€‚")}catch(t){ea(t,"åœ–ç‰‡åˆªé™¤å¤±æ•—")}},async toggleImageVisibility(e){const t=!e.visible;try{const a=await C.A.carouselAPI.updateCarouselImage(e.id,{visible:t});e.visible=a.visible,alert(`åœ–ç‰‡å·²${t?"é¡¯ç¤º":"éš±è—"}ã€‚`)}catch(a){ea(a,"æ›´æ–°åœ–ç‰‡ç‹€æ…‹å¤±æ•—")}},onImgLoad(e,t){},onImgError(e,t){e.target.src="/img/wrong.png"},handleFileDrop(e){this.isDragging=!1;const t=e.dataTransfer.files[0];t&&this.handleFile(t)},showNotification(e,t="success"){this.toastMessage=e,this.toastType=t,this.showToast=!0,setTimeout((()=>{this.showToast=!1}),3e3)}}};const Tl=(0,l.A)(Rl,[["render",Ul],["__scopeId","data-v-ece2d992"]]);var Dl=Tl;const Ml={class:"special-offers-dashboard container mt-5"},$l={class:"d-flex justify-content-end mb-3"},Nl={class:"accordion",id:"specialOffersAccordion"},Xl={class:"accordion-item"},ql={id:"collapseSpecialOffers",class:"accordion-collapse collapse show","aria-labelledby":"headingSpecialOffers","data-bs-parent":"#specialOffersAccordion"},Vl={class:"accordion-body"},Wl={class:"table"},Bl=["onClick"],Kl=["onClick"],Jl={class:"modal fade",tabindex:"-1",ref:"specialOfferModal"},Ql={class:"modal-dialog"},jl={class:"modal-content"},zl={class:"modal-header"},Hl={class:"modal-title"},Gl={class:"modal-body"},Zl={class:"mb-3"},Yl={key:0,class:"list-group mt-2"},ec=["onClick"],tc={key:1,class:"mt-2"},ac={class:"mb-3"},sc={class:"mb-3"},rc={class:"mb-3"},ic={class:"mb-3"},oc={class:"modal-footer"};function nc(e,t,a,s,r,o){return(0,i.uX)(),(0,i.CE)("div",Ml,[t[19]||(t[19]=(0,i.Lk)("h2",{class:"text-center"},"ç‰¹åƒ¹å•†å“ç®¡ç†",-1)),(0,i.Lk)("div",$l,[(0,i.Lk)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>o.openCreateSpecialOfferModal&&o.openCreateSpecialOfferModal(...e))},"æ–°å¢ç‰¹åƒ¹å•†å“")]),(0,i.Lk)("div",Nl,[(0,i.Lk)("div",Xl,[t[12]||(t[12]=(0,i.Lk)("h2",{class:"accordion-header",id:"headingSpecialOffers"},[(0,i.Lk)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseSpecialOffers","aria-expanded":"true","aria-controls":"collapseSpecialOffers"}," ç‰¹åƒ¹å•†å“ç®¡ç† ")],-1)),(0,i.Lk)("div",ql,[(0,i.Lk)("div",Vl,[(0,i.Lk)("table",Wl,[t[11]||(t[11]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"å•†å“åç¨±"),(0,i.Lk)("th",null,"ç‰¹åƒ¹åƒ¹æ ¼"),(0,i.Lk)("th",null,"å€’æ•¸æ™‚é–“ (ç§’)"),(0,i.Lk)("th",null,"å‰µå»ºæ—¥æœŸ"),(0,i.Lk)("th",null,"æ“ä½œ")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.specialOffers,((e,t)=>((0,i.uX)(),(0,i.CE)("tr",{key:e?.id},[(0,i.Lk)("td",null,(0,u.v_)(o.getProductName(e.product_id)),1),(0,i.Lk)("td",null,(0,u.v_)(e.price),1),(0,i.Lk)("td",null,(0,u.v_)(o.formatTime(e.countdown)),1),(0,i.Lk)("td",null,(0,u.v_)(o.formatDate(e.created_at)),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn btn-warning btn-sm me-2",onClick:e=>o.openEditSpecialOfferModal(t)},"ç·¨è¼¯",8,Bl),(0,i.Lk)("button",{class:"btn btn-danger btn-sm",onClick:a=>o.deleteSpecialOffer(e.id,t)},"åˆªé™¤",8,Kl)])])))),128))])])])])])]),(0,i.Lk)("div",Jl,[(0,i.Lk)("div",Ql,[(0,i.Lk)("div",jl,[(0,i.Lk)("div",zl,[(0,i.Lk)("h5",Hl,(0,u.v_)(r.isEditing?"ç·¨è¼¯ç‰¹åƒ¹å•†å“":"æ–°å¢ç‰¹åƒ¹å•†å“"),1),(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>o.closeSpecialOfferModal&&o.closeSpecialOfferModal(...e))})]),(0,i.Lk)("div",Gl,[(0,i.Lk)("div",Zl,[t[14]||(t[14]=(0,i.Lk)("label",{for:"productSelect",class:"form-label"},"æœå°‹å•†å“åç¨±",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"productSearch",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>r.productSearchKeyword=e),onInput:t[3]||(t[3]=(...t)=>e.debouncedSearchProducts&&e.debouncedSearchProducts(...t)),required:""},null,544),[[p.Jo,r.productSearchKeyword]]),r.searchResults&&r.searchResults.length>0?((0,i.uX)(),(0,i.CE)("ul",Yl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.searchResults,(e=>((0,i.uX)(),(0,i.CE)("li",{class:"list-group-item list-group-item-action",key:e.id,onClick:t=>o.selectProduct(e)},(0,u.v_)(e.name),9,ec)))),128))])):(0,i.Q3)("",!0),r.selectedProduct?((0,i.uX)(),(0,i.CE)("div",tc,[t[13]||(t[13]=(0,i.Lk)("strong",null,"å·²é¸æ“‡å•†å“ï¼š",-1)),(0,i.eW)((0,u.v_)(r.selectedProduct.name)+" ",1),(0,i.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger ms-2",onClick:t[4]||(t[4]=(...e)=>o.clearSelectedProduct&&o.clearSelectedProduct(...e))},"ç§»é™¤")])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ac,[t[15]||(t[15]=(0,i.Lk)("label",{for:"priceInput",class:"form-label"},"ç‰¹åƒ¹åƒ¹æ ¼",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"priceInput","onUpdate:modelValue":t[5]||(t[5]=e=>r.specialOfferForm.price=e),class:"form-control",placeholder:"è«‹è¼¸å…¥ç‰¹åƒ¹åƒ¹æ ¼",required:""},null,512),[[p.Jo,r.specialOfferForm.price]])]),(0,i.Lk)("div",sc,[t[16]||(t[16]=(0,i.Lk)("label",{for:"createdAtInput",class:"form-label"},"å‰µå»ºæ—¥æœŸ",-1)),(0,i.bo)((0,i.Lk)("input",{type:"date",id:"createdAtInput","onUpdate:modelValue":t[6]||(t[6]=e=>r.specialOfferForm.created_at=e),class:"form-control",required:""},null,512),[[p.Jo,r.specialOfferForm.created_at]])]),(0,i.Lk)("div",rc,[t[17]||(t[17]=(0,i.Lk)("label",{for:"startTimeInput",class:"form-label"},"é–‹å§‹æ™‚é–“",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local",id:"startTimeInput","onUpdate:modelValue":t[7]||(t[7]=e=>r.specialOfferForm.start_time=e),class:"form-control",required:""},null,512),[[p.Jo,r.specialOfferForm.start_time]])]),(0,i.Lk)("div",ic,[t[18]||(t[18]=(0,i.Lk)("label",{for:"durationInput",class:"form-label"},"æŒçºŒæ™‚é–“ (ç§’)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",id:"durationInput","onUpdate:modelValue":t[8]||(t[8]=e=>r.specialOfferForm.duration=e),class:"form-control",placeholder:"è«‹è¼¸å…¥æŒçºŒæ™‚é–“",required:""},null,512),[[p.Jo,r.specialOfferForm.duration]])])]),(0,i.Lk)("div",oc,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[9]||(t[9]=(...e)=>o.closeSpecialOfferModal&&o.closeSpecialOfferModal(...e))},"å–æ¶ˆ"),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[10]||(t[10]=(...e)=>o.saveSpecialOffer&&o.saveSpecialOffer(...e))},(0,u.v_)(r.isEditing?"ä¿å­˜è®Šæ›´":"æ–°å¢ç‰¹åƒ¹å•†å“"),1)])])])],512)])}var lc={name:"SpecialOffers",data(){return{specialOffers:[],products:[],productMap:{},specialOfferForm:{product_id:"",price:"",start_time:"",duration:"",created_at:(new Date).toISOString().split("T")[0]},isEditing:!1,currentIndex:null,productSearchKeyword:"",searchResults:[],selectedProduct:null,countdownIntervals:[]}},mounted(){this.loadSpecialOffers(),this.loadProducts(),this.debouncedSearchProducts=dn()(this.searchProducts,500)},beforeUnmount(){this.clearCountdownIntervals()},methods:{async loadSpecialOffers(){try{const e=await C.A.specialOffersAPI.getAllSpecialOffers();this.specialOffers=e.map((e=>({...e,countdown:Math.floor((new Date(e.start_time).getTime()+1e3*e.duration-Date.now())/1e3)}))),this.startCountdown()}catch(e){ea(e,"åŠ è¼‰ç‰¹åƒ¹å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},async searchProducts(){const e=this.productSearchKeyword.trim();if(e)try{const t=await C.A.productAPI.searchProducts({keyword:e,page:1,limit:10});this.searchResults=t}catch(t){ea(t,"æœå°‹å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}else this.searchResults=[]},selectProduct(e){this.selectedProduct=e,this.specialOfferForm.product_id=e.id,this.searchResults=[],this.productSearchKeyword=""},clearSelectedProduct(){this.selectedProduct=null,this.specialOfferForm.product_id=""},async loadProducts(){try{const e=await C.A.productAPI.getAllProducts();this.products=e,this.productMap={},e.forEach((e=>{this.productMap[e.id]=e.name}))}catch(e){ea(e,"åŠ è¼‰å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},formatDate(e){const t=new Date(e);return t.toLocaleDateString()},openCreateSpecialOfferModal(){this.isEditing=!1,this.specialOfferForm={id:null,product_id:"",price:0,countdown:0,created_at:""},this.selectedProduct=null,this.productSearchKeyword="",this.searchResults=[],this.$nextTick((()=>{const e=new Yt.aF(this.$refs.specialOfferModal);e.show()}))},async openEditSpecialOfferModal(e){this.isEditing=!0,this.currentIndex=e;const t={...this.specialOffers[e]};this.specialOfferForm=t;try{const e=await C.A.specialOffersAPI.getSpecialOfferById(t.id);this.selectedProduct=e}catch(a){ea(a,"å–å¾—å•†å“è³‡è¨Šæ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}this.productSearchKeyword="",this.searchResults=[],this.$nextTick((()=>{const e=new Yt.aF(this.$refs.specialOfferModal);e.show()}))},getProductName(e){return this.productMap[e]||"æœªçŸ¥å•†å“"},closeSpecialOfferModal(){const e=Yt.aF.getInstance(this.$refs.specialOfferModal);e&&e.hide()},async saveSpecialOffer(){if(this.specialOfferForm.product_id&&void 0!==this.specialOfferForm.price&&""!==this.specialOfferForm.price&&this.specialOfferForm.start_time&&void 0!==this.specialOfferForm.duration&&""!==this.specialOfferForm.duration)try{const e={product_id:parseInt(this.specialOfferForm.product_id),price:parseFloat(this.specialOfferForm.price),start_time:new Date(this.specialOfferForm.start_time).toISOString().slice(0,19).replace("T"," "),duration:parseInt(this.specialOfferForm.duration)};this.isEditing?(await C.A.specialOffersAPI.updateSpecialOfferById(this.editingId,e),alert("ç‰¹åƒ¹å•†å“å·²æ›´æ–°ï¼")):(await C.A.specialOffersAPI.createSpecialOffer(e),alert("ç‰¹åƒ¹å•†å“å·²æ–°å¢ï¼"),this.closeSpecialOfferModal(),this.loadSpecialOffers(),this.$store.dispatch("notifications/showNotification",{type:"success",message:this.isEditing?"ç‰¹åƒ¹å•†å“å·²æ›´æ–°ï¼":"ç‰¹åƒ¹å•†å“å·²æ–°å¢ï¼",timeout:3e3})),this.closeSpecialOfferModal()}catch(e){ea(e,"ä¿å­˜ç‰¹åƒ¹å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼"),this.$store.dispatch("notifications/showNotification",{type:"error",message:"ä¿å­˜å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ï¼",timeout:2e3})}else alert("è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½ï¼")},async deleteSpecialOffer(e,t){if(confirm("ç¢ºå®šè¦åˆªé™¤æ­¤ç‰¹åƒ¹å•†å“ï¼Ÿ"))try{await C.A.specialOffersAPI.deleteSpecialOffer(e),this.specialOffers.splice(t,1),alert("ç‰¹åƒ¹å•†å“å·²åˆªé™¤ï¼")}catch(a){ea(a,"åˆªé™¤ç‰¹åƒ¹å•†å“æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦ï¼")}},startCountdown(){this.clearCountdownIntervals(),this.specialOffers&&0!==this.specialOffers.length&&this.specialOffers.forEach(((e,t)=>{if(e.countdown<=0)return;const a=setInterval((()=>{this.specialOffers[t].countdown>0?this.specialOffers[t].countdown-=1:clearInterval(a)}),1e3);this.countdownIntervals.push(a)}))},clearCountdownIntervals(){this.countdownIntervals.forEach((e=>clearInterval(e))),this.countdownIntervals=[]},formatTime(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=`0${t.getMonth()+1}`.slice(-2),r=`0${t.getDate()}`.slice(-2);return`${a}-${s}-${r}`}}};const cc=(0,l.A)(lc,[["render",nc],["__scopeId","data-v-707c0d6e"]]);var dc=cc;const uc=(0,r.aE)({history:(0,r.Bt)("/ECshop"),routes:[{path:"/",name:"HomePage",component:()=>Promise.resolve().then(a.bind(a,9108))},{path:"/admin",name:"AdminDashBoard",component:mr,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/Products",name:"AdminProducts",component:Pi,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/Users",name:"AdminUsers",component:To,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/Orders",name:"AdminOrders",component:mn,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/Orders/:id(\\d+)",name:"OrderDetail",component:bl,props:!0,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/CreateProduct",name:"CreateProduct",component:xn,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/EditProduct/:id",name:"EditProduct",component:rl,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/AdminContact",name:"AdminContact",component:ll,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/CarouselImages",name:"CarouselImages",component:Dl,meta:{requiresAuth:!0,role:"admin"}},{path:"/admin/SpecialOffers",name:"SpecialOffers",component:dc,meta:{requiresAuth:!0,role:"admin"}},{path:"/ShopCart",name:"ShopCart",component:P,meta:{requiresAuth:!0}},{path:"/ProductsList",name:"ProductsList",component:te},{path:"/MembersPage",name:"MembersPage",component:ia,meta:{requiresAuth:!0}},{path:"/AboutUsPage",name:"AboutUsPage",component:d},{path:"/ContactUs",name:"ContactUs",component:ga},{path:"/SearchResults",name:"SearchResults",component:va},{path:"/UserRegister",name:"UserRegister",component:Ba},{path:"/UserLogin",name:"UserLogin",component:ss},{path:"/ForgotPwd",name:"ForgotPwd",component:ds},{path:"/ProductDetail/:id",name:"ProductDetail",component:Ue},{path:"/Order-Confirmation/:orderId",name:"OrderConfirmation",component:bs},{path:"/:pathMatch(.*)*",redirect:"/"}]});uc.beforeEach((async(e,t,a)=>{const r=!!localStorage.getItem("authToken");JSON.parse(localStorage.getItem("user"));if("/UserLogin"===e.path)return r?a({path:"/"}):a();if(r)try{const t=await s.A.dispatch("auth/checkAuthStatus");return!t&&e.meta.requiresAuth&&a({path:"/UserLogin",query:{redirect:e.fullPath}}),a()}catch(i){return a({path:"/UserLogin",query:{redirect:e.fullPath}})}if(e.meta.requiresAuth&&!r)return a({path:"/UserLogin",query:{redirect:e.fullPath}});a()}));var pc=uc},4300:function(e,t,a){var s=a(5720),r=a(4373);const i={setHeader(e,t){s.A.defaults.headers.common[e]=t},userAPI:{getAllUsers:()=>s.A.get("/users"),login:e=>s.A.post("/users/login",e),register:e=>s.A.post("/users/register",e),getUserInfo:e=>s.A.get(`/users/${e}`),updateUser:(e,t)=>s.A.put(`/users/${e}`,t)},productAPI:{getProducts:e=>s.A.get("/products",{params:e}),getProductById:e=>s.A.get(`/products/${e}`),createProduct:e=>s.A.post("/products",e),updateProduct:(e,t)=>s.A.put(`/products/${e}`,t),deleteProduct:e=>s.A.delete(`/products/${e}`),getAllProducts:()=>s.A.get("/products"),searchProducts:e=>s.A.get("/products/search",{params:e})},tagAPI:{getAllTags:()=>s.A.get("/tags"),createTag:e=>s.A.post("/tags",e),updateTag:(e,t)=>s.A.put(`/tags/${e}`,t),deleteTag:e=>s.A.delete(`/tags/${e}`)},brandAPI:{getAllBrands:()=>s.A.get("/brands"),createBrand:e=>s.A.post("/brands",{name:e}),updateBrand:(e,t)=>s.A.put(`/brands/${e}`,t),deleteBrand:e=>s.A.delete(`/brands/${e}`)},orderAPI:{createOrder:e=>s.A.post("/orders",e),getOrders:()=>s.A.get("/orders"),getOrderById:e=>s.A.get(`/orders/${e}`),updateOrder:(e,t)=>s.A.put(`/orders/${e}`,t)},recipientAPI:{getRecipients:e=>s.A.get("/recipients",{params:{user_id:e}}),updateRecipient:(e,t)=>s.A.put(`/recipients/${e}`,t),addRecipient:e=>s.A.post("/recipients",e),deleteRecipient:e=>s.A.delete(`/recipients/${e}`)},carouselAPI:{getAllCarouselImages:()=>s.A.get("/carousel_images"),getCarouselImages:()=>s.A.get("/carousel_images"),uploadCarouselImages:e=>s.A.post("/carousel_images",e,{headers:{"Content-Type":"multipart/form-data"}}),updateCarouselImage:(e,t)=>s.A.put(`/carousel_images/${e}`,t),deleteCarouselImage:e=>s.A.delete(`/carousel_images/${e}`)},specialOffersAPI:{getAllSpecialOffers:()=>s.A.get("/special_offers"),getSpecialOfferById:e=>s.A.get(`/special_offers/${e}`),createSpecialOffer:e=>s.A.post("/special_offers",e),updateSpecialOffer:(e,t)=>s.A.put(`/special_offers/${e}`,t),deleteSpecialOffer:e=>s.A.delete(`/special_offers/${e}`)},rankingAPI:{getRanking:e=>s.A.get("/sales/ranking",{params:{days:e}})},messageAPI:{createMessage:e=>s.A.post("/message",e)},createCancelToken:()=>{const e=r.A.CancelToken.source();return e}};t.A=i},8029:function(e,t,a){a.d(t,{A:function(){return f}});var s=a(782),r=(a(4114),a(8992),a(2577),a(8872),{namespaced:!0,state:{items:[]},getters:{cartItems:e=>e.items,cartTotal:e=>e.items.reduce(((e,t)=>e+t.price*t.quantity),0),cartItemCount:e=>e.items.reduce(((e,t)=>e+t.quantity),0)},mutations:{addToCart(e,t){const a=Number(t.price);if(isNaN(a)||!t.id||!t.name)return;const s=e.items.find((e=>e.id===t.id));s?s.quantity++:e.items.push({id:t.id,name:t.name,price:a,image:t.image||"/backend/public/img/wrong.png",quantity:1})},removeFromCart(e,t){e.items.splice(t,1)},updateCartItemQuantity(e,{index:t,quantity:a}){e.items[t].quantity=a<1?1:a},clearCart(e){e.items=[]}},actions:{addProductToCart({commit:e},t){t&&t.id&&e("addToCart",t)},removeItemFromCart({commit:e},t){e("removeFromCart",t)},updateItemQuantity({commit:e},t){e("updateCartItemQuantity",t)},clearShoppingCart({commit:e}){e("clearCart")}}}),i=a(4300),o={namespaced:!0,state:{isLoggedIn:!1,user:{role:""},showLoginModal:!1},mutations:{login(e,t){e.isLoggedIn=!0,e.user=t},logout(e){e.isLoggedIn=!1,e.user=null,localStorage.removeItem("user"),localStorage.removeItem("authToken")},setShowLoginModal(e,t){e.showLoginModal=t}},actions:{async login({commit:e,dispatch:t},a){e("logout");try{i.A.setHeader("Authorization","");const t=await i.A.userAPI.login(a);if(!t||!t.data)throw new Error("ä¼ºæœå™¨å›æ‡‰æ ¼å¼éŒ¯èª¤");if(!t.data.token)throw new Error("æœªæ”¶åˆ°èªè­‰ä»¤ç‰Œ");if(!t||!t.data||!t.success)throw new Error("ç™»å…¥å¤±æ•—");const{data:s}=t;if(!s.token)throw new Error("ç„¡æ³•å–å¾—ç”¨æˆ¶è³‡æ–™æˆ– token");const{token:r,id:o,name:n,email:l,role:c,phone:d,address:u}=s,p={id:o,name:n,email:l,role:c,phone:d,address:u};return localStorage.setItem("authToken",r),localStorage.setItem("user",JSON.stringify(p)),e("login",p),i.A.setHeader("Authorization",`Bearer ${r}`),t}catch(s){throw s}},async checkAuthStatus({commit:e}){const t=localStorage.getItem("authToken"),a=JSON.parse(localStorage.getItem("user"));if(!t||!a)return e("logout"),!1;try{i.A.setHeader("Authorization",`Bearer ${t}`);const s=await i.A.userAPI.getUserInfo(a.id);if(s.success)return e("login",a),!0;throw new Error("Token é©—è­‰å¤±æ•—")}catch(s){return e("logout"),!1}},logout({commit:e}){e("logout"),localStorage.removeItem("authToken"),localStorage.removeItem("user")},showLoginModal({commit:e},t){e("setShowLoginModal",t)}},getters:{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user,showLoginModal:e=>e.showLoginModal}};a(7550);const n={notifications:[]},l=3,c=2e3,d={ADD_NOTIFICATION(e,t){if(!t.message||!t.type)return;e.notifications.length>=l&&e.notifications.shift();const a=e.notifications.some((e=>e.message===t.message&&e.type===t.type));a||(e.notifications.length>=l&&e.notifications.shift(),e.notifications.push(t))},REMOVE_NOTIFICATION(e,t){const a=e.notifications.findIndex((e=>e.id===t));-1!==a&&e.notifications.splice(a,1)}},u={showNotification({commit:e},{message:t,type:a,timeout:s=c}){if(!t||!a)return;const r=Date.now(),i={id:r,message:t,type:a};e("ADD_NOTIFICATION",i),s>0&&setTimeout((()=>{e("REMOVE_NOTIFICATION",r)}),s)},removeNotification({commit:e},t){e("REMOVE_NOTIFICATION",t)}};var p={namespaced:!0,state:n,mutations:d,actions:u},m=a(5131);const h=(0,s.y$)({modules:{cart:r,auth:o,notifications:p},plugins:[(0,m.A)()]}),g=localStorage.getItem("authToken"),k=localStorage.getItem("user");g&&k&&h.commit("auth/login",JSON.parse(k));var f=h},5019:function(e,t,a){a.d(t,{V:function(){return s}});const s=(e,t)=>{if(!e)return"/img/wrong.png";const a="https://ecshop-backend.onrender.com/api";switch(t){case"carousel":return`${a}/img/carouselImages/${e.split("/").pop()}`;case"product":return`${a}/img/products/${e.split("/").pop()}`;case"icon":return`${a}/img/icons/${e.split("/").pop()}`;default:return e.startsWith("http")?e:`${a}${e}`}}},5720:function(e,t,a){a(4114);var s=a(4373),r=(a(8029),a(7592));const i=s.A.create({baseURL:"https://ecshop-backend.onrender.com/api",timeout:1e4,withCredentials:!0});i.interceptors.request.use((e=>e),(e=>Promise.reject(e))),i.interceptors.response.use((e=>e.data),(e=>{e.response&&401===e.response.status&&(alert("ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),r.A.push("/UserLogin"));const t=e.config?.url.includes("/login")||e.config?.url?.includes("/register"),a=localStorage.getItem("authToken");return a&&!t&&e.config&&(e.config.headers["Authorization"]=`Bearer ${a}`),e.config&&!e.config.headers["Content-Type"]&&(e.config.headers["Content-Type"]="application/json"),Promise.reject(e)})),t.A=i},9108:function(e,t,a){a.r(t),a.d(t,{default:function(){return he}});var s=a(6768),r=a(4232);const i={key:0,class:"loading-overlay"},o=["src"],n={class:"homepage container mt-5"},l={class:"carousel-section"},c={key:0,class:"loading-spinner"},d={key:1,id:"mainCarousel",class:"carousel slide position-relative carousel-fade","data-bs-ride":"carousel"},u={class:"carousel-indicators custom-indicators"},p=["data-bs-slide-to","aria-current","aria-label"],m={class:"carousel-inner rounded-4 shadow-lg"},h={class:"carousel-image-container"},g=["src"],k={key:1,class:"product-section mt-5"},f={class:"product-grid"},b={class:"product-image-wrapper"},v=["src"],L={class:"product-overlay"},y=["onClick","disabled"],w={class:"product-info"},C={class:"product-name"},I={key:0,class:"product-tag"},A={class:"sales-ranking mt-5"},P={key:0},_={key:1},E={key:2},F={class:"product-list"},x={class:"product-thumbnail-wrapper"},S=["src"],O={class:"product-overlay"},U=["onClick","disabled"],R={class:"product-details"},T={class:"range-name"},D={class:"product-name"},M={class:"sales-count"},$={class:"sales-ranking mt-5"},N={key:0},X={key:1},q={key:2},V={class:"product-list"},W={class:"product-thumbnail-wrapper"},B=["src"],K={class:"product-overlay"},J=["onClick","disabled"],Q={class:"product-details"},j={class:"range-name"},z={class:"product-name"},H={class:"sales-count"},G={key:2,class:"sales-ranking mt-4"},Z={class:"product-list"},Y={class:"product-thumbnail-wrapper"},ee=["src"],te={class:"product-overlay"},ae=["onClick","disabled"],se={class:"product-details"},re={class:"product-name"},ie={class:"price",style:{color:"red"}};function oe(e,t,a,oe,ne,le){return(0,s.uX)(),(0,s.CE)(s.FK,null,[ne.isPageLoading?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("img",{src:ne.loadingGif,alt:"è¼‰å…¥ä¸­",class:"loading-gif"},null,8,o)])):(0,s.Q3)("",!0),(0,s.Lk)("div",n,[(0,s.Lk)("div",l,[ne.isLoading.carousel?((0,s.uX)(),(0,s.CE)("div",c,t[5]||(t[5]=[(0,s.Lk)("div",{class:"spinner-border",role:"status"},[(0,s.Lk)("span",{class:"visually-hidden"},"åŠ è¼‰ä¸­...")],-1)]))):ne.carouselImages&&ne.carouselImages.length?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ne.carouselImages,((e,t)=>((0,s.uX)(),(0,s.CE)("button",{key:"indicator-"+t,type:"button","data-bs-target":"#mainCarousel","data-bs-slide-to":t,class:(0,r.C4)([{active:0===t},"indicator-dot"]),"aria-current":0===t,"aria-label":"Slide"+(t+1)},null,10,p)))),128))]),(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ne.carouselImages,((a,i)=>((0,s.uX)(),(0,s.CE)("div",{key:"slide-"+i,class:(0,r.C4)(["carousel-item",{active:0===i}])},[(0,s.Lk)("div",h,[(0,s.Lk)("img",{src:e.$getImageUrl(a.url,"carousel"),class:"d-block w-100",alt:"è¼ªæ’­åœ–ç‰‡",onError:t[0]||(t[0]=(...e)=>le.handleCarouselImageError&&le.handleCarouselImageError(...e))},null,40,g)])],2)))),128))]),t[6]||(t[6]=(0,s.Fv)('<button class="carousel-control-prev custom-control" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev" data-v-677e4b98><span class="carousel-control-prev-icon" aria-hidden="true" data-v-677e4b98></span><span class="visually-hidden" data-v-677e4b98>Previous</span></button><button class="carousel-control-next custom-control" type="button" data-bs-target="#mainCarousel" data-bs-slide="next" data-v-677e4b98><span class="carousel-control-next-icon" aria-hidden="true" data-v-677e4b98></span><span class="visually-hidden" data-v-677e4b98>Next</span></button>',2))])):(0,s.Q3)("",!0)])]),ne.randomProducts&&ne.randomProducts.length>0?((0,s.uX)(),(0,s.CE)("div",k,[t[7]||(t[7]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",{class:"section-title"},"ç‚ºæ‚¨æ¨è–¦"),(0,s.Lk)("div",{class:"section-subtitle"},"ç²¾é¸å„ªè³ªå•†å“ï¼Œå°ˆå±¬æ–¼æ‚¨")],-1)),(0,s.Lk)("div",f,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ne.randomProducts,((a,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"product-card",style:(0,r.Tr)({animationDelay:.1*i+"s"})},[(0,s.Lk)("div",b,[(0,s.Lk)("img",{src:e.$getImageUrl(a.image,"product"),class:"product-image",onError:t[1]||(t[1]=(...t)=>e.handleImageError&&e.handleImageError(...t))},null,40,v),(0,s.Lk)("div",L,[(0,s.Lk)("button",{class:"view-details-btn",onClick:e=>le.viewDetails(a),disabled:!a||!a.id}," æŸ¥çœ‹è©³æƒ… ",8,y)])]),(0,s.Lk)("div",w,[(0,s.Lk)("h3",C,(0,r.v_)(a.name),1),"-"===a.quantity_sold?((0,s.uX)(),(0,s.CE)("div",I,"ç†±é–€æ¨è–¦")):(0,s.Q3)("",!0)])],4)))),128))])])):(0,s.Q3)("",!0),t[15]||(t[15]=(0,s.Lk)("div",{class:"section-divider"},null,-1)),(0,s.Lk)("div",A,[t[10]||(t[10]=(0,s.Lk)("h2",null,"éå»7æ—¥éŠ·å”®æ’è¡Œ",-1)),ne.isLoading.sales?((0,s.uX)(),(0,s.CE)("div",P,"è¼‰å…¥ä¸­...")):ne.errors.sales?((0,s.uX)(),(0,s.CE)("div",_,(0,r.v_)(ne.errors.sales),1)):0===ne.sevenDaySalesRanking.length?((0,s.uX)(),(0,s.CE)("div",E,"æš«ç„¡éŠ·å”®æ•¸æ“š")):(0,s.Q3)("",!0),(0,s.Lk)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ne.sevenDaySalesRanking,((a,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"product-item"},[(0,s.Lk)("div",x,[(0,s.Lk)("img",{src:e.$getImageUrl(a.image,"product"),class:"product-thumbnail",onError:t[2]||(t[2]=(...t)=>e.handleImageError&&e.handleImageError(...t))},null,40,S),(0,s.Lk)("div",O,[(0,s.Lk)("button",{class:"view-details-btn",onClick:e=>le.viewDetails(a),disabled:!a||!a.id}," æŸ¥çœ‹è©³æƒ… ",8,U)])]),(0,s.Lk)("div",R,[(0,s.Lk)("div",T,[t[8]||(t[8]=(0,s.eW)("éŠ·å”®æ’è¡Œç¬¬ ")),(0,s.Lk)("span",{class:(0,r.C4)(["range-number",ne.rankClass[i+1]])},(0,r.v_)(i+1),3),t[9]||(t[9]=(0,s.eW)("å "))]),(0,s.Lk)("div",D,(0,r.v_)(a.name),1),(0,s.Lk)("div",M,"è³£å‡º "+(0,r.v_)(a.sales_count)+" ä»¶",1)])])))),128))])]),t[16]||(t[16]=(0,s.Lk)("div",{class:"section-divider"},null,-1)),(0,s.Lk)("div",$,[t[13]||(t[13]=(0,s.Lk)("h2",null,"éå»30æ—¥éŠ·å”®æ’è¡Œ",-1)),ne.isLoading.sales?((0,s.uX)(),(0,s.CE)("div",N,"è¼‰å…¥ä¸­...")):ne.errors.sales?((0,s.uX)(),(0,s.CE)("div",X,(0,r.v_)(ne.errors.sales),1)):0===ne.monthSalesRanking.length?((0,s.uX)(),(0,s.CE)("div",q,"æš«ç„¡éŠ·å”®æ•¸æ“š")):(0,s.Q3)("",!0),(0,s.Lk)("div",V,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ne.monthSalesRanking,((a,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"product-item"},[(0,s.Lk)("div",W,[(0,s.Lk)("img",{src:e.$getImageUrl(a.image,"product"),class:"product-thumbnail",onError:t[3]||(t[3]=(...t)=>e.handleImageError&&e.handleImageError(...t))},null,40,B),(0,s.Lk)("div",K,[(0,s.Lk)("button",{class:"view-details-btn",onClick:e=>le.viewDetails(a),disabled:!a||!a.id}," æŸ¥çœ‹è©³æƒ… ",8,J)])]),(0,s.Lk)("div",Q,[(0,s.Lk)("div",j,[t[11]||(t[11]=(0,s.eW)("éŠ·å”®æ’è¡Œç¬¬ ")),(0,s.Lk)("span",{class:(0,r.C4)(["range-number",ne.rankClass[i+1]])},(0,r.v_)(i+1),3),t[12]||(t[12]=(0,s.eW)("å "))]),(0,s.Lk)("div",z,(0,r.v_)(a.name),1),(0,s.Lk)("div",H,"è³£å‡º "+(0,r.v_)(a.sales_count)+" ä»¶",1)])])))),128))])]),t[17]||(t[17]=(0,s.Lk)("div",{class:"section-divider"},null,-1)),le.processedSpecialOffers.length>0?((0,s.uX)(),(0,s.CE)("div",G,[t[14]||(t[14]=(0,s.Lk)("h2",null,"ç‰¹åƒ¹å€’æ•¸è¨ˆæ™‚å•†å“",-1)),(0,s.Lk)("div",Z,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(le.processedSpecialOffers,((a,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"product-item"},[(0,s.Lk)("div",Y,[(0,s.Lk)("img",{src:e.$getImageUrl(a.image,"product"),class:"product-thumbnail",onError:t[4]||(t[4]=(...e)=>le.handleSpecialOfferImageError&&le.handleSpecialOfferImageError(...e))},null,40,ee),(0,s.Lk)("div",te,[(0,s.Lk)("button",{class:"view-details-btn",onClick:t=>e.viewDetailsById(a.product_id),disabled:!a.product_id}," æŸ¥çœ‹è©³æƒ… ",8,ae)])]),(0,s.Lk)("div",se,[(0,s.Lk)("div",re,(0,r.v_)(a.name),1),(0,s.Lk)("div",ie,"ç‰¹åƒ¹ "+(0,r.v_)(le.formatPrice(a.price))+"å…ƒ",1),(0,s.Lk)("div",{class:(0,r.C4)(["countdown-timer",a.status])},(0,r.v_)("upcoming"===a.status?"å³å°‡é–‹å§‹":"å‰©é¤˜æ™‚é–“")+" å€’æ•¸"+(0,r.v_)(le.formatTime(a.countdown)),3)])])))),128))])])):(0,s.Q3)("",!0)],64)}a(4114),a(8992),a(4520),a(2577),a(3949),a(1454);var ne=a(4300),le=a(3664),ce=a.p+"static/img/loading.6a7c5061.gif";const de={carouselImages:[{url:"/static/img/happynewyear.png"},{url:"/static/img/welcome.jpg"}]};var ue={name:"HomePage",data(){return{isPageLoading:!0,loadingTimeout:null,loadingGif:ce,sevenDaySalesRanking:[],monthSalesRanking:[],specialOffers:[],products:[],countdownIntervals:[],isLoading:{sales:!1,offers:!1,carousel:!1,products:!1},errors:{sales:null,offers:null,carousel:null,products:null},randomProducts:null,carouselImages:[...de.carouselImages],rankClass:{1:"gold",2:"silver",3:"bronze"}}},async mounted(){this.loadingTimeout=setTimeout((()=>{this.isPageLoading&&window.location.reload()}),1e4);try{await this.loadHomePageData(),this.carouselImages.length>0&&(await this.$nextTick(),this.initializeCarousel()),this.startCountdown()}catch(e){}finally{this.isPageLoading=!1,clearTimeout(this.loadingTimeout)}},methods:{handleError(e,t){this.errors[e]=`ç„¡æ³•åŠ è¼‰ ${e} æ•¸æ“šï¼Œè«‹ç¨å¾Œå†è©¦ã€‚`,"carousel"===e&&(this.carouselImages=de.carouselImages)},handleSpecialOfferImageError(e){e&&e.target&&(e.target.onerror=null,e.target.src="/img/wrong.png")},handleCarouselImageError(e){e&&e.target&&(e.target.src.includes("happynewyear.png")||(e.target.onerror=null,e.target.src="/static/img/happynewyear.png"))},async loadHomePageData(){try{await this.loadProductsData(),this.randomProducts=this.getRandomProducts(5),await this.loadCarouselData(),setTimeout((()=>{this.loadSalesData(),this.loadOffersData()}),1e3)}catch(e){}},async loadSalesData(){this.isLoading.sales=!0;try{const[e,t]=await Promise.all([ne.A.rankingAPI.getRanking(7),ne.A.rankingAPI.getRanking(30)]);e.success&&Array.isArray(e.data)?this.sevenDaySalesRanking=this.processSalesRanking(e.data):this.sevenDaySalesRanking=[],t.success&&Array.isArray(t.data)?this.monthSalesRanking=this.processSalesRanking(t.data):this.monthSalesRanking=[]}catch(e){}finally{this.isLoading.sales=!1}},processSalesRanking(e){return Array.isArray(e)?e.map((e=>({id:e.id,name:e.name,sales_count:e.sales_count||0,image:e.image?this.$getImageUrl(e.image,"product"):"/img/wrong.png"}))).filter((e=>e.sales_count>0)).slice(0,10):[]},async loadOffersData(){this.isLoading.offers=!0;try{const e=await ne.A.specialOffersAPI.getAllSpecialOffers();e&&Array.isArray(e)&&(this.specialOffers=e.map((e=>({...e,countdown:e.countdown||36e3,product_id:Number(e.product_id)}))))}catch(e){this.errors.offers="ç„¡æ³•åŠ è¼‰ç‰¹åƒ¹å•†å“æ•¸æ“š",this.specialOffers=[]}finally{this.isLoading.offers=!1}},async loadCarouselData(){try{const e=await ne.A.carouselAPI.getAllCarouselImages();Array.isArray(e)&&e.length>0?this.carouselImages=e.filter((e=>e.visible)).map((e=>({...e,url:this.$getImageUrl(e.url,"carousel")}))):this.carouselImages=de.carouselImages}catch(e){this.carouselImages=de.carouselImages}finally{this.isLoading.carousel=!1}},async loadProductsData(){this.isLoading.products=!0;try{const e=await ne.A.productAPI.getAllProducts();this.products=e||[]}catch(e){this.errors.products="ç„¡æ³•åŠ è¼‰å•†å“åˆ—è¡¨",this.products=[]}finally{this.isLoading.products=!1}},convertToSortedRankingWithProducts(e){return Object.entries(e).map((([e,t])=>{const a=Number(e),s=this.products.find((e=>e.id===a));return{product_id:e,quantity_sold:t,name:s?s.name:"æœªçŸ¥å•†å“",image:s?s.image:"/img/wrong.png"}})).sort(((e,t)=>t.quantity_sold-e.quantity_sold)).slice(0,5)},startCountdown(){if(this.clearCountdownIntervals(),!this.specialOffers||0===this.specialOffers.length)return;const e=()=>{const e=Date.now();this.specialOffers=this.specialOffers.map((t=>{const a=new Date(t.start_time).getTime(),s=t.end_time?new Date(t.end_time).getTime():a+1e3*t.duration;let r=0,i="active";return e<a?(r=a-e,i="upcoming"):e>=s&&e<=s?(r=s-e,i="active"):(r=0,i="ended"),{...t,countdown:Math.floor(r/1e3),status:i}}))};e();const t=setInterval(e,1e3);this.countdownIntervals.push(t)},clearCountdownIntervals(){this.countdownIntervals.forEach((e=>clearInterval(e))),this.countdownIntervals=[]},formatTime(e){if(e<=0)return"å·²çµæŸ";const t=Math.floor(e/86400),a=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),r=e%60;return t>0?`${t}å¤©${a}æ™‚${s}åˆ†${r}ç§’`:a>0?`${a}æ™‚${s}åˆ†${r}ç§’`:s>0?`${s}åˆ†${r}ç§’`:`${r}ç§’`},getProductImage(e){const t=this.products.find((t=>t.id===Number(e)));return t&&t.image?this.$getImageUrl(t.image,"product"):"/img/wrong.png"},getRandomProducts(e=5){const t=[...this.products];for(let a=t.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t.slice(0,e).map((e=>({...e,quantity_sold:"-"})))},initializeCarousel(){this.$nextTick((()=>{const e=document.getElementById("mainCarousel");e&&new le.FN(e,{interval:5e3,touch:!0,pause:"hover",keyboard:!0})}))},viewDetails(e){e&&e.id?this.$router.push({name:"ProductDetail",params:{id:String(e.id)}}):this.$store.dispatch("notifications/showNotification",{type:"error",message:"ç„¡æ³•æŸ¥çœ‹å•†å“è©³æƒ…ï¼Œè«‹ç¨å¾Œå†è©¦"})},formatPrice(e){return e||0===e?e.toLocaleString("zh-TW",{minimumFractionDigits:0,maximumFractionDigits:0}):"0"}},beforeUnmount(){this.clearCountdownIntervals(),this.isPageLoading&&clearTimeout(this.loadingTimeout)},computed:{processedSpecialOffers(){const e=Date.now();return[...this.specialOffers].filter((t=>{const a=new Date(t.start_time).getTime(),s=new Date(t.end_time).getTime();return(e>=a&&e<=s||e<a)&&t.countdown>0&&t.price>0})).sort(((e,t)=>e.status!==t.status?"active"===e.status?-1:1:e.countdown-t.countdown))}}},pe=a(1241);const me=(0,pe.A)(ue,[["render",oe],["__scopeId","data-v-677e4b98"]]);var he=me}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,i){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],i=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/ECshop/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,o=s[0],n=s[1],l=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var d=l(a)}for(t&&t(s);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkeshop_site"]=self["webpackChunkeshop_site"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(1333)}));s=a.O(s)})();